<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>化简为凡的小站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="hello, everyone, I love you!~">
<meta property="og:type" content="website">
<meta property="og:title" content="化简为凡的小站">
<meta property="og:url" content="http://hushiking.github.io/page/4/index.html">
<meta property="og:site_name" content="化简为凡的小站">
<meta property="og:description" content="hello, everyone, I love you!~">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="化简为凡的小站">
<meta name="twitter:description" content="hello, everyone, I love you!~">
  
    <link rel="alternate" href="/atom.xml" title="化简为凡的小站" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">化简为凡的小站</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">用生命谱写代码的赞歌</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hushiking.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JavaScript/自己实现双向数据绑定" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/25/JavaScript/自己实现双向数据绑定/" class="article-date">
  <time datetime="2017-07-25T11:56:34.000Z" itemprop="datePublished">2017-07-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/25/JavaScript/自己实现双向数据绑定/">使用访问器属性实现双向数据绑定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="自己实现双向数据绑定"><a href="#自己实现双向数据绑定" class="headerlink" title="自己实现双向数据绑定"></a>自己实现双向数据绑定</h1><p>从去年开始经常接触到各种框架的双向数据绑定，一直没深入研究其机制，今天我就使用 JS 的访问器属性实现自己的双向数据绑定。</p>
<h2 id="ES5数据属性"><a href="#ES5数据属性" class="headerlink" title="ES5数据属性"></a>ES5数据属性</h2><p>数据属性有4个描述其行为的特性：</p>
<ol>
<li><p>[[Configurable]]：表示能否通过delete删除属性并重新定义属性，能否修改属性的特性…例如</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"name"</span>, &#123;</span><br><span class="line">    writable: <span class="literal">false</span>,</span><br><span class="line">    value: <span class="string">"Nick"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>[[Enumerable]]：表示能否通过for-in循环返回属性</p>
</li>
<li>[[Writable]]：表示能否修改属性值</li>
<li>[[Value]]：包含这个属性的数据值，默认为undefined</li>
</ol>
<h2 id="访问器属性"><a href="#访问器属性" class="headerlink" title="访问器属性"></a>访问器属性</h2><p>访问器属性不包含数据值，包含一对getter和setter函数（不是必需的）。在读取访问器属性时会调用getter函数，这个函数负责返回有效的值；在写入访问器属性时会调用setter函数并传入新值，这个函数负责决定如何处理数据。例如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">    _year: <span class="number">2017</span>,</span><br><span class="line">    edition: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">Obj.defineProperty(book, <span class="string">"year"</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>: function() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._year</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>: function(newValue) &#123;</span><br><span class="line">        <span class="keyword">if</span> (newValue &gt; <span class="number">2017</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>._year = newValue</span><br><span class="line">            <span class="keyword">this</span>.edition += newValue - <span class="number">2017</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">book.year = <span class="number">2018</span></span><br><span class="line">alert(book.edition)  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<h2 id="访问器属性实现双向数据绑定"><a href="#访问器属性实现双向数据绑定" class="headerlink" title="访问器属性实现双向数据绑定"></a>访问器属性实现双向数据绑定</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"inputDom"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">style</span>=<span class="string">"width:100px;height:40px;border:1px solid red"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"bandleDom"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> obj = &#123;</span></span><br><span class="line"><span class="javascript">        _name: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.querySelector(<span class="string">'#inputDom'</span>).onkeyup = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> _ele = e.target</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> inputVal = _ele.value</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(inputVal)</span></span><br><span class="line"><span class="undefined">        obj.name = inputVal</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(key)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">Object</span>.defineProperty(obj, <span class="string">'name'</span>, &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">get</span>() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="keyword">this</span>._name</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="keyword">set</span>(newVal) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>._name = newVal</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.querySelector(<span class="string">'#bandleDom'</span>).innerHTML = newVal</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/07/25/JavaScript/自己实现双向数据绑定/" data-id="cjvlw5bl5004ixfq3n3wmvrxu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript/JS正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/19/JavaScript/JS正则表达式/" class="article-date">
  <time datetime="2017-06-18T16:52:51.000Z" itemprop="datePublished">2017-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/19/JavaScript/JS正则表达式/">JS 正则表达式简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/pattern/flags</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(pattern [, flags])</span><br><span class="line"><span class="built_in">RegExp</span>(pattern [, flags])</span><br></pre></td></tr></table></figure>
<p>常用 flags 包括 g（全局匹配），i（忽略大小写），m（多行匹配； 将开始和结束字符（^和$）视为在多行上工作）。</p>
<h2 id="正则表达式特殊字符含义"><a href="#正则表达式特殊字符含义" class="headerlink" title="正则表达式特殊字符含义"></a>正则表达式特殊字符含义</h2><ol>
<li><p>字符类别</p>
<ul>
<li><code>.</code>: (点号，小数点) 匹配任意单个字符，但是行结束符除外：\n \r \u2028 或 \u2029。在字符集（如[xyz]）中，点( . )失去其特殊含义，并匹配一个字面点( . )。</li>
<li><code>\d</code>: 匹配任意阿拉伯数字。等价于[0-9]。</li>
<li><code>\D</code>: 匹配任意一个不是阿拉伯数字的字符。等价于[^0-9]。</li>
<li><code>\w</code>: 匹配任意来自基本拉丁字母表中的字母数字字符，还包括下划线。等价于 [A-Za-z0-9_]。</li>
<li><code>\W</code>: 匹配任意不是基本拉丁字母表中单词（字母数字下划线）字符的字符。等价于 [^A-Za-z0-9_]。</li>
<li><code>\s</code>: 匹配一个空白符，包括空格、制表符、换页符、换行符和其他 Unicode 空格。</li>
<li><code>\S</code>: 匹配一个非空白符。</li>
<li><code>[\b]</code>: 匹配一个退格符（backspace）（不要与 \b 混淆）</li>
</ul>
</li>
<li><p>字符集合（字符组）</p>
<ul>
<li><code>[xyz]</code>: 匹配集合中的任意一个字符。你可以使用连字符’-‘指定一个范围。例如，[abcd] 等价于 [a-d]。</li>
<li><code>[^xyz]</code>: 一个反义或补充字符集，也叫反义字符组。也就是说，它匹配任意不在括号内的字符。</li>
</ul>
</li>
<li><p>边界</p>
<ul>
<li><code>^</code>与<code>$</code>: 匹配输入开始与结尾。</li>
<li><code>\b</code>: 匹配一个零宽单词边界（zero-width word boundary），如一个字母与一个空格之间。例如，/\bno/ 匹配 “at noon” 中的 “no”，/ly\b/ 匹配 “possibly yesterday.” 中的 “ly”。</li>
<li><code>\B</code>: 匹配一个零宽非单词边界（zero-width non-word boundary），如两个字母之间或两个空格之间。例如，/\Bon/ 匹配 “at noon” 中的 “on”，/ye\B/ 匹配 “possibly yesterday.” 中的 “ye”。</li>
</ul>
</li>
<li><p>分组与反向引用</p>
<ul>
<li><code>(x)</code>: 匹配 x 并且捕获匹配项。例如，/(foo)/ 匹配且捕获 “foo bar.” 中的 “foo”。</li>
<li><code>\n</code>: n 是一个正整数。一个反向引用（back reference），指向正则表达式中第 n 个括号（从左开始数）中匹配的子字符串。例如，/apple(,)\sorange\1/ 匹配 “apple, orange, cherry, peach.” 中的 “apple,orange,”。</li>
<li><code>(?:x)</code>: 匹配 x 不会捕获匹配项。</li>
</ul>
</li>
<li><p>数量词</p>
<ul>
<li><code>x*?</code>与<code>x+?</code>: 像上面的 * 和 + 一样匹配前面的模式 x，<strong>然而匹配是最小可能匹配</strong>。</li>
<li><code>x?</code>: 匹配前面的模式 x 0 或 1 次。<strong><em>如果在数量词 </em>、+、? 或 {}, 任意一个后面紧跟该符号（?），*</strong>会使数量词变为非贪婪（ non-greedy） ，即匹配次数最小化。反之，默认情况下，是贪婪的（greedy），即匹配次数最大化。</li>
<li><code>x(?=y)</code>: 只有当 x 后面紧跟着 y 时，才匹配 x。</li>
<li><code>x(?!y)</code>: 只有当 x 后面不是紧跟着 y 时，才匹配 x。</li>
<li><code>x|y</code>: 匹配 x 或 y。</li>
<li><code>x{n}</code>: n 是一个正整数。前面的模式 x 连续出现 n 次时匹配。例如，/a{2}/ 不匹配 “candy,” 中的 “a”，但是匹配 “caandy,” 中的两个 “a”，且匹配 “caaandy.” 中的前两个 “a”。</li>
<li><code>x{n,}</code>:n 是一个正整数。前面的模式 x 连续出现至少 n 次时匹配。例如，/a{2,}/ 不匹配 “candy” 中的 “a”，但是匹配 “caandy” 和 “caaaaaaandy.” 中所有的 “a”。</li>
<li><code>x{n,m}</code>: n 和 m 为正整数。前面的模式 x 连续出现至少 n 次，至多 m 次时匹配。例如，/a{1,3}/ 不匹配 “cndy”，匹配 “candy,” 中的 “a”，”caandy,” 中的两个 “a”，匹配 “caaaaaaandy” 中的前面三个 “a”。注意，当匹配 “caaaaaaandy” 时，即使原始字符串拥有更多的 “a”，匹配项也是 “aaa”。</li>
</ul>
</li>
</ol>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><ol>
<li><p><code>regexObj.exec(str)</code>: str 是要匹配正则表达式的字符串。匹配成功返回一个数组，并更新正则表达式对象的属性。匹配失败，<code>exec()</code> 方法返回 null。类似于 <code>String.prototype.match()</code> 方法。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Match "quick brown" followed by "jumps", ignoring characters in between</span></span><br><span class="line"><span class="comment">// Remember "brown" and "jumps"</span></span><br><span class="line"><span class="comment">// Ignore case</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/quick\s(brown).+?(jumps)/ig</span>;</span><br><span class="line"><span class="keyword">var</span> result = re.exec(<span class="string">'The Quick Brown Fox Jumps Over The Lazy Dog'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>result(数组)<ul>
<li><code>[0]</code>: 匹配的全部字符串 –&gt; Quick Brown Fox Jumps</li>
<li><code>[1], ...[n]</code>: 括号中的分组捕获 –&gt; [1] = Brown, [2] = Jumps</li>
<li><code>index</code>: 匹配到的字符位于原始字符串的基于0的索引值 –&gt; 4</li>
<li><code>input</code>: 原始字符串 –&gt; <code>The Quick Brown Fox Jumps Over The Lazy Dog</code></li>
</ul>
</li>
<li>re(RegExp对象)<ul>
<li><code>lastIndex</code>: 下一次匹配开始的位置 –&gt; 25</li>
<li><code>ignoreCase</code>: 是否使用了’i’标记使正则匹配忽略大小写 –&gt; true</li>
<li><code>global</code>: 是否使用了’g’标记来进行全局的匹配 –&gt; true</li>
<li><code>multiline</code>: 是否使用了’m’标记使正则工作在多行模式 –&gt; false</li>
<li><code>source</code>: 正则匹配的字符串 –&gt; <code>quick\s(brown).+?(jumps)</code></li>
</ul>
</li>
</ul>
</li>
<li><p><code>regexObj.test(str)</code>: 如果正则表达式与指定的字符串匹配 ，返回true；否则false。类似于 <code>String.prototype.search()</code> 方法，差别在于test返回一个布尔值，而 search 返回索引（如果找到）或者-1（如果没找到）。</p>
</li>
</ol>
<h2 id="贪婪模式与惰性模式"><a href="#贪婪模式与惰性模式" class="headerlink" title="贪婪模式与惰性模式"></a>贪婪模式与惰性模式</h2><ol>
<li>贪婪模式：匹配尽可能多的字符<br> 贪婪量词：?   +   *   {n}   {n,m}   {n,}</li>
<li>惰性模式：匹配尽可能少的字符<br> 惰性量词：??   +?   *?   {n}?   {n,m}?   {n,}?</li>
</ol>
<h3 id="邮箱的正则表达式"><a href="#邮箱的正则表达式" class="headerlink" title="邮箱的正则表达式"></a>邮箱的正则表达式</h3><ol>
<li><p>只允许英文字母、数字、下划线、英文句号、以及中划线组成</p>
<p> 例如：<a href="mailto:zhangsan-001@gmail.com" target="_blank" rel="noopener">zhangsan-001@gmail.com</a></p>
<p> 由于邮箱的基本格式为“名称@域名”，需要使用“^”匹配邮箱的开始部分，用“$”匹配邮箱结束部分以保证邮箱前后不能有其他字符，所以最终邮箱的正则表达式为：</p>
<p> <code>^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$</code></p>
</li>
<li><p>名称允许汉字、字母、数字，域名只允许英文域名</p>
<p> 例如： 帽子<a href="mailto:001Abc@lenovo.com.cn" target="_blank" rel="noopener">001Abc@lenovo.com.cn</a></p>
<p> <code>^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$</code></p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/06/19/JavaScript/JS正则表达式/" data-id="cjvlw5bkk0031xfq3w93fw2pm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RegExp/">RegExp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Mac/Mac快捷键" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/07/Mac/Mac快捷键/" class="article-date">
  <time datetime="2017-05-07T12:17:52.000Z" itemprop="datePublished">2017-05-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/运维与Linux/">运维与Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/07/Mac/Mac快捷键/">Mac shortcut</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Mac-shortcut"><a href="#Mac-shortcut" class="headerlink" title="Mac shortcut"></a>Mac shortcut</h1><p>本文用于总结 Mac 使用过程中一些常用的快捷键，不定时更新……</p>
<h2 id="系统操作快捷键"><a href="#系统操作快捷键" class="headerlink" title="系统操作快捷键"></a>系统操作快捷键</h2><ul>
<li>删除：<code>Command + Delete</code></li>
<li>清空废纸篓： <code>Command + Shift + Delete</code></li>
<li>跳转目录： <code>Commad + Shift + G</code></li>
</ul>
<h3 id="Finder显示访问路径"><a href="#Finder显示访问路径" class="headerlink" title="Finder显示访问路径"></a>Finder显示访问路径</h3><ul>
<li>Finder栏默认只显示当前浏览的文件夹名称, 打开terminal输入以下两条命令可以修改<ul>
<li><code>defaults write com.apple.finder _FXShowPosixPathInTitle -bool TRUE</code></li>
<li><code>killall Finder</code></li>
</ul>
</li>
<li>恢复默认状态, 两条命令联写<ul>
<li><code>defaults delete com.apple.finder _FXShowPosixPathInTitle;killall Finder</code></li>
</ul>
</li>
</ul>
<h3 id="刷新-DNS-缓存"><a href="#刷新-DNS-缓存" class="headerlink" title="刷新 DNS 缓存"></a>刷新 DNS 缓存</h3><ul>
<li>sudo killall -HUP mDNSResponder</li>
</ul>
<h2 id="Terminal-快捷键"><a href="#Terminal-快捷键" class="headerlink" title="Terminal 快捷键"></a>Terminal 快捷键</h2><ul>
<li>将光标移动到行首：<code>ctrl + a</code></li>
<li>将光标移动到行尾：<code>ctrl + e</code></li>
<li>清除屏幕：<code>ctrl + l</code></li>
<li>搜索以前使用命令：<code>ctrl + r</code></li>
<li>清除当前行：<code>ctrl + u</code></li>
<li>清除至当前行尾：<code>ctrl + k</code></li>
<li>单词为单位移动：<code>option + 方向键</code></li>
</ul>
<h2 id="Mac-复制粘贴"><a href="#Mac-复制粘贴" class="headerlink" title="Mac 复制粘贴"></a>Mac 复制粘贴</h2><p>使用 <code>pbcopy</code> 命令，对应有个 <code>pbpaste</code> 命令。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">'Hello World!'</span> | pbcopy</span><br><span class="line"><span class="comment"># 将字符串Hello World放入剪贴板</span></span><br><span class="line"></span><br><span class="line">cat myFile.txt | pbcopy</span><br><span class="line"></span><br><span class="line">pbpaste &gt; file.txt</span><br></pre></td></tr></table></figure>
<blockquote>
<p>复制 SSH 公有 key ：<code>pbcopy &lt; ~/.ssh/id_rsa.pub</code></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/05/07/Mac/Mac快捷键/" data-id="cjvlw5blb004vxfq3qolur4d8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mac/">Mac</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Webpack/webpack2爬过的坑" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/09/Webpack/webpack2爬过的坑/" class="article-date">
  <time datetime="2017-04-09T13:14:53.000Z" itemprop="datePublished">2017-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/09/Webpack/webpack2爬过的坑/">升级 Webpack2 爬坑之旅</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Webpack1-升级-Webpack2"><a href="#Webpack1-升级-Webpack2" class="headerlink" title="Webpack1 升级 Webpack2"></a>Webpack1 升级 Webpack2</h1><p>与 <code>Webpack1</code> 相比， <code>Webpack2</code> 拥有更强大的功能以及更简便的配置，是时候升级一波了。</p>
<p>下面就简要介绍我在升级过程中遇到的一些坑。o(╯□╰)o</p>
<h2 id="entry-入口"><a href="#entry-入口" class="headerlink" title="entry 入口"></a>entry 入口</h2><p><code>webpack1 devServer</code> 配置双服务器热替换模式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">entry:[</span><br><span class="line">    <span class="string">'webpack/hot/dev-server'</span>,  <span class="comment">// 配合 HMR 实现模块热加载</span></span><br><span class="line">    <span class="string">'webpack-dev-server/client?http://localhost:8080'</span>,  <span class="comment">//资源服务器地址</span></span><br><span class="line">    path.resolve(__dirname,<span class="string">'src/js/app.js'</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><code>webpack2</code> ，其中 <code>context</code> 指定了开发环境项目入口文件的目录</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">context: __dirname + <span class="string">'/src'</span>, <span class="comment">// 必须指定开发环境目录</span></span><br><span class="line">entry: &#123;</span><br><span class="line">    app: <span class="string">'./index.jsx'</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="module"><a href="#module" class="headerlink" title="module"></a>module</h2><p><code>webpack1</code> 采用 <code>loaders</code> 属性加载模块， <code>preLoaders</code> 提前加载。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    preLoaders: [</span><br><span class="line">        &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">"eslint-loader"</span>, <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    loaders: [</span><br><span class="line">        <span class="comment">// 处理jsx语法和ES6语法，加载器可以省略后缀</span></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.jsx?$/</span>, <span class="comment">// 用正则来匹配文件路径，这段意思是匹配 js 或者 jsx</span></span><br><span class="line">            loader: <span class="string">'babel'</span>,<span class="comment">// 加载模块 "babel" 是 "babel-loader" 的缩写</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 使用 eslint 检查 js 文件</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     test: /\.js$/,</span></span><br><span class="line">        <span class="comment">//     loader: "eslint",</span></span><br><span class="line">        <span class="comment">//     exclude: /node_modules/</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// 处理在 js中引用的 css文件</span></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>, <span class="comment">// Only .css files</span></span><br><span class="line">            loader: <span class="string">'style!css'</span> <span class="comment">// 如果有多个加载器，中间作用感叹号隔开，多个加载器是从右往左去执行</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     test: /\.css$/,</span></span><br><span class="line">        <span class="comment">//     loader: 'style!css',</span></span><br><span class="line">        <span class="comment">//     include: /node_modules/,</span></span><br><span class="line">        <span class="comment">//     loader: 'style!css?modules&amp;localIdentName=[name]__[local]-[hash:base64:5]'</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">            loader: <span class="string">'style!css!sass'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 1kb=1024b 1b=8bit   25000bit~3kb</span></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>,</span><br><span class="line">            loader: <span class="string">'url?limit=25000'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(eot|woff|ttf|woff2|svg)$/</span>,</span><br><span class="line">            loader: <span class="string">'url'</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><code>webpack2</code> 使用 <code>rules</code> 加载模块，在内部使用 <code>enfore: &#39;pre&#39;</code> 提前检测 <code>js</code> 文件，而且目前还兼容 <code>webpack1</code> 的 <code>loader</code> 写法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            enforce: <span class="string">'pre'</span>, <span class="comment">// 在babel-loader对源码进行编译前进行lint的检查</span></span><br><span class="line">            include: <span class="regexp">/src/</span>, <span class="comment">// src文件夹下的文件需要被lint</span></span><br><span class="line">            use: [&#123;</span><br><span class="line">                loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    formatter: <span class="built_in">require</span>(<span class="string">'eslint-friendly-formatter'</span>) <span class="comment">// 编译后错误报告格式</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line">            <span class="comment">// exclude: /node_modules/ 可以不用定义这个字段的属性值，eslint会自动忽略 node_modules 和 bower_components</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">            exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">            loaders: [</span><br><span class="line">                <span class="string">'babel-loader'</span>,</span><br><span class="line">                <span class="string">'eslint-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">            loaders: [</span><br><span class="line">                <span class="string">'style-loader'</span>,</span><br><span class="line">                <span class="string">'css-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">            use: [</span><br><span class="line">                <span class="string">'style-loader'</span>,</span><br><span class="line">                <span class="string">'css-loader'</span>,</span><br><span class="line">                <span class="string">'sass-loader'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>,</span><br><span class="line">            loader: <span class="string">'url-loader?limit=25000'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test: <span class="regexp">/\.(eot|woff|ttf|woff2|svg)$/</span>,</span><br><span class="line">            loader: <span class="string">'url-loader?limit=50000'</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="resolve"><a href="#resolve" class="headerlink" title="resolve"></a>resolve</h2><p>webpack1</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.scss'</span>, <span class="string">'.jsx'</span>]  <span class="comment">// 第一项为空，对应不需要后缀的情况</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>webpack2</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.scss'</span>, <span class="string">'.jsx'</span>],  <span class="comment">// 第一项不能为空</span></span><br><span class="line">    enforceExtension: <span class="literal">false</span>  <span class="comment">// 对应 webpack1后缀名为空选项</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="webpack2-生产环境配置遇到的坑"><a href="#webpack2-生产环境配置遇到的坑" class="headerlink" title="webpack2 生产环境配置遇到的坑"></a>webpack2 生产环境配置遇到的坑</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pkg = <span class="built_in">require</span>(<span class="string">'./package.json'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// css 文件抽取配置项</span></span><br><span class="line"><span class="keyword">var</span> ExtractCSS = <span class="keyword">new</span> ExtractTextPlugin(&#123;</span><br><span class="line">    filename: <span class="string">"/css/[name].[contenthash].css"</span>,</span><br><span class="line">    disable: process.env.NODE_ENV === <span class="string">"dev"</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// less文件抽取配置项</span></span><br><span class="line"><span class="keyword">var</span> ExtractLess = <span class="keyword">new</span> ExtractTextPlugin(&#123;</span><br><span class="line">    filename: <span class="string">"/css/[name].[contenthash].css"</span>,</span><br><span class="line">    disable: process.env.NODE_ENV === <span class="string">"dev"</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">        app: path.resolve(__dirname, <span class="string">'app/index.jsx'</span>),</span><br><span class="line">        <span class="comment">// 将 第三方依赖（node_modules中的） 单独打包</span></span><br><span class="line">        vendor: <span class="built_in">Object</span>.keys(pkg.dependencies)</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: __dirname + <span class="string">"/build"</span>,</span><br><span class="line">        filename: <span class="string">"js/[name].[chunkhash:8].js"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">'.js'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                loader: <span class="string">'babel-loader'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: ExtractCSS.extract(&#123;</span><br><span class="line">                    fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">                    use: [</span><br><span class="line">                        &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span>, <span class="attr">options</span>: &#123; <span class="attr">importLoaders</span>: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            loader: <span class="string">'postcss-loader'</span>,  <span class="comment">// 加载 postcss-loader的第一种方式</span></span><br><span class="line">                            options: &#123;</span><br><span class="line">                                plugins: <span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">                                    <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)()  <span class="comment">// 调用autoprefixer插件，例如display: flex</span></span><br><span class="line">                                ]</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: ExtractLess.extract(&#123;</span><br><span class="line">                    use: [</span><br><span class="line">                        &#123; <span class="attr">loader</span>: <span class="string">"css-loader"</span> &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">                            options: &#123;</span><br><span class="line">                                plugins: <span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">                                    <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)()  <span class="comment">// 调用autoprefixer插件，例如display: flex</span></span><br><span class="line">                                ]</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123; <span class="attr">loader</span>: <span class="string">"less-loader"</span> &#125;</span><br><span class="line">                    ],</span><br><span class="line">                    <span class="comment">// use style-loader in development</span></span><br><span class="line">                    fallback: <span class="string">"style-loader"</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|gif|jpg|jpeg|bmp)$/i</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            limit: <span class="number">5000</span>,</span><br><span class="line">                            name: <span class="string">'images/[name].[hash:8].[ext]'</span>  <span class="comment">// 使用 chunkhash报错，因为图片不是chunk片段</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|woff|woff2|svg|ttf|eot)($|\?)/i</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            limit: <span class="number">5000</span>,</span><br><span class="line">                            name: <span class="string">'fonts/[name].[hash:8].[ext]'</span>  <span class="comment">// 不能使用 chunkhash</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">// webpack1 迁移 webpack2，postcss-loader配置，加载 postcss-loader的第二种方式</span></span><br><span class="line">        <span class="comment">// https://webpack.js.org/guides/migrating/#complex-options</span></span><br><span class="line">        <span class="comment">/* new webpack.LoaderOptionsPlugin(&#123;</span></span><br><span class="line"><span class="comment">            options: &#123;</span></span><br><span class="line"><span class="comment">                postcss: function () &#123;</span></span><br><span class="line"><span class="comment">                    return [</span></span><br><span class="line"><span class="comment">                        require("autoprefixer")(&#123;</span></span><br><span class="line"><span class="comment">                            browsers: ['ie&gt;=8', '&gt;1% in CN']</span></span><br><span class="line"><span class="comment">                        &#125;)</span></span><br><span class="line"><span class="comment">                    ]</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;), */</span></span><br><span class="line">        <span class="comment">// webpack 内置的 banner-plugin</span></span><br><span class="line">        <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">"Copyright hushiking@github.com."</span>),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// html 模板插件</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: __dirname + <span class="string">'/app/template.html'</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义为生产环境，编译 React 时压缩到最小</span></span><br><span class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">            <span class="string">'process.env'</span>: &#123;</span><br><span class="line">                <span class="comment">// 'NODE_ENV': JSON.stringify(process.env.NODE_ENV)</span></span><br><span class="line">                <span class="string">'NODE_ENV'</span>: <span class="built_in">JSON</span>.stringify(<span class="string">'production'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 为组件分配ID，通过这个插件webpack可以分析和优先考虑使用最多的模块，并为它们分配最小的ID</span></span><br><span class="line">        <span class="comment">// new webpack.optimize.OccurenceOrderPlugin(),</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">            compress: &#123;</span><br><span class="line">                <span class="comment">//supresses warnings, usually from module minification</span></span><br><span class="line">                warnings: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果没有 less文件，可以单独抽取 css文件</span></span><br><span class="line">        <span class="comment">// new ExtractTextPlugin('/css/[name].[chunkhash:8].css'),</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 有 less文件则分别抽取 css与 less文件到不同文件</span></span><br><span class="line">        ExtractCSS,</span><br><span class="line">        ExtractLess,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 提供公共代码</span></span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">            name: <span class="string">'vendor'</span>,</span><br><span class="line">            filename: <span class="string">'/js/[name].[chunkhash:8].js'</span></span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 可在业务 js 代码中使用 __DEV__ 判断是否是dev模式（dev模式下可以提示错误、测试报告等, production模式不提示）</span></span><br><span class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">            __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse((process.env.NODE_ENV == <span class="string">'dev'</span>) || <span class="string">'false'</span>))</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外， <code>postcss-loader</code> 还有第三种配置方式，即引用外部 <code>postcss.config.js</code> 配置文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>webpack.production.js</code> 文件无需其它设置，直接使用 <code>postcss-loader</code> ：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    use: ExtractCSS.extract(&#123;</span><br><span class="line">        fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">        use: [</span><br><span class="line">            &#123; <span class="attr">loader</span>: <span class="string">'css-loader'</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">loader</span>: <span class="string">'postcss-loader'</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/04/09/Webpack/webpack2爬过的坑/" data-id="cjvlw5bnc00arxfq3jok1fr4i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-React/React开发简易豆瓣App" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/22/React/React开发简易豆瓣App/" class="article-date">
  <time datetime="2017-03-22T13:23:56.000Z" itemprop="datePublished">2017-03-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/React/React开发简易豆瓣App/">React 开发简易查询豆瓣电影 App</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="React-开发简易-App"><a href="#React-开发简易-App" class="headerlink" title="React 开发简易 App"></a>React 开发简易 App</h1><p>结合 <code>React</code> 技术开发简易的查询豆瓣电影 <code>App</code> ，开发过程中使用 <code>Node.js</code> 搭建代理服务器，跨域请求豆瓣电影的一些 API 接口。</p>
<p>应用详细代码访问我的 <a href="https://github.com/hushiking/React-douban" target="_blank" rel="noopener">github 地址</a>。</p>
<h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AppContainer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">            &lt;h1&gt;App&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">            &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">              &lt;li&gt;&lt;Link to="/</span>about<span class="string">"&gt;About&lt;/Link&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">              &lt;li&gt;&lt;Link to="</span>/inbox<span class="string">"&gt;Inbox&lt;/Link&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &#123;/* 路由匹配的内容 */&#125;</span></span><br><span class="line"><span class="string">            &#123;this.props.children&#125;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Routers</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Router history=&#123;hashHistory&#125;&gt;</span><br><span class="line">                &lt;Route path=<span class="string">"/"</span> component=&#123;App&#125;&gt;</span><br><span class="line">                    &lt;Route path=<span class="string">"about"</span> component=&#123;About&#125; /&gt;</span><br><span class="line">                    &lt;Route path=<span class="string">"inbox"</span> component=&#123;Inbox&#125;&gt;</span><br><span class="line">                        &lt;Route path=<span class="string">"messages/:id"</span> component=&#123;Message&#125; /&gt;</span><br><span class="line">                    &lt;<span class="regexp">/Route&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>Route&gt;</span><br><span class="line">            &lt;<span class="regexp">/Router&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Routers/</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="添加首页"><a href="#添加首页" class="headerlink" title="添加首页"></a>添加首页</h3><p>当 URL 为 / 时，我们想渲染一个在 App 中的组件。不过在此时，App 的 render 中的 this.props.children 还是 undefined。这种情况我们可以使用 IndexRoute 来设置一个默认页面。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Routers</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Router history=&#123;hashHistory&#125;&gt;</span><br><span class="line">                &lt;Route path=<span class="string">"/"</span> component=&#123;App&#125;&gt;</span><br><span class="line">                    &#123;<span class="comment">/* 当 url 为/时渲染 Dashboard */</span>&#125;</span><br><span class="line">                    &lt;IndexRoute component=&#123;Dashboard&#125; /&gt;</span><br><span class="line">                    &lt;Route path=<span class="string">"about"</span> component=&#123;About&#125; /&gt;</span><br><span class="line">                    &lt;Route path=<span class="string">"inbox"</span> component=&#123;Inbox&#125;&gt;</span><br><span class="line">                        &#123;<span class="comment">/* 使用 /messages/:id 替换 messages/:id */</span>&#125;</span><br><span class="line">                        &lt;Route path=<span class="string">"/messages/:id"</span> component=&#123;Message&#125; /&gt;</span><br><span class="line">                        &#123;<span class="comment">/* 跳转 /inbox/messages/:id 到 /messages/:id */</span>&#125;</span><br><span class="line">                        &lt;Redirect <span class="keyword">from</span>=<span class="string">"messages/:id"</span> to=<span class="string">"/messages/:id"</span> /&gt;</span><br><span class="line">                    &lt;<span class="regexp">/Route&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>Route&gt;</span><br><span class="line">            &lt;<span class="regexp">/Router&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="进入和离开的hook"><a href="#进入和离开的hook" class="headerlink" title="进入和离开的hook"></a>进入和离开的hook</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route</span><br><span class="line">    path=<span class="string">"about"</span></span><br><span class="line">    component=&#123;Inbox&#125;</span><br><span class="line">    onEnter=&#123;() =&gt; <span class="built_in">console</span>.log(<span class="string">'进入了Inbox路由'</span>)&#125;</span><br><span class="line">    onLeave=&#123;() =&gt; <span class="built_in">console</span>.log(<span class="string">'离开了Inbox路由'</span>)&#125;</span><br><span class="line">&gt;</span><br><span class="line">&lt;<span class="regexp">/Route&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="路由匹配原理"><a href="#路由匹配原理" class="headerlink" title="路由匹配原理"></a>路由匹配原理</h2><h3 id="路径语法"><a href="#路径语法" class="headerlink" title="路径语法"></a>路径语法</h3><p>路由路径是匹配一个（或一部分）URL 的 一个字符串模式。大部分的路由路径都可以直接按照字面量理解，除了以下几个特殊的符号：</p>
<ul>
<li>:paramName – 匹配一段位于 /、? 或 # 之后的 URL。 命中的部分将被作为一个参数</li>
<li>() – 在它内部的内容被认为是可选的</li>
<li><ul>
<li>– 匹配任意字符（非贪婪的）直到命中下一个字符或者整个 URL 的末尾，并创建一个 splat 参数</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">"/hello/:name"</span>&gt;         <span class="comment">// 匹配 /hello/michael 和 /hello/ryan</span></span><br><span class="line">&lt;Route path=<span class="string">"/hello(/:name)"</span>&gt;       <span class="comment">// 匹配 /hello, /hello/michael 和 /hello/ryan</span></span><br><span class="line">&lt;Route path=<span class="string">"/files/*.*"</span>&gt;           <span class="comment">// 匹配 /files/hello.jpg 和 /files/path/to/hello.jpg</span></span><br></pre></td></tr></table></figure>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><ul>
<li>browserHistory<ul>
<li>去掉 URL 地址中的<code>#</code>标记</li>
<li>刷新后无法找到原网页</li>
</ul>
</li>
<li>hashHistory<ul>
<li>兼容低版本的 IE6/7</li>
<li>可直接刷新页面</li>
</ul>
</li>
<li>createMemoryHistory<ul>
<li>服务器渲染</li>
</ul>
</li>
</ul>
<h2 id="默认路由-IndexRoute-与-IndexLink"><a href="#默认路由-IndexRoute-与-IndexLink" class="headerlink" title="默认路由 (IndexRoute) 与 IndexLink"></a>默认路由 (IndexRoute) 与 IndexLink</h2><p>如果你在这个 app 中使用 <code>&lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;</code> , 它会一直处于激活状态，因为所有的 URL 的开头都是 <code>/</code> 。 这确实是个问题，因为我们仅仅希望在 Home 被渲染后，激活并链接到它。</p>
<p>如果需要在 Home 路由被渲染后才激活的指向 <code>/</code> 的链接，请使用 <code>&lt;IndexLink to=&quot;/&quot;&gt;Home&lt;/IndexLink&gt;</code></p>
<h2 id="组件内部跳转"><a href="#组件内部跳转" class="headerlink" title="组件内部跳转"></a>组件内部跳转</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">  router: PropTypes.object</span><br><span class="line">&#125;</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="comment">// 在组件内利用context特性使用代码跳转</span></span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.context.router.push(<span class="string">'/home'</span>)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">  <span class="comment">// service.getMovieListData()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="组件外部跳转"><a href="#组件外部跳转" class="headerlink" title="组件外部跳转"></a>组件外部跳转</h2><p>虽然在组件内部可以使用 <code>this.context.router</code> 来实现导航，但许多应用想要在组件外部使用导航。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;hashHistory&#125; <span class="keyword">from</span> <span class="string">'react-router'</span></span><br><span class="line"><span class="comment">// 在组件外使用hashHistory跳转路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  getMovieListData() &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      hashHistory.push(<span class="string">'/home'</span>)</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="在-React-中使用-CSS"><a href="#在-React-中使用-CSS" class="headerlink" title="在 React 中使用 CSS"></a>在 React 中使用 CSS</h2><p>直接在组件中引入对应的css, 每个组件根标签设置一个独立的class类名</p>
<h3 id="等待效果切换"><a href="#等待效果切换" class="headerlink" title="等待效果切换"></a>等待效果切换</h3><p>使用<code>this.state = {}</code>, 通过修改state的值来切换等待效果</p>
<h2 id="通过代理服务器请求数据"><a href="#通过代理服务器请求数据" class="headerlink" title="通过代理服务器请求数据"></a>通过代理服务器请求数据</h2><p>自己的网页访问自己的代理服务器也存在跨域问题, 只要浏览器与服务器端口号和 ip 不一致就会存在跨域问题</p>
<ul>
<li>fetch<ul>
<li>语法简洁, 更加语义化</li>
<li>未来取代XMLHttpRequest对象</li>
<li>基于标准Promise实现, 支持async/await</li>
<li>同构方便, 使用isomorphic-fetch, 在浏览器及Node中均能使用</li>
</ul>
</li>
</ul>
<h3 id="Promise-实现"><a href="#Promise-实现" class="headerlink" title="Promise 实现"></a>Promise 实现</h3><blockquote>
<p>Promise/A+规范解决异步回调深层嵌套问题<br>Promise/A+规范本质是一种书写格式的改变</p>
</blockquote>
<ul>
<li>Angular: $q 服务</li>
<li>Node: q 模块, co, then</li>
<li>ES6: Promise, yield</li>
<li>ES7: async await</li>
</ul>
<blockquote>
<p>promise有三种状态</p>
</blockquote>
<ul>
<li>Unfulfilled(Pending未完成, 初始状态)</li>
<li>Fulfilled(Resloved已完成)</li>
<li>Failed(Rejected失败, 拒绝)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生成Promise实例</span></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fetch(url).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">            <span class="keyword">return</span> response.json()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">`服务器忙,请稍后再试;\r\nCode:<span class="subst">$&#123;response.status&#125;</span>`</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data)  <span class="comment">// 操作成功</span></span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        reject(err)  <span class="comment">// 操作失败</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// error</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line">promise</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123; <span class="comment">//cb</span></span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// error</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>promise 对象使用时必须通过 then 方法调用改变状态, 上一个 then 里面的输入值就是下一个 then 里面的输出值</p>
<p>一般来说，不要在 then 方法里面定义 Reject 状态的回调函数（即 then 的第二个参数），总是使用 catch 方法</p>
<p>如果 then 的第二个参数存在, 发生错误走 then 的第二个参数, 否则走 catch</p>
<h2 id="渲染电影列表页面"><a href="#渲染电影列表页面" class="headerlink" title="渲染电影列表页面"></a>渲染电影列表页面</h2><h3 id="循环渲染子组件"><a href="#循环渲染子组件" class="headerlink" title="循环渲染子组件"></a>循环渲染子组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环渲染电影列表数据, 使用ref属性获取DIV元素</span></span><br><span class="line">renderMovieList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div ref=&#123;div =&gt; (<span class="keyword">this</span>.theDiv = div)&#125; className=<span class="string">"movieList_container"</span>&gt;</span><br><span class="line">      &#123;<span class="keyword">this</span>.state.movieListData.map(<span class="keyword">this</span>.renderItem)&#125;</span><br><span class="line">      &lt;div className=&#123;<span class="keyword">this</span>.state.isBottom ? <span class="string">'movieList_show'</span> : <span class="string">'movieList_hide'</span>&#125;&gt;正在玩命加载中, 请稍候......&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 电影列表的每个项</span></span><br><span class="line">renderItem = <span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"movieList_item"</span> key=&#123;item.id&#125; onClick=&#123;() =&gt; <span class="keyword">this</span>.goDetail(item.id)&#125;&gt;</span><br><span class="line">      &lt;img src=&#123;item.images.small&#125; alt=<span class="string">""</span>/&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;item.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;span&gt;&#123;item.year&#125;&lt;/</span>span&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="通过-fetch-请求数据"><a href="#通过-fetch-请求数据" class="headerlink" title="通过 fetch 请求数据"></a>通过 fetch 请求数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求数据的方法</span></span><br><span class="line">fetch = <span class="function">(<span class="params">movieType</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 如果电影类型发生改变, 重新设置state</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.state.messages.movieType !== movieType) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">6</span>)</span><br><span class="line">    <span class="comment">// 电影类型改变后, 重新设置movieList_container的滚轮高度, 并清空绑定事件</span></span><br><span class="line">    <span class="keyword">this</span>.theDiv.scrollTop = <span class="number">0</span></span><br><span class="line">    <span class="keyword">this</span>.theDiv.onscroll = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      <span class="comment">// 是否显示加载效果</span></span><br><span class="line">      isLoading: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 是否到底了</span></span><br><span class="line">      isBottom: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// 电影列表数据</span></span><br><span class="line">      movieListData: [],</span><br><span class="line">      <span class="comment">// 向服务器发送的数据都写在message对象中</span></span><br><span class="line">      messages: &#123;</span><br><span class="line">        movieType: movieType,</span><br><span class="line">        count: <span class="number">10</span>,</span><br><span class="line">        start: <span class="number">0</span>,</span><br><span class="line">        pageIndex: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line">  <span class="comment">// ES6深拷贝对象</span></span><br><span class="line">  <span class="keyword">let</span> messages = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.state.messages)</span><br><span class="line">  <span class="keyword">let</span> movieListData = [].concat(<span class="keyword">this</span>.state.movieListData)</span><br><span class="line">  <span class="comment">// 修改分页信息</span></span><br><span class="line">  messages.movieType = movieType</span><br><span class="line">  messages.start = (messages.pageIndex - <span class="number">1</span>) * messages.count</span><br><span class="line">  messages.pageIndex++</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将messages对象转化json字符串格式方便传递参数</span></span><br><span class="line">  <span class="keyword">const</span> message = <span class="built_in">JSON</span>.stringify(messages)</span><br><span class="line">  <span class="comment">// 接收service发送的fetch请求返回的promise对象</span></span><br><span class="line">  <span class="keyword">const</span> promise = service.getMovieListData(message)</span><br><span class="line">  <span class="comment">// 通过promise.then获取resolve的数据</span></span><br><span class="line">  promise.then(</span><br><span class="line">    data =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data)</span><br><span class="line">      <span class="comment">// 如果movieListData中已经有数据, 则进一步追加数据</span></span><br><span class="line">      <span class="keyword">if</span> (movieListData.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        movieListData = movieListData.concat(data.subjects)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        movieListData = data.subjects</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 接收到返回的数据后, 修改state状态</span></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        isLoading: <span class="literal">false</span>,</span><br><span class="line">        isBottom: <span class="literal">false</span>,</span><br><span class="line">        movieListData: movieListData,</span><br><span class="line">        messages: messages</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  ).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="添加-CSS-样式"><a href="#添加-CSS-样式" class="headerlink" title="添加 CSS 样式"></a>添加 CSS 样式</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.movieList_container</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.movieList_item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: -moz-flex;</span><br><span class="line">  <span class="attribute">display</span>: -ms-flex;</span><br><span class="line">  <span class="attribute">display</span>: -o-flex;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.movieList_item</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">5rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">9rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.movieList_item</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-evenly;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.movieList_hide</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.movieList_show</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: lawngreen;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="请求接口改造和对象深拷贝"><a href="#请求接口改造和对象深拷贝" class="headerlink" title="请求接口改造和对象深拷贝"></a>请求接口改造和对象深拷贝</h3><h4 id="请求接口改造"><a href="#请求接口改造" class="headerlink" title="请求接口改造"></a>请求接口改造</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">'../js/config.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 获取电影列表数据</span></span><br><span class="line">  getMovieListData(message) &#123;</span><br><span class="line">    <span class="comment">// console.log(7)</span></span><br><span class="line">    <span class="built_in">console</span>.log(message)</span><br><span class="line">    <span class="comment">// 返回一个Promise对象</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 如果有多个参数, message是对象字符串, 否则message就是参数本身</span></span><br><span class="line">      <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;config.HTTP&#125;</span><span class="subst">$&#123;config.SERVER_PATH&#125;</span>:<span class="subst">$&#123;config.PORT&#125;</span>/api/getMovieListData?message=<span class="subst">$&#123;message&#125;</span>`</span></span><br><span class="line">      <span class="built_in">console</span>.log(url)</span><br><span class="line">      <span class="comment">/*console.log(8)</span></span><br><span class="line"><span class="comment">      setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">        console.log(9)</span></span><br><span class="line"><span class="comment">        reject(new Error('something bad happened'))</span></span><br><span class="line"><span class="comment">      &#125;, 2000)</span></span><br><span class="line"><span class="comment">      console.log(10)*/</span></span><br><span class="line">      fetch(url)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">            <span class="keyword">return</span> response.json()</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">`服务器忙,请稍后再试;\r\nCode:<span class="subst">$&#123;response.status&#125;</span>`</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(data)</span><br><span class="line">          resolve(data)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="对象深拷贝"><a href="#对象深拷贝" class="headerlink" title="对象深拷贝"></a>对象深拷贝</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6深拷贝对象</span></span><br><span class="line"><span class="keyword">let</span> messages = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.state.messages)</span><br><span class="line"><span class="keyword">let</span> movieListData = [].concat(<span class="keyword">this</span>.state.movieListData)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js对象简易深拷贝</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'tom'</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    sex: <span class="string">'男'</span>,</span><br><span class="line">    dog: <span class="string">'jim'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="built_in">JSON</span>.stringify(obj)</span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="built_in">JSON</span>.parse(str)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj1)</span><br><span class="line"><span class="built_in">console</span>.log(obj === obj1)</span><br><span class="line"><span class="built_in">console</span>.log(obj.data === obj1.data)</span><br></pre></td></tr></table></figure>
<h3 id="电影类别切换"><a href="#电影类别切换" class="headerlink" title="电影类别切换"></a>电影类别切换</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">this</span>.fetch(nextProps.params.movieType)</span><br><span class="line">&#125;</span><br><span class="line">componentDidUpdate(prevProps, prevState) &#123;</span><br><span class="line">  <span class="comment">// 根据isLoading判断movieType类型是否发生改变, 然后重新发送url请求</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.state.isLoading) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.state.messages.movieType)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">    <span class="comment">// 将电影列表绑定的onscroll事件清空, 以便再次绑定, 否则会重复绑定</span></span><br><span class="line">    <span class="keyword">this</span>.theDiv.onscroll = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.addEventListener()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="menu-菜单颜色切换"><a href="#menu-菜单颜色切换" class="headerlink" title="menu 菜单颜色切换"></a>menu 菜单颜色切换</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">changeMovieType = <span class="function">(<span class="params">movieType</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    movieType: movieType</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div className=<span class="string">"movie_menu"</span>&gt;</span><br><span class="line">  &lt;Link onClick=&#123;() =&gt; <span class="keyword">this</span>.changeMovieType(<span class="string">'in_theaters'</span>)&#125; className=&#123;<span class="keyword">this</span>.state.movieType === <span class="string">'in_theaters'</span> ? <span class="string">'movie_current'</span> : <span class="string">''</span>&#125; to=<span class="string">"/movieList/in_theaters"</span>&gt;正在热映&lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">  &lt;Link onClick=&#123;() =&gt; this.changeMovieType('coming_soon')&#125; className=&#123;this.state.movieType === 'coming_soon' ? 'movie_current' : ''&#125; to="/m</span>ovieList/coming_soon<span class="string">"&gt;即将上映&lt;/Link&gt;</span></span><br><span class="line"><span class="string">  &lt;Link onClick=&#123;() =&gt; this.changeMovieType('top250')&#125; className=&#123;this.state.movieType === 'top250' ? 'movie_current' : ''&#125; to="</span>/movieList/top250<span class="string">"&gt;Top250&lt;/Link&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="不可变数据结构"><a href="#不可变数据结构" class="headerlink" title="不可变数据结构"></a>不可变数据结构</h3><p>Immutable 与 SImmutable</p>
<h3 id="页面下滑加载更多数据"><a href="#页面下滑加载更多数据" class="headerlink" title="页面下滑加载更多数据"></a>页面下滑加载更多数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为滚动的容器添加滚动监听事件</span></span><br><span class="line">addEventListener = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.theDiv.onscroll = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.target.scrollHeight === e.target.scrollTop + e.target.offsetHeight) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.state.isBottom) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.state.messages.movieType)</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        isBottom: <span class="literal">true</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用户加载数据提示-并且防止多次触发滚动事件"><a href="#用户加载数据提示-并且防止多次触发滚动事件" class="headerlink" title="用户加载数据提示, 并且防止多次触发滚动事件"></a>用户加载数据提示, 并且防止多次触发滚动事件</h3><h4 id="下滑加载数据提示"><a href="#下滑加载数据提示" class="headerlink" title="下滑加载数据提示"></a>下滑加载数据提示</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环渲染电影列表数据, 新添加一个div标签</span></span><br><span class="line">renderMovieList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div ref=&#123;div =&gt; (<span class="keyword">this</span>.theDiv = div)&#125; className=<span class="string">"movieList_container"</span>&gt;</span><br><span class="line">      &#123;<span class="keyword">this</span>.state.movieListData.map(<span class="keyword">this</span>.renderItem)&#125;</span><br><span class="line">      &lt;div className=&#123;<span class="keyword">this</span>.state.isBottom ? <span class="string">'movieList_show'</span> : <span class="string">'movieList_hide'</span>&#125;&gt;正在玩命加载中, 请稍候......&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="防止多次触发滚动事件"><a href="#防止多次触发滚动事件" class="headerlink" title="防止多次触发滚动事件"></a>防止多次触发滚动事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为滚动的容器添加滚动监听事件, 判断是否到底了</span></span><br><span class="line">addEventListener = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.theDiv.onscroll = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.target.scrollHeight === e.target.scrollTop + e.target.offsetHeight) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line">      <span class="comment">// 如果到底了, 直接返回, 防止手贱多次触发滚动事件</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.state.isBottom) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.state.messages.movieType)</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        isBottom: <span class="literal">true</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="切换电影类别时重置数据"><a href="#切换电影类别时重置数据" class="headerlink" title="切换电影类别时重置数据"></a>切换电影类别时重置数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求数据的方法</span></span><br><span class="line">fetch = <span class="function">(<span class="params">movieType</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 如果电影类型发生改变, 重新设置state</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.state.messages.movieType !== movieType) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">6</span>)</span><br><span class="line">    <span class="comment">// 电影类型改变后, 重新设置movieList_container的滚轮高度, 并清空绑定事件</span></span><br><span class="line">    <span class="keyword">this</span>.theDiv.scrollTop = <span class="number">0</span></span><br><span class="line">    <span class="keyword">this</span>.theDiv.onscroll = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      <span class="comment">// 是否显示加载效果</span></span><br><span class="line">      isLoading: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 是否到底了</span></span><br><span class="line">      isBottom: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// 电影列表数据</span></span><br><span class="line">      movieListData: [],</span><br><span class="line">      <span class="comment">// 向服务器发送的数据都写在message对象中</span></span><br><span class="line">      messages: &#123;</span><br><span class="line">        movieType: movieType,</span><br><span class="line">        count: <span class="number">10</span>,</span><br><span class="line">        start: <span class="number">0</span>,</span><br><span class="line">        pageIndex: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="电影详细页面"><a href="#电影详细页面" class="headerlink" title="电影详细页面"></a>电影详细页面</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">'../components/Loading.jsx'</span></span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">'../services/movieListData.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../styles/movieDetail.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieDetailContainer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      <span class="comment">// 是否显示加载效果</span></span><br><span class="line">      isLoading: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 电影详细数据</span></span><br><span class="line">      movieDetailData: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    params: PropTypes.object</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// static contextTypes = &#123;</span></span><br><span class="line">  <span class="comment">//   router: PropTypes.object</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="comment">// 在组件内利用context特性使用代码跳转</span></span><br><span class="line">    <span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   this.context.router.push('/home')</span></span><br><span class="line">    <span class="comment">// &#125;, 3000)</span></span><br><span class="line">    <span class="comment">// service.getMovieListData()</span></span><br><span class="line">    <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.props.params.id)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 请求数据的方法</span></span><br><span class="line">  fetch = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> promise = service.getMovieDetailData(id)</span><br><span class="line">    promise.then(</span><br><span class="line">      data =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          isLoading: <span class="literal">false</span>,</span><br><span class="line">          movieDetailData: data,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    ).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 渲染等待效果</span></span><br><span class="line">  renderLoading = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"movieDetail_container"</span>&gt;</span><br><span class="line">        &lt;Loading/&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 渲染电影详细数据</span></span><br><span class="line"><span class="regexp">  renderMovieDetail = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div className="movieDetail_container"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div className="movieDetail_image"&gt;</span></span><br><span class="line"><span class="regexp">          &lt;img src=&#123;this.state.movieDetailData.images.large&#125; alt=""/</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;h1&gt;&#123;this.state.movieDetailData.title&#125;&lt;/</span>h1&gt;</span><br><span class="line">        &lt;p&gt;&#123;<span class="keyword">this</span>.state.movieDetailData.year&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;p&gt;&#123;this.state.movieDetailData.summary&#125;&lt;/</span>p&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    if (this.state.isLoading) &#123;</span></span><br><span class="line"><span class="regexp">      return this.renderLoading()</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    return this.renderMovieDetail()</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="电影搜索页面"><a href="#电影搜索页面" class="headerlink" title="电影搜索页面"></a>电影搜索页面</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">'../components/Loading.jsx'</span></span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">'../services/movieListData.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../styles/movieList.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieSearchContainer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      <span class="comment">// 是否显示加载效果</span></span><br><span class="line">      isLoading: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 是否到底了</span></span><br><span class="line">      isBottom: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// 电影列表数据</span></span><br><span class="line">      movieListData: [],</span><br><span class="line">      <span class="comment">// 向服务器发送的数据都写在message对象中</span></span><br><span class="line">      messages: &#123;</span><br><span class="line">        keyword: <span class="keyword">this</span>.props.params.keyword,</span><br><span class="line">        count: <span class="number">10</span>,</span><br><span class="line">        start: <span class="number">0</span>,</span><br><span class="line">        pageIndex: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    params: PropTypes.object</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">    router: PropTypes.object</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.state.messages.keyword)</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">    <span class="keyword">this</span>.fetch(nextProps.params.keyword)</span><br><span class="line">  &#125;</span><br><span class="line">  componentDidUpdate(prevProps, prevState) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.isLoading) &#123;</span><br><span class="line">      <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.state.messages.keyword)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.theDiv.onscroll = <span class="literal">null</span></span><br><span class="line">      <span class="keyword">this</span>.addEventListener()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 为滚动的容器添加滚动监听事件</span></span><br><span class="line">  addEventListener = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.theDiv.onscroll = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.target.scrollHeight === e.target.scrollTop + e.target.offsetHeight) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.state.isBottom) &#123;</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.fetch(<span class="keyword">this</span>.state.messages.keyword)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          isBottom: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 请求数据的方法</span></span><br><span class="line">  fetch = <span class="function">(<span class="params">keyword</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 判断搜索的电影是否存在</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.messages.keyword !== keyword) &#123;</span><br><span class="line">      <span class="keyword">this</span>.theDiv.scrollTop = <span class="number">0</span></span><br><span class="line">      <span class="keyword">this</span>.theDiv.onscroll = <span class="literal">null</span></span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        <span class="comment">// 是否显示加载效果</span></span><br><span class="line">        isLoading: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 是否到底了</span></span><br><span class="line">        isBottom: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 电影列表数据</span></span><br><span class="line">        movieListData: [],</span><br><span class="line">        <span class="comment">// 向服务器发送的数据都写在message对象中</span></span><br><span class="line">        messages: &#123;</span><br><span class="line">          keyword: keyword,</span><br><span class="line">          count: <span class="number">10</span>,</span><br><span class="line">          start: <span class="number">0</span>,</span><br><span class="line">          pageIndex: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line">    <span class="comment">// ES6深拷贝对象</span></span><br><span class="line">    <span class="keyword">let</span> messages = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="keyword">this</span>.state.messages)</span><br><span class="line">    <span class="keyword">let</span> movieListData = [].concat(<span class="keyword">this</span>.state.movieListData)</span><br><span class="line">    <span class="comment">// 修改分页信息</span></span><br><span class="line">    messages.keyword = keyword</span><br><span class="line">    messages.start = (messages.pageIndex - <span class="number">1</span>) * messages.count</span><br><span class="line">    messages.pageIndex++</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将messages对象转化json字符串格式方便传递参数</span></span><br><span class="line">    <span class="keyword">const</span> message = <span class="built_in">JSON</span>.stringify(messages)</span><br><span class="line">    <span class="keyword">const</span> promise = service.searchMovieListData(message)</span><br><span class="line">    promise.then(</span><br><span class="line">      data =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="keyword">if</span> (movieListData.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          movieListData = movieListData.concat(data.subjects)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          movieListData = data.subjects</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">          isLoading: <span class="literal">false</span>,</span><br><span class="line">          isBottom: <span class="literal">false</span>,</span><br><span class="line">          movieListData: movieListData,</span><br><span class="line">          messages: messages</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    ).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.error(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 跳转到电影详细页面</span></span><br><span class="line">  goDetail = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.context.router.push(<span class="string">`/movieDetail/<span class="subst">$&#123;id&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 渲染loading效果</span></span><br><span class="line">  renderLoading = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"movieList_container"</span>&gt;</span><br><span class="line">        &lt;Loading/&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ 渲染电影列表每一项, key值与MovieList页面重复报错, 所有添加Math.random()</span></span><br><span class="line"><span class="regexp">  renderItem = (item) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;div className="movieList_item" key=&#123;item.id + Math.random()&#125; onClick=&#123;() =&gt; this.goDetail(item.id)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;img src=&#123;item.images.small&#125; alt=""/</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;h1&gt;&#123;item.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">          &lt;span&gt;&#123;item.year&#125;&lt;/</span>span&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 循环渲染电影列表数据</span></span><br><span class="line">  renderMovieList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div ref=&#123;div =&gt; (<span class="keyword">this</span>.theDiv = div)&#125; className=<span class="string">"movieList_container"</span>&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.movieListData.map(<span class="keyword">this</span>.renderItem)&#125;</span><br><span class="line">        &lt;div className=&#123;<span class="keyword">this</span>.state.isBottom ? <span class="string">'movieList_show'</span> : <span class="string">'movieList_hide'</span>&#125;&gt;正在玩命加载中, 请稍候......&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state.isLoading) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.renderLoading()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.renderMovieList()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="封装-Loading-通用组件"><a href="#封装-Loading-通用组件" class="headerlink" title="封装 Loading 通用组件"></a>封装 Loading 通用组件</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">'react-loading'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./Loading.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ComponentName</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"loading_component"</span>&gt;</span><br><span class="line">        &lt;Loading className=<span class="string">"loading_loading"</span> type=<span class="string">"spin"</span> color=<span class="string">"red"</span>/&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loading_component</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="comment">/* width: 100%; */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loading_loading</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结合-antd-实现表单提交"><a href="#结合-antd-实现表单提交" class="headerlink" title="结合 antd 实现表单提交"></a>结合 antd 实现表单提交</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"><span class="keyword">import</span> &#123; message <span class="keyword">as</span> Message, Form, Input, Tooltip, Icon, Select, Button &#125; <span class="keyword">from</span> <span class="string">'antd'</span></span><br><span class="line"><span class="keyword">import</span> service <span class="keyword">from</span> <span class="string">'../services/aboutService.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../styles/about.scss'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'antd/dist/antd.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> FormItem = Form.Item</span><br><span class="line"><span class="keyword">const</span> Option = Select.Option</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AboutContainer</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    form: PropTypes.object</span><br><span class="line">  &#125;</span><br><span class="line">  handleSubmit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="keyword">this</span>.props.form.validateFieldsAndScroll(<span class="function">(<span class="params">err, values</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.sendFeedback(values)</span><br><span class="line">      <span class="comment">// if (!err) &#123;</span></span><br><span class="line">      <span class="comment">//   console.log('Received values of form: ', values)</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 重置反馈表单</span></span><br><span class="line">  handleReset = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.form.resetFields()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 发送反馈意见</span></span><br><span class="line">  sendFeedback = <span class="function">(<span class="params">message</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> messageObj = <span class="built_in">JSON</span>.stringify(message)</span><br><span class="line">    <span class="keyword">const</span> promise = service.sendFeedback(messageObj)</span><br><span class="line">    promise.then(</span><br><span class="line">      data =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (data.status === <span class="string">'OK'</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.handleReset()</span><br><span class="line">          Message.success(<span class="string">'您的意见反馈我们已经收到, 请耐心等待问题的解决!'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ).catch(</span><br><span class="line">      err =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(err)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; getFieldDecorator &#125; = <span class="keyword">this</span>.props.form</span><br><span class="line">    <span class="keyword">const</span> formItemLayout = &#123;</span><br><span class="line">      labelCol: &#123;</span><br><span class="line">        xs: &#123; <span class="attr">span</span>: <span class="number">24</span> &#125;,</span><br><span class="line">        sm: &#123; <span class="attr">span</span>: <span class="number">6</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      wrapperCol: &#123;</span><br><span class="line">        xs: &#123; <span class="attr">span</span>: <span class="number">24</span> &#125;,</span><br><span class="line">        sm: &#123; <span class="attr">span</span>: <span class="number">14</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> tailFormItemLayout = &#123;</span><br><span class="line">      wrapperCol: &#123;</span><br><span class="line">        xs: &#123;</span><br><span class="line">          span: <span class="number">24</span>,</span><br><span class="line">          offset: <span class="number">0</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        sm: &#123;</span><br><span class="line">          span: <span class="number">14</span>,</span><br><span class="line">          offset: <span class="number">6</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> prefixSelector = getFieldDecorator(<span class="string">'prefix'</span>, &#123;</span><br><span class="line">      initialValue: <span class="string">'86'</span>,</span><br><span class="line">    &#125;)(</span><br><span class="line">      &lt;Select style=&#123;&#123; <span class="attr">width</span>: <span class="number">60</span> &#125;&#125;&gt;</span><br><span class="line">        &lt;Option value=<span class="string">"86"</span>&gt;+<span class="number">86</span>&lt;<span class="regexp">/Option&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Option value="87"&gt;+87&lt;/</span>Option&gt;</span><br><span class="line">      &lt;<span class="regexp">/Select&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;Form onSubmit=&#123;this.handleSubmit&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;FormItem</span></span><br><span class="line"><span class="regexp">          &#123;...formItemLayout&#125;</span></span><br><span class="line"><span class="regexp">          label=&#123;(</span></span><br><span class="line"><span class="regexp">            &lt;span&gt;</span></span><br><span class="line"><span class="regexp">              反馈信息&amp;nbsp;</span></span><br><span class="line"><span class="regexp">              &lt;Tooltip title="What do you want other to call you?"&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Icon type="question-circle-o" /</span>&gt;</span><br><span class="line">              &lt;<span class="regexp">/Tooltip&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>span&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">          hasFeedback</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;getFieldDecorator(<span class="string">'feedback'</span>, &#123;</span><br><span class="line">            rules: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'Please input your feedback!'</span>, <span class="attr">whitespace</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">        &lt;FormItem</span></span><br><span class="line"><span class="regexp">          &#123;...formItemLayout&#125;</span></span><br><span class="line"><span class="regexp">          label="联系电话"</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          &#123;getFieldDecorator('phone', &#123;</span></span><br><span class="line"><span class="regexp">            rules: [&#123; pattern: /^[0-9]&#123;11&#125;$/</span>, <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'Please input your phone number!'</span> &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input addonBefore=&#123;prefixSelector&#125; style=&#123;&#123; <span class="attr">width</span>: <span class="string">'100%'</span> &#125;&#125; /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">        &lt;FormItem</span></span><br><span class="line"><span class="regexp">          &#123;...formItemLayout&#125;</span></span><br><span class="line"><span class="regexp">          label=&#123;(</span></span><br><span class="line"><span class="regexp">            &lt;span&gt;</span></span><br><span class="line"><span class="regexp">              联系姓名&amp;nbsp;</span></span><br><span class="line"><span class="regexp">              &lt;Tooltip title="What do you want other to call you?"&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Icon type="question-circle-o" /</span>&gt;</span><br><span class="line">              &lt;<span class="regexp">/Tooltip&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>span&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">          hasFeedback</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;getFieldDecorator(<span class="string">'name'</span>, &#123;</span><br><span class="line">            rules: [&#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'Please input your name!'</span>, <span class="attr">whitespace</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">          &#125;)(</span><br><span class="line">            &lt;Input /&gt;</span><br><span class="line">          )&#125;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">        &lt;FormItem &#123;...tailFormItemLayout&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;Button type="primary" htmlType="submit"&gt;Register&lt;/</span>Button&gt;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Form&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// antd的Form标准用法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Form.create()(AboutContainer)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">'../js/config.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// fetch的采用post提交发送反馈意见</span></span><br><span class="line">  sendFeedback(message) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(message)</span><br><span class="line">      <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;config.HTTP&#125;</span><span class="subst">$&#123;config.SERVER_PATH&#125;</span>:<span class="subst">$&#123;config.PORT&#125;</span>/api/sendFeedback`</span></span><br><span class="line">      <span class="built_in">console</span>.log(url)</span><br><span class="line">      fetch(url, &#123;</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        body: <span class="string">`message=<span class="subst">$&#123;message&#125;</span>`</span></span><br><span class="line">      &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123; <span class="comment">// promise第一步返回response</span></span><br><span class="line">          <span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">            <span class="keyword">return</span> response.json()</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">`服务器忙,请稍后再试;\r\nCode:<span class="subst">$&#123;response.status&#125;</span>`</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123; <span class="comment">// 第二步通过resolve传递数据到AboutContainer组件中</span></span><br><span class="line">          <span class="built_in">console</span>.log(data)</span><br><span class="line">          resolve(data)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="代码异步加载与部署"><a href="#代码异步加载与部署" class="headerlink" title="代码异步加载与部署"></a>代码异步加载与部署</h2><p>修改路由配置文件, 使用 getComponent 方法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;Router, Route, Redirect, browserHistory, IndexRoute&#125; <span class="keyword">from</span> <span class="string">'react-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> AppContainer <span class="keyword">from</span> <span class="string">'../containers/AppContainer.jsx'</span></span><br><span class="line"><span class="keyword">import</span> HomeContainer <span class="keyword">from</span> <span class="string">'../containers/HomeContainer.jsx'</span></span><br><span class="line"><span class="comment">// 以下组件采用动态按需加载 getComponent</span></span><br><span class="line"><span class="comment">// import MovieContainer from '../containers/MovieContainer.jsx'</span></span><br><span class="line"><span class="comment">// import AboutContainer from '../containers/AboutContainer.jsx'</span></span><br><span class="line"><span class="comment">// import MovieListContainer from '../containers/MovieListContainer.jsx'</span></span><br><span class="line"><span class="comment">// import MovieDetailContainer from '../containers/MovieDetailContainer.jsx'</span></span><br><span class="line"><span class="comment">// import MovieSearchContainer from '../containers/MovieSearchContainer.jsx'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由配置信息IndexRoute表示首次渲染的组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Routers</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Router history=&#123;browserHistory&#125;&gt;</span><br><span class="line">        &lt;Route path=<span class="string">'/'</span> component=&#123;AppContainer&#125;&gt;</span><br><span class="line">          &lt;IndexRoute component=&#123;HomeContainer&#125;/&gt;</span><br><span class="line">          &lt;Route path=<span class="string">'home'</span> component=&#123;HomeContainer&#125;/&gt;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=<span class="string">'movie'</span></span><br><span class="line">            getComponent=&#123;</span><br><span class="line">              (nextState, callback) =&gt; &#123;</span><br><span class="line">                <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                  callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieContainer.jsx'</span>).default)</span><br><span class="line">                &#125;, <span class="string">'movie'</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            onEnter=&#123;() =&gt; <span class="built_in">console</span>.log(<span class="string">'进入了movie路由'</span>)&#125;</span><br><span class="line">            onLeave=&#123;() =&gt; <span class="built_in">console</span>.log(<span class="string">'离开了movie路由'</span>)&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;IndexRoute</span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieListContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieList'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &#123;<span class="comment">/* 绝对路由带有'/',不带'/'的路由基于父组件的路径 */</span>&#125;</span><br><span class="line">            &lt;Route path=<span class="string">'/movieList/:movieType'</span></span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieListContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieList'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Route path=<span class="string">'/movieDetail/:id'</span></span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieDetailContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieDetail'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Route path=<span class="string">'/movieSearch/:keyword'</span></span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieSearchContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieSearch'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &#123;<span class="comment">/* 路由重定向 */</span>&#125;</span><br><span class="line">            &lt;Redirect <span class="keyword">from</span>=<span class="string">'movieList'</span> to=<span class="string">'/movieList'</span>/&gt;</span><br><span class="line">            &lt;Redirect <span class="keyword">from</span>=<span class="string">'movieDetail'</span> to=<span class="string">'/movieDetail'</span>/&gt;</span><br><span class="line">            &lt;Redirect <span class="keyword">from</span>=<span class="string">'movieSearch'</span> to=<span class="string">'/movieSearch'</span>/&gt;</span><br><span class="line">          &lt;<span class="regexp">/Route&gt;</span></span><br><span class="line"><span class="regexp">          &lt;Route path='about'</span></span><br><span class="line"><span class="regexp">            getComponent=&#123;</span></span><br><span class="line"><span class="regexp">              (nextState, callback) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                require.ensure([], require =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                  callback(null, require('../</span>containers/AboutContainer.jsx<span class="string">').default)</span></span><br><span class="line"><span class="string">                &#125;, '</span>about<span class="string">')</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          /&gt;</span></span><br><span class="line"><span class="string">        &lt;/Route&gt;</span></span><br><span class="line"><span class="string">      &lt;/Router&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="部署服务器"><a href="#部署服务器" class="headerlink" title="部署服务器"></a>部署服务器</h3><ol>
<li>使用 FileZila 软件登录自己的服务器</li>
<li>将 webpack2 打包好的生产文件上传到服务器</li>
<li>使用 gitbash 的 <code>ssh root@xxx.xx.x.xx</code> 命令登录服务器</li>
<li>进入上传的生产文件目录, 使用pm2模块启动服务 <code>pm2 start index.js</code></li>
<li>接下来就可以访问服务器地址的指定端口了</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/03/22/React/React开发简易豆瓣App/" data-id="cjvlw5bnu00byxfq3d869xany" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Python/Quick Python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/06/Python/Quick Python/" class="article-date">
  <time datetime="2017-03-06T13:23:17.000Z" itemprop="datePublished">2017-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/06/Python/Quick Python/">Quick Python</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python快速学习"><a href="#Python快速学习" class="headerlink" title="Python快速学习"></a>Python快速学习</h1><p>本文适用于快速学习 Python 常用 API ，是根据<a href="www.yuqiaochuang.com">雨敲窗 Python 快速学习网</a>总结的，在 B 站有对应的<a href="https://www.bilibili.com/video/av5236569/?from=search&amp;seid=6395246975736129821" target="_blank" rel="noopener">学习视频</a>。</p>
<h2 id="Python简单语法"><a href="#Python简单语法" class="headerlink" title="Python简单语法"></a>Python简单语法</h2><h3 id="Python运算符"><a href="#Python运算符" class="headerlink" title="Python运算符"></a>Python运算符</h3><ul>
<li>算术运算符<ul>
<li><code>//</code> =&gt; 地板除(整除，保留整数部分)</li>
</ul>
</li>
<li>逻辑运算符<ul>
<li><code>and</code> &amp; <code>or</code> &amp; <code>not</code></li>
</ul>
</li>
<li>成员运算符<ul>
<li><code>in</code> &amp; <code>not in</code></li>
</ul>
</li>
<li>身份运算符<ul>
<li><code>is</code> =&gt; 两个变量引用自同一个对象则返回True</li>
<li><code>not is</code> =&gt; 两个变量不是引用自同一个对象返回True</li>
</ul>
</li>
</ul>
<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><ul>
<li>print必须带圆括号  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">3</span></span><br><span class="line"><span class="keyword">if</span> a == <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"a == 1"</span>)</span><br><span class="line"><span class="keyword">elif</span> a == <span class="number">2</span>:</span><br><span class="line">    print(<span class="string">"a == 2"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"a != 1 and a != 2"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h3><ul>
<li><p>continue表示不再执行continue下面的if语句，而是直接进行下一轮循环</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list_a = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">'test'</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> list_a:</span><br><span class="line">    print(i)</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">2</span>:</span><br><span class="line">        print(<span class="string">'这是2'</span>)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    print(<span class="string">'~~~'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>break表示不再执行剩余的循环,直接退出本次for循环去执行后面的语句</p>
</li>
</ul>
<h3 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> a != <span class="number">10</span>:</span><br><span class="line">    print(a)</span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line"><span class="comment">#range函数表示[1, 10)之间的整数</span></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        print(a, b)</span><br><span class="line">        <span class="keyword">if</span> b == <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        print(<span class="string">'内循环'</span>)</span><br><span class="line">    print(<span class="string">'外循环'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Python-list-tuple-dict-set"><a href="#Python-list-tuple-dict-set" class="headerlink" title="Python list/tuple/dict/set"></a>Python list/tuple/dict/set</h2><h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><ul>
<li>python内置的一种数据结构</li>
<li>有序</li>
<li>可更改（添加、删除）  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game = [<span class="string">"dota"</span>, <span class="string">"dota2"</span>, <span class="string">"lol"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game</span><br><span class="line">[<span class="string">'dota'</span>, <span class="string">'dota2'</span>, <span class="string">'lol'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取列表长度</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(game)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取元素，如果下标越界会报错</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game[<span class="number">0</span>]</span><br><span class="line"><span class="string">'dota'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game[<span class="number">0</span>] = <span class="string">"dota3"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game</span><br><span class="line">[<span class="string">'dota3'</span>, <span class="string">'dota2'</span>, <span class="string">'lol'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加元素</span></span><br><span class="line"><span class="comment"># 末尾追加</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game.append(<span class="string">"wow"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game[<span class="number">3</span>]</span><br><span class="line"><span class="string">'wow'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定位置插入</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game.insert(<span class="number">2</span>, <span class="string">"war3"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game</span><br><span class="line">[<span class="string">'dota'</span>, <span class="string">'dota2'</span>, <span class="string">'war3'</span>, <span class="string">'lol'</span>, <span class="string">'wow'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除元素</span></span><br><span class="line"><span class="comment"># 删除末尾的元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game.pop()</span><br><span class="line"><span class="string">'wow'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除指定位置元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game.pop(<span class="number">1</span>)</span><br><span class="line"><span class="string">'dota2'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h3><ul>
<li>python 内置的一种数据结构</li>
<li>有序</li>
<li>不可更改</li>
<li>在赋值的时候决定所有元素  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game = (<span class="string">'dota'</span>, <span class="string">'war3'</span>, <span class="string">'lol'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game</span><br><span class="line">(<span class="string">'dota'</span>, <span class="string">'war3'</span>, <span class="string">'lol'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取长度</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(game)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取元素，无法修改，修改会报错</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game[<span class="number">0</span>]</span><br><span class="line"><span class="string">'dota'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h3><ul>
<li>python 内置的一种数据结构</li>
<li>无序</li>
<li>可更改</li>
</ul>
<blockquote>
<p>dict是典型的用空间换时间的例子。会占用大量内存，但是查找、插入速度很快，不会随着元素数量增加而增加。<br>list则是时间换空间的例子，不会占用大量内存，但是随着元素数量增多，查找时间会变很长。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = &#123;<span class="number">1</span>: <span class="string">"alan"</span>, <span class="number">2</span>: <span class="string">"bob"</span>, <span class="number">3</span>: <span class="string">"lucy"</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name[<span class="number">1</span>]</span><br><span class="line"><span class="string">'alan'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找</span></span><br><span class="line">&gt;&gt;&gt;name[<span class="number">1</span>]</span><br><span class="line"><span class="string">'alan'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断key是否在字典中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> <span class="keyword">in</span> name</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以用get方法取，如果key不存在，会返回None或者自己定义的默认值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.get(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.get(<span class="number">5</span>, <span class="string">"default"</span>)</span><br><span class="line"><span class="string">'default'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.pop(<span class="number">1</span>)</span><br><span class="line"><span class="string">'alan'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name</span><br><span class="line">&#123;<span class="number">2</span>: <span class="string">'bob'</span>, <span class="number">3</span>: <span class="string">'lucy'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有key</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.keys()</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.values()</span><br><span class="line">[<span class="string">'bob'</span>, <span class="string">'lucy'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有键值对</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.items()</span><br><span class="line">[(<span class="number">2</span>, <span class="string">'bob'</span>), (<span class="number">3</span>, <span class="string">'lucy'</span>)]</span><br></pre></td></tr></table></figure>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><ul>
<li>python 内置数据结构</li>
<li>无序</li>
<li>可更改</li>
</ul>
<blockquote>
<p>set可以视为没有value的dict，只存key，一般用做去重或者集合求交、求并等。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1 = set([<span class="string">'lucy'</span>, <span class="string">'lily'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_2 = set([<span class="string">'lily'</span>, <span class="string">'anna'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求并、交</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1 &amp; girls_2</span><br><span class="line">set([<span class="string">'lily'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1 | girls_2</span><br><span class="line">set([<span class="string">'lily'</span>, <span class="string">'lucy'</span>, <span class="string">'anna'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1.add(<span class="string">'marry'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1</span><br><span class="line">set([<span class="string">'marry'</span>, <span class="string">'lily'</span>, <span class="string">'lucy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除元素</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1.remove(<span class="string">'lucy'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>girls_1</span><br><span class="line">set([<span class="string">'marry'</span>, <span class="string">'lily'</span>])</span><br></pre></td></tr></table></figure>
<h2 id="Python复制与引用、浅拷贝与深拷贝"><a href="#Python复制与引用、浅拷贝与深拷贝" class="headerlink" title="Python复制与引用、浅拷贝与深拷贝"></a>Python复制与引用、浅拷贝与深拷贝</h2><blockquote>
<p>复制出来的东西和本体是分离的,互不干涉<br>Python中的赋值语句都是引用的(引用地址)</p>
</blockquote>
<h3 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt;&gt;&gt;b = a</span><br><span class="line">&gt;&gt;&gt;b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt;&gt;&gt;a[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">&gt;&gt;&gt;a</span><br><span class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt;&gt;&gt;b</span><br><span class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<h3 id="保持a和b互不干扰"><a href="#保持a和b互不干扰" class="headerlink" title="保持a和b互不干扰"></a>保持a和b互不干扰</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a[::] <span class="comment"># 这里就是复制了一份a</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<h3 id="但是这种只是表层拷贝"><a href="#但是这种只是表层拷贝" class="headerlink" title="但是这种只是表层拷贝"></a>但是这种只是表层拷贝</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a[::]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, [<span class="number">0</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">0</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> copy</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = copy.deepcopy(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, [<span class="number">0</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">2</span></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, [<span class="number">0</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">0</span>, [<span class="number">2</span>, <span class="number">2</span>], <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<h2 id="Python函数"><a href="#Python函数" class="headerlink" title="Python函数"></a>Python函数</h2><ul>
<li><p>定义格式</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 无参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"hello"</span></span><br><span class="line">print_hello()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_str</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> s</span><br><span class="line">    <span class="keyword">return</span> s * <span class="number">2</span></span><br><span class="line">print_str(<span class="string">"fuck"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带默认参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_default</span><span class="params">(s=<span class="string">"hello"</span>)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> s</span><br><span class="line">print_default()</span><br><span class="line">print_default(<span class="string">"default"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不定长参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_args</span><span class="params">(s, *arg)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> s</span><br><span class="line">    <span class="keyword">for</span> a <span class="keyword">in</span> arg:</span><br><span class="line">        <span class="keyword">print</span> a</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">print_args(<span class="string">"hello"</span>)</span><br><span class="line">print_args(<span class="string">"hello"</span>, <span class="string">"world"</span>, <span class="string">"1"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数次序可以变</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_two</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> a,b</span><br><span class="line">print_two(a=<span class="string">"a"</span>, b=<span class="string">"b"</span>)</span><br><span class="line">print_two(b=<span class="string">"b"</span>, a=<span class="string">"a"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>输出结果</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hello</span><br><span class="line">fuck</span><br><span class="line">hello</span><br><span class="line">default</span><br><span class="line">hello</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">1</span><br><span class="line">a b</span><br><span class="line">a b</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add = <span class="keyword">lambda</span> x,y: x + y</span><br><span class="line"><span class="keyword">print</span> add(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Python类"><a href="#Python类" class="headerlink" title="Python类"></a>Python类</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用关键字class去定义一个类，如果没有指定父类，默认继承object类。</span></span><br><span class="line"><span class="comment"># pass表示占位符，不做任何动作，防止语法错误</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="类属性"><a href="#类属性" class="headerlink" title="类属性"></a>类属性</h3><pre><code>class Human(object):
    taisheng = True
</code></pre><h3 id="实例属性"><a href="#实例属性" class="headerlink" title="实例属性"></a>实例属性</h3><ul>
<li>实例属性可以在实例创建后任意时间设置。</li>
<li><p>一般放在构造函数里<strong>init()</strong></p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">human_a = Human(<span class="string">"alan"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Python类实例化不需要关键字new</p>
</li>
<li>直接函数名传参就可以实例化某个类</li>
</ul>
<h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> self.name + <span class="string">" is walking"</span></span><br><span class="line">human_a = Human(<span class="string">"alan"</span>)</span><br><span class="line">human_a.walk()</span><br></pre></td></tr></table></figure>
<p><strong>运行结果:</strong></p>
<p><code>alan is walking</code></p>
<h3 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h3><blockquote>
<p>从上面的例子来看，我们可以在外部随意更改name这个属性，如果不想让外部直接访问到，则在属性名字前加两个下划线__name，这样从外部就无法直接访问了。如果还是想访问，可以再加个get的接口。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">    self.__name = name</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> self.name + <span class="string">" is walking"</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> self.__name</span><br><span class="line">human_a = Human(<span class="string">"alan"</span>)</span><br><span class="line"><span class="keyword">print</span> human_a.get_name()</span><br><span class="line"><span class="keyword">print</span> human_a.__name</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果还是想更改__name字段，可以再加上一个set接口</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">    self.__name = name</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> self.name + <span class="string">" is walking"</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> self.__name</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_name</span><span class="params">(self, name)</span>:</span></span><br><span class="line">    self.__name = name</span><br><span class="line">human_a = Human(<span class="string">"alan"</span>)</span><br><span class="line"><span class="keyword">print</span> human_a.set_name(<span class="string">"bob"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可能有人会有疑问，为何要这么“画蛇添足”呢？其不然，这样会增强代码的健壮性，直接暴漏属性可能会带来意想不到的后果，通过接口的方式可以加以控制，例如，我们可以通过set接口去限定name的长度。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.__name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> self.name + <span class="string">" is walking"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_name</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(name) &lt;= <span class="number">10</span>:</span><br><span class="line">            self.__name = name</span><br><span class="line">human_a = Human(<span class="string">"alan"</span>)</span><br><span class="line"><span class="keyword">print</span> human_a.set_name(<span class="string">"bob"</span>)</span><br><span class="line"><span class="comment"># 这样就不会出现name过长的情况。</span></span><br></pre></td></tr></table></figure>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span><span class="params">(Human)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, has_wife)</span>:</span></span><br><span class="line">    super(Man, self).__init__(name)</span><br><span class="line">    self.__has_wife = has_wife</span><br></pre></td></tr></table></figure>
<p><strong><em>super(Man, self).<strong>init</strong>(name)等价于调用了父类Human的构造函数，就不用再复制粘贴一遍了。</em></strong></p>
<h2 id="Python模块化"><a href="#Python模块化" class="headerlink" title="Python模块化"></a>Python模块化</h2><ul>
<li><p>同文件夹下的py文件可以直接import</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hello.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># run.py</span></span><br><span class="line"><span class="keyword">import</span> hello</span><br><span class="line">hello.print_hello()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者run.py</span></span><br><span class="line"><span class="keyword">from</span> hello <span class="keyword">import</span> print_hello</span><br><span class="line">print_hello()</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果 hello.py 与 run.py 不再同一目录下</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载Python内置sys模块，手动加入路径</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">'/Users/hushiking/hu/course/hello'</span>)</span><br><span class="line"><span class="keyword">import</span> hello</span><br><span class="line">hello.print_hello()</span><br></pre></td></tr></table></figure>
</li>
<li><p>包</p>
</li>
</ul>
<blockquote>
<p>通常一个工程不可能只有一层目录结构，并且也不会一个一个path去append到sys里，常用的做法是包，一个目录及其子目录组成的一个包（可以看做一个库）。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/Users/hushiking/hu/course</span><br><span class="line">├── c.py</span><br><span class="line">├── fn.py</span><br><span class="line">├── for.py</span><br><span class="line">├── hello</span><br><span class="line">│   ├── a.py</span><br><span class="line">│   ├── hello.py</span><br><span class="line">│   ├── hello_b</span><br><span class="line">│   │   └── b.py</span><br><span class="line">│   └── run.py</span><br><span class="line">├── if.py</span><br><span class="line">├── run.py</span><br><span class="line">├── start.py</span><br><span class="line">├── sum.py</span><br><span class="line">└── while.py</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这是一个course文件夹，里面有一个hello文件夹，同时hello中又有一个子文件夹hello_b。</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件a.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_a</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"hello a"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件b.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_b</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"hello b"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件start.py</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">'/Users/hushiking/hu'</span>)</span><br><span class="line"><span class="keyword">from</span> course.hello <span class="keyword">import</span> a</span><br><span class="line"><span class="keyword">from</span> course.hello.hello_b <span class="keyword">import</span> b</span><br><span class="line"><span class="comment"># __name__是指示当前py文件调用方式的方法。如果它等于"__main__"就表示是直接执行，如果不是，则用来被别的文件调用，这个时候if就为False，那么它就不会执行最外层的代码了。</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a.hello_a()</span><br><span class="line">    b.hello_b()</span><br><span class="line"><span class="comment"># 在start.py中要调用hello/a.py和hello/hello_b/b.py，只需要导入course这个包就可以了。</span></span><br></pre></td></tr></table></figure>
<h2 id="Python字符串处理"><a href="#Python字符串处理" class="headerlink" title="Python字符串处理"></a>Python字符串处理</h2><h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">"abc"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"b"</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"bc"</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.find(<span class="string">"xx"</span>)</span><br><span class="line"><span class="number">-1</span></span><br></pre></td></tr></table></figure>
<h3 id="截取"><a href="#截取" class="headerlink" title="截取"></a>截取</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 个人认为这是python最优雅的方法之一</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">"1234567"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line"><span class="string">'345'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s[:<span class="number">5</span>]</span><br><span class="line"><span class="string">'12345'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s[<span class="number">3</span>:]</span><br><span class="line"><span class="string">'4567'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s[<span class="number">3</span>:<span class="number">-1</span>]</span><br><span class="line"><span class="string">'456'</span></span><br></pre></td></tr></table></figure>
<h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 与JavaScript正好相反: s.join(',')</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">","</span>.join(s)</span><br><span class="line"><span class="string">'a,b,c'</span></span><br></pre></td></tr></table></figure>
<h3 id="反转"><a href="#反转" class="headerlink" title="反转"></a>反转</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">"abc"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s[::<span class="number">-1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'cba'</span></span><br></pre></td></tr></table></figure>
<h2 id="Python文件读写"><a href="#Python文件读写" class="headerlink" title="Python文件读写"></a>Python文件读写</h2><h3 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先写一个test.txt文件</span></span><br><span class="line">echo <span class="string">'hello world'</span> &gt; test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># read.py</span></span><br><span class="line">f = open(<span class="string">"test.txt"</span>)</span><br><span class="line">content = f.read()</span><br><span class="line">f.close() <span class="comment"># 一定要close掉</span></span><br><span class="line"><span class="keyword">print</span> content</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通常不调用read接口读取文件，万一文件比内存还大，就崩了；通常调用readlines接口，传入的参数代表文件字节数</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">"test.txt"</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    lines = f.readlines(<span class="number">10000</span>)</span><br><span class="line">    print(lines)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> lines:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        <span class="comment"># 移除字符串头尾指定的字符，默认空格</span></span><br><span class="line">        <span class="keyword">print</span> line.strip()</span><br></pre></td></tr></table></figure>
<h3 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接覆盖</span></span><br><span class="line">f = open(<span class="string">"test.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line">f.writelines([<span class="string">"hhhhhh"</span>, <span class="string">"lllll"</span>])</span><br><span class="line"><span class="comment"># 或者直接 f.write("hhhhhhlllll")</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 追加写文件</span></span><br><span class="line">f = open(<span class="string">"test.txt"</span>, <span class="string">"a"</span>)</span><br><span class="line">f.writelines([<span class="string">"oooooo"</span>, <span class="string">"kkkkk"</span>])</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h2 id="Python动手练习"><a href="#Python动手练习" class="headerlink" title="Python动手练习"></a>Python动手练习</h2><h3 id="输出从1加到100的结果"><a href="#输出从1加到100的结果" class="headerlink" title="输出从1加到100的结果"></a>输出从1加到100的结果</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">total = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">101</span>):</span><br><span class="line">    total += i</span><br><span class="line"><span class="keyword">print</span> total</span><br></pre></td></tr></table></figure>
<h3 id="打出100以内的质数"><a href="#打出100以内的质数" class="headerlink" title="打出100以内的质数"></a>打出100以内的质数</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">judge</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, x):</span><br><span class="line">        <span class="keyword">if</span> x % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">101</span>):</span><br><span class="line">    <span class="keyword">if</span> judge(i):</span><br><span class="line">        <span class="keyword">print</span> i</span><br></pre></td></tr></table></figure>
<h3 id="计算一个文件中每个英文单词出现的次数"><a href="#计算一个文件中每个英文单词出现的次数" class="headerlink" title="计算一个文件中每个英文单词出现的次数"></a>计算一个文件中每个英文单词出现的次数</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">"test.txt"</span>)</span><br><span class="line">lines = f.readlines()</span><br><span class="line">f.close()   <span class="comment"># 别忘记关闭文件流。。。真是反面教材</span></span><br><span class="line">count = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    tokens = line.strip().split(<span class="string">' '</span>)</span><br><span class="line">    <span class="keyword">for</span> token <span class="keyword">in</span> tokens:</span><br><span class="line">        <span class="keyword">if</span> token <span class="keyword">not</span> <span class="keyword">in</span> count:</span><br><span class="line">            count[token] = <span class="number">0</span></span><br><span class="line">        count[token] += <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> count:</span><br><span class="line">    <span class="keyword">print</span> word, count[word]</span><br></pre></td></tr></table></figure>
<h2 id="Python数据结构的队列和栈"><a href="#Python数据结构的队列和栈" class="headerlink" title="Python数据结构的队列和栈"></a>Python数据结构的队列和栈</h2><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><ol>
<li>先进先出</li>
<li>只能从队列末尾插入数据</li>
<li>只能从队列头部取出数据</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.data_list = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_queue</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.data_list = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        self.data_list.append(data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(self.data_list) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        data = self.data_list[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data_list[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">size</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.data_list)</span><br><span class="line">queue = Queue()</span><br><span class="line">print(queue.size())</span><br><span class="line">queue.insert(<span class="number">1</span>)</span><br><span class="line">queue.insert(<span class="number">2</span>)</span><br><span class="line">queue.insert(<span class="number">3</span>)</span><br><span class="line">print(queue.data_list)</span><br><span class="line">head = queue.pop()</span><br><span class="line">print(head)</span><br><span class="line">head = queue.pop()</span><br><span class="line">print(head)</span><br><span class="line">head = queue.pop()</span><br><span class="line">print(head)</span><br><span class="line">head = queue.pop()</span><br><span class="line">print(head)</span><br></pre></td></tr></table></figure>
<p><strong>结果如下:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">[1, 2, 3]</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">None</span><br></pre></td></tr></table></figure>
<h3 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h3><ol>
<li>后进先出</li>
<li>只能从尾部插入数据</li>
<li>只能从尾部取数据。</li>
</ol>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.data_stack = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_stack</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.data_stack = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        self.data_stack.append(data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(self.data_stack) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        data = self.data_stack[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">del</span> self.data_stack[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">size</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.data_stack)</span><br><span class="line">stack = Stack()</span><br><span class="line">stack.insert(<span class="number">1</span>)</span><br><span class="line">stack.insert(<span class="number">2</span>)</span><br><span class="line">stack.insert(<span class="number">3</span>)</span><br><span class="line">print(stack.data_stack)</span><br><span class="line">tail = stack.pop()</span><br><span class="line">print(tail)</span><br><span class="line">tail = stack.pop()</span><br><span class="line">print(tail)</span><br><span class="line">tail = stack.pop()</span><br><span class="line">print(tail)</span><br><span class="line">tail = stack.pop()</span><br><span class="line">print(tail)</span><br></pre></td></tr></table></figure>
<p><strong>结果如下:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3]</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">None</span><br></pre></td></tr></table></figure>
<h2 id="Python【数据结构】树"><a href="#Python【数据结构】树" class="headerlink" title="Python【数据结构】树"></a>Python【数据结构】树</h2><p><a href="http://www.yuqiaochuang.com/article/?article_id=20&amp;category=Python%E6%95%99%E7%A8%8B" target="_blank" rel="noopener">树</a></p>
<h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p><a href="http://www.yuqiaochuang.com/article/?article_id=20&amp;category=Python%E6%95%99%E7%A8%8B" target="_blank" rel="noopener">二叉树</a></p>
<ul>
<li>遍历<ul>
<li>前序遍历（根左右）<ul>
<li>还是以上图为例，前序遍历顺序是：[1, 2, 5, 6, 3, 7, 8, 9]</li>
</ul>
</li>
<li>中序遍历（左根右）<ul>
<li>还是以上图为例，中序遍历顺序是：[5, 2, 6, 1, 8, 7, 9, 3]</li>
</ul>
</li>
<li>后续遍历（左右根）<ul>
<li>还是以上图为例，后序遍历顺序是：[5, 6, 2, 8, 9, 7 ,3, 1]</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, index)</span>:</span></span><br><span class="line">        self.index = index</span><br><span class="line">        self.left_child = <span class="literal">None</span></span><br><span class="line">        self.right_child = <span class="literal">None</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        self.root = root</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pre_travel</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        print(node.index)</span><br><span class="line">        self.pre_travel(node.left_child)</span><br><span class="line">        self.pre_travel(node.right_child)</span><br><span class="line"></span><br><span class="line">node_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    node_dict[i] = Node(i)</span><br><span class="line">node_dict[<span class="number">1</span>].left_child = node_dict[<span class="number">2</span>]</span><br><span class="line">node_dict[<span class="number">1</span>].right_child = node_dict[<span class="number">3</span>]</span><br><span class="line">node_dict[<span class="number">2</span>].left_child = node_dict[<span class="number">5</span>]</span><br><span class="line">node_dict[<span class="number">2</span>].right_child = node_dict[<span class="number">6</span>]</span><br><span class="line">node_dict[<span class="number">3</span>].left_child = node_dict[<span class="number">7</span>]</span><br><span class="line">node_dict[<span class="number">7</span>].left_child = node_dict[<span class="number">8</span>]</span><br><span class="line">node_dict[<span class="number">7</span>].right_child = node_dict[<span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">tree = BinaryTree(node_dict[<span class="number">1</span>])</span><br><span class="line">tree.pre_travel(tree.root)</span><br></pre></td></tr></table></figure>
<p><strong>结果如下:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">3</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td></tr></table></figure>
<h2 id="Python【数据结构】堆"><a href="#Python【数据结构】堆" class="headerlink" title="Python【数据结构】堆"></a>Python【数据结构】堆</h2><ol>
<li>堆是一个二叉树</li>
<li>叶子节点只存在最下面两层。</li>
<li>从根节点到倒数第二层，是一个完全二叉树。</li>
<li>一个节点不可能只有右孩子。</li>
<li>一个节点的左孩子和右孩子都比这个节点大（或者小）(大顶堆或小顶堆)</li>
</ol>
<ul>
<li><p>堆Python代码实现</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Heap</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.data_list = [<span class="literal">None</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">size</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> len(self.data_list) - <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">left_child</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> root * <span class="number">2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">right_child</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> root * <span class="number">2</span> + <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">father</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> node / <span class="number">2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapify</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root &gt; self.size():</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    left_node = self.left_child(root)</span><br><span class="line">    right_node = self.right_child(root)</span><br><span class="line">    largest = root</span><br><span class="line">    <span class="keyword">if</span> left_node &lt;= self.size():</span><br><span class="line">        <span class="keyword">if</span> self.data_list[left_node] &gt; self.data_list[largest]:</span><br><span class="line">            largest = left_node</span><br><span class="line">    <span class="keyword">if</span> right_node &lt;= self.size():</span><br><span class="line">        <span class="keyword">if</span> self.data_list[right_node] &gt; self.data_list[largest]:</span><br><span class="line">            largest = right_node</span><br><span class="line">    <span class="keyword">if</span> largest != root:</span><br><span class="line">        self.data_list[root], self.data_list[largest] = self.data_list[largest], self.data_list[root]</span><br><span class="line">        self.heapify(largest)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_heap</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(self.size()/<span class="number">2</span>, <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">        self.heapify(i)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_max</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> self.size() == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    ret = self.data_list[<span class="number">1</span>]</span><br><span class="line">    self.data_list[<span class="number">1</span>] = self.data_list[<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">del</span> self.data_list[<span class="number">-1</span>]</span><br><span class="line">    self.heapify(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, data)</span>:</span></span><br><span class="line">    self.data_list.append(data)</span><br><span class="line">    now_index = self.size()</span><br><span class="line">    pre = self.father(now_index)</span><br><span class="line">    <span class="keyword">while</span> self.data_list[pre] &lt; data <span class="keyword">and</span> now_index != <span class="number">1</span>:</span><br><span class="line">        self.data_list[pre], self.data_list[now_index] = self.data_list[now_index], self.data_list[pre]</span><br><span class="line">        now_index = pre</span><br><span class="line">        pre = now_index / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">heap = Heap()</span><br><span class="line">heap.insert(<span class="number">9</span>)</span><br><span class="line">heap.insert(<span class="number">10</span>)</span><br><span class="line">heap.insert(<span class="number">7</span>)</span><br><span class="line">heap.insert(<span class="number">12</span>)</span><br><span class="line">heap.insert(<span class="number">3</span>)</span><br><span class="line">heap.insert(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line">heap.insert(<span class="number">10</span>)</span><br><span class="line">heap.insert(<span class="number">9</span>)</span><br><span class="line">heap.insert(<span class="number">8</span>)</span><br><span class="line">heap.insert(<span class="number">7</span>)</span><br><span class="line">heap.insert(<span class="number">7</span>)</span><br><span class="line">heap.insert(<span class="number">12</span>)</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br><span class="line">heap.data_list = [<span class="literal">None</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">heap.build_heap()</span><br><span class="line"><span class="keyword">print</span> heap.get_max()</span><br></pre></td></tr></table></figure>
<p>  <strong>运行结果:</strong></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">12</span><br><span class="line">10</span><br><span class="line">9</span><br><span class="line">7</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">None</span><br><span class="line">12</span><br><span class="line">7</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Python【数据结构】二分查找"><a href="#Python【数据结构】二分查找" class="headerlink" title="Python【数据结构】二分查找"></a>Python【数据结构】二分查找</h2><ul>
<li>要查找的列表必须是按照从小到大排列</li>
<li>例如 search_list = [4, 6, 7, 8, 9]</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span><span class="params">(search_list, target)</span>:</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = len(search_list) - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = int((left + right)/<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> search_list[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> search_list[mid] == target:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">if</span> search_list[mid] &gt; target:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">search_list = [<span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment"># search_list = [9, 8, 7, 6, 4]</span></span><br><span class="line">print(binary_search(search_list, <span class="number">1</span>))</span><br><span class="line">print(binary_search(search_list, <span class="number">6</span>))</span><br><span class="line">print(binary_search(search_list, <span class="number">7</span>))</span><br></pre></td></tr></table></figure>
<p><strong>结果如下:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">None</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h2 id="Python【数据结构】常用排序代码"><a href="#Python【数据结构】常用排序代码" class="headerlink" title="Python【数据结构】常用排序代码"></a>Python【数据结构】常用排序代码</h2><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_sort</span><span class="params">(origin_list)</span>:</span></span><br><span class="line">    sorted_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(origin_list)):</span><br><span class="line">        <span class="comment">#print sorted_list</span></span><br><span class="line">        <span class="keyword">if</span> len(sorted_list) == <span class="number">0</span>:</span><br><span class="line">            sorted_list.append(origin_list[i])</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(sorted_list) - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> sorted_list[j] &lt;= origin_list[i]:</span><br><span class="line">                sorted_list.insert(j + <span class="number">1</span>, origin_list[i])</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> j == <span class="number">0</span>:</span><br><span class="line">                sorted_list.insert(<span class="number">0</span>, origin_list[i])</span><br><span class="line">    <span class="comment">#origin_list[:] = sorted_list[:] #将排序后的列表赋值给原始列表</span></span><br><span class="line">    <span class="keyword">return</span> sorted_list</span><br><span class="line">origin_list = [<span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">8</span>]</span><br><span class="line">sort = insert_sort(origin_list)</span><br><span class="line">print(sort)</span><br></pre></td></tr></table></figure>
<h2 id="Python正则表达式"><a href="#Python正则表达式" class="headerlink" title="Python正则表达式"></a>Python正则表达式</h2><h3 id="几个小例子"><a href="#几个小例子" class="headerlink" title="几个小例子"></a>几个小例子</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">m = re.findall(<span class="string">"abc"</span>, <span class="string">"aaaaabcccabcc"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br><span class="line">m = re.findall(<span class="string">"\d"</span>, <span class="string">"abc1ab2c"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br><span class="line">m = re.findall(<span class="string">"\d\d\d\d"</span>, <span class="string">"123abc1234abc"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br><span class="line">m = re.findall(<span class="string">r"&lt;div&gt;(.*)&lt;/div&gt;"</span>, <span class="string">"&lt;div&gt;hello&lt;/div&gt;"</span>)</span><br><span class="line"><span class="keyword">print</span> m <span class="comment"># 正则表达式字符串前面的r代表raw字符串,里面的所有字符不会被转译</span></span><br><span class="line"><span class="comment"># 贪婪模式（会匹配尽可能多的字符）</span></span><br><span class="line">m = re.findall(<span class="string">r"&lt;div&gt;(.*)&lt;/div&gt;"</span>, <span class="string">"&lt;div&gt;hello&lt;/div&gt;&lt;div&gt;world&lt;/div&gt;"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br><span class="line"><span class="comment"># 非贪婪模式（匹配尽可能少的字符）</span></span><br><span class="line">m = re.findall(<span class="string">r"&lt;div&gt;(.*?)&lt;/div&gt;"</span>, <span class="string">"&lt;div&gt;hello&lt;/div&gt;&lt;div&gt;world&lt;/div&gt;"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br></pre></td></tr></table></figure>
<p><strong>运行结果如下:</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'abc'</span>, <span class="string">'abc'</span>]</span><br><span class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>]</span><br><span class="line">[<span class="string">'1234'</span>]</span><br><span class="line">[<span class="string">'hello'</span>]</span><br><span class="line">[<span class="string">'hello&lt;/div&gt;&lt;div&gt;world'</span>]</span><br><span class="line">[<span class="string">'hello'</span>, <span class="string">'world'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="正则表达式语法"><a href="#正则表达式语法" class="headerlink" title="正则表达式语法"></a>正则表达式语法</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 匹配除了换行符之外的所有字符</span></span><br><span class="line">m = re.findall(<span class="string">"."</span>, <span class="string">"aa\nabbcc"</span>)</span><br><span class="line">print(m) <span class="comment"># ['a', 'a', 'a', 'b', 'b', 'c', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转义字符</span></span><br><span class="line">m = re.findall(<span class="string">"\."</span>, <span class="string">"a.c"</span>)</span><br><span class="line">print(m) <span class="comment"># ['.']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符集</span></span><br><span class="line">m = re.findall(<span class="string">'a[bcd]e'</span>, <span class="string">'abeaceade'</span>)</span><br><span class="line">print(m) <span class="comment"># ['abe', 'ace', 'ade']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数字</span></span><br><span class="line">m = re.findall(<span class="string">"\d"</span>, <span class="string">"abc1ab2c"</span>)</span><br><span class="line">print(m) <span class="comment"># ['1', '2']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 非数字</span></span><br><span class="line">m = re.findall(<span class="string">"\D"</span>, <span class="string">"abc1ab2c"</span>)</span><br><span class="line">print(m) <span class="comment"># ['a', 'b', 'c', 'a', 'b', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配开头和结尾</span></span><br><span class="line">m = re.findall(<span class="string">"^abc"</span>, <span class="string">"abcabc"</span>)</span><br><span class="line">print(m) <span class="comment"># ['abc']</span></span><br><span class="line">m = re.findall(<span class="string">"abc$"</span>, <span class="string">"abcabc"</span>)</span><br><span class="line">print(m) <span class="comment"># ['abc']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配换行</span></span><br><span class="line">s = <span class="string">"&lt;div&gt;hello\nworld&lt;/div&gt;"</span></span><br><span class="line">m = re.findall(<span class="string">r"&lt;div&gt;(.*)&lt;/div&gt;"</span>, s)</span><br><span class="line">print(m) <span class="comment"># []</span></span><br><span class="line">m = re.findall(<span class="string">r"&lt;div&gt;(.*)&lt;/div&gt;"</span>, s, re.S)</span><br><span class="line">print(m) <span class="comment"># ['hello\nworld']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配多行</span></span><br><span class="line">m = re.findall(<span class="string">"^abc"</span>, <span class="string">"abc\nabc"</span>)</span><br><span class="line">print(m) <span class="comment"># ['abc']</span></span><br><span class="line">m = re.findall(<span class="string">"^abc"</span>, <span class="string">"abc\nabc"</span>, re.M)</span><br><span class="line">print(m) <span class="comment"># ['abc', 'abc']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配0个或一个,一个或多个,0个或多个</span></span><br><span class="line">s = <span class="string">"aabbbbabb"</span></span><br><span class="line">m = re.findall(<span class="string">"ab?"</span>, s)</span><br><span class="line">print(m) <span class="comment"># ['a', 'ab', 'ab']</span></span><br><span class="line">m = re.findall(<span class="string">"ab+"</span>, s)</span><br><span class="line">print(m) <span class="comment"># ['abbbb', 'abb']</span></span><br><span class="line">m = re.findall(<span class="string">"ab*"</span>, s)</span><br><span class="line">print(m) <span class="comment"># ['a', 'abbbb', 'abb']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配出来org结尾的邮箱</span></span><br><span class="line">m = re.findall(<span class="string">"\w+@\w+\.org"</span>, <span class="string">"7636874@qq.com;763687@qq.org"</span>)</span><br><span class="line">print(m) <span class="comment"># ['763687@qq.org']</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果是多次调用某个正则，则最好先编译后使用,以免每次调用都需要编译</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p = re.compile(<span class="string">"^abc"</span>)</span><br><span class="line">m = p.findall(<span class="string">"abc\nabc"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br><span class="line">m = p.findall(<span class="string">"abcdef\nfdsfabc"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br><span class="line">m = p.findall(<span class="string">"dabcdef\nefdsfabc"</span>)</span><br><span class="line"><span class="keyword">print</span> m</span><br></pre></td></tr></table></figure>
<h2 id="Python爬虫"><a href="#Python爬虫" class="headerlink" title="Python爬虫"></a>Python爬虫</h2><h3 id="爬取糗事百科段子"><a href="#爬取糗事百科段子" class="headerlink" title="爬取糗事百科段子"></a>爬取糗事百科段子</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> html</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_joke_list</span><span class="params">(page=<span class="number">1</span>)</span>:</span></span><br><span class="line">    url = <span class="string">"http://www.qiushibaike.com/8hr/page/"</span> + str(page)</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="comment"># 获取每个段子div的正则</span></span><br><span class="line">    pattern = re.compile(<span class="string">"&lt;div class=\"article block untagged mb15.*?&lt;div class=\"content\"&gt;.*?&lt;/div&gt;"</span>, re.S)</span><br><span class="line">    <span class="comment"># 把段子内容中的 &lt;br/&gt; 替换成换行</span></span><br><span class="line">    body = html.unescape(res.text).replace(<span class="string">"&lt;br/&gt;"</span>, <span class="string">"\n"</span>)</span><br><span class="line">    m = pattern.findall(body)</span><br><span class="line">    <span class="comment"># 抽取用户名的正则</span></span><br><span class="line">    user_pattern = re.compile(<span class="string">"&lt;div class=\"author clearfix\"&gt;.*?&lt;h2&gt;(.*?)&lt;/h2&gt;"</span>, re.S)</span><br><span class="line">    <span class="comment"># 抽取段子的正则</span></span><br><span class="line">    content_pattern = re.compile(<span class="string">"&lt;div class=\"content\"&gt;(.*?)&lt;/div&gt;"</span>, re.S)</span><br><span class="line">    <span class="keyword">for</span> joke <span class="keyword">in</span> m:</span><br><span class="line">        user = user_pattern.findall(joke)</span><br><span class="line">        output = []</span><br><span class="line">        <span class="keyword">if</span> len(user) &gt; <span class="number">0</span>:</span><br><span class="line">            output.append(user[<span class="number">0</span>])</span><br><span class="line">        content = content_pattern.findall(joke)</span><br><span class="line">        <span class="keyword">if</span> len(content) &gt; <span class="number">0</span>:</span><br><span class="line">            output.append(content[<span class="number">0</span>].replace(<span class="string">"\n"</span>, <span class="string">""</span>))</span><br><span class="line">        print(<span class="string">"\t"</span>.join(output))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># 慎重使用,容易被封IP</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        crawl_joke_list(i)</span><br></pre></td></tr></table></figure>
<h3 id="爬取糗事百科图片"><a href="#爬取糗事百科图片" class="headerlink" title="爬取糗事百科图片"></a>爬取糗事百科图片</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_image</span><span class="params">(image_url, image_local_path)</span>:</span></span><br><span class="line">    r = requests.get(image_url, stream=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">with</span> open(image_local_path, <span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(r.content)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crwal</span><span class="params">(page)</span>:</span></span><br><span class="line">    url = <span class="string">"http://www.qiushibaike.com/imgrank/page/"</span> + str(page)</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    content_list = re.findall(<span class="string">"&lt;div class=\"thumb\"&gt;(.*?)&lt;/div&gt;"</span>, res.content.decode(<span class="string">"utf-8"</span>), re.S)</span><br><span class="line">    <span class="keyword">for</span> content <span class="keyword">in</span> content_list:</span><br><span class="line">        image_list = re.findall(<span class="string">"&lt;img src=\"(.*?)\""</span>, content)</span><br><span class="line">        <span class="keyword">for</span> image_url <span class="keyword">in</span> image_list:</span><br><span class="line">            crawl_image(image_url, <span class="string">"./images/"</span> + image_url.strip().split(<span class="string">'/'</span>)[<span class="number">-1</span>])</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    crwal(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="BeautifulSoup爬取糗事百科段子"><a href="#BeautifulSoup爬取糗事百科段子" class="headerlink" title="BeautifulSoup爬取糗事百科段子"></a>BeautifulSoup爬取糗事百科段子</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> html</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_joke_list_use_bs4</span><span class="params">(page=<span class="number">1</span>)</span>:</span></span><br><span class="line">    url = <span class="string">"http://www.qiushibaike.com/8hr/page/"</span> + str(page)</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    soup = BeautifulSoup(res.text, <span class="string">"html5lib"</span>)</span><br><span class="line">    joke_list = soup.find_all(<span class="string">"div"</span>, class_=<span class="string">"article block untagged mb15"</span>)</span><br><span class="line">    <span class="keyword">for</span> child <span class="keyword">in</span> joke_list:</span><br><span class="line">        print(child.find(<span class="string">"h2"</span>).string + <span class="string">"\t"</span> + <span class="string">""</span>.join(child.find(<span class="string">"div"</span>, class_=<span class="string">"content"</span>).stripped_strings))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># crawl_joke_list_use_bs4(1) 对比使用正则表达式普通爬取</span></span><br><span class="line">    crawl_joke_list(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Python抓取动态网站-百度美食"><a href="#Python抓取动态网站-百度美食" class="headerlink" title="Python抓取动态网站-百度美食"></a>Python抓取动态网站-百度美食</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl</span><span class="params">(page)</span>:</span></span><br><span class="line">    pn = page * <span class="number">8</span></span><br><span class="line">    url = <span class="string">"https://sp0.baidu.com/8aQDcjqpAAV3otqbppnN2DJv/api.php?resource_id=6875&amp;from_mid=1&amp;&amp;format=json&amp;ie=utf-8&amp;oe=utf-8&amp;query=%E7%BE%8E%E9%A3%9F&amp;sort_key=&amp;sort_type=1&amp;stat0=&amp;stat1=&amp;stat2=&amp;stat3=&amp;pn="</span> + str(pn) + <span class="string">"&amp;rn=8&amp;cb=jQuery110200319478991186668_1472651805605&amp;_=1472651805613"</span></span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    json_str_re = re.compile(<span class="string">"&#123;.*&#125;"</span>)</span><br><span class="line">    json_str = json_str_re.search(res.text).group()</span><br><span class="line">    food_dict = json.loads(json_str)</span><br><span class="line">    <span class="keyword">for</span> food <span class="keyword">in</span> food_dict[<span class="string">"data"</span>][<span class="number">0</span>][<span class="string">"disp_data"</span>]:</span><br><span class="line">        print(food[<span class="string">"ename"</span>])</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    crawl(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="爬虫大杀器phantomJS-selenium"><a href="#爬虫大杀器phantomJS-selenium" class="headerlink" title="爬虫大杀器phantomJS+selenium"></a>爬虫大杀器phantomJS+selenium</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line">driver = webdriver.PhantomJS(</span><br><span class="line">    executable_path=<span class="string">'/usr/local/bin/phantomjs'</span>)  <span class="comment"># 浏览器的地址 如果是windows，应该是某个exe地址</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(keyword)</span>:</span></span><br><span class="line">    url_keyword = urllib.parse.quote(keyword)</span><br><span class="line">    url = <span class="string">"http://www.tianyancha.com/search/"</span> + url_keyword + <span class="string">"?checkFrom=searchBox"</span></span><br><span class="line">    print(url)</span><br><span class="line">    driver.get(url)</span><br><span class="line">    bsObj = BeautifulSoup(driver.page_source, <span class="string">"html5lib"</span>)</span><br><span class="line">    print(bsObj)</span><br><span class="line">    company_list = bsObj.find_all(<span class="string">"span"</span>, attrs=&#123;<span class="string">"ng-bind-html"</span>: <span class="string">"node.name | trustHtml"</span>&#125;)</span><br><span class="line">    <span class="keyword">for</span> company <span class="keyword">in</span> company_list:</span><br><span class="line">        print(company.get_text())</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    search(<span class="string">"阿里巴巴 马云"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="爬虫绝配mongodb"><a href="#爬虫绝配mongodb" class="headerlink" title="爬虫绝配mongodb"></a>爬虫绝配mongodb</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MongoAPI</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, db_ip, db_port, db_name, table_name)</span>:</span></span><br><span class="line">        self.db_ip = db_ip</span><br><span class="line">        self.db_port = db_port</span><br><span class="line">        self.db_name = db_name</span><br><span class="line">        self.table_name = table_name</span><br><span class="line">        self.conn = pymongo.MongoClient(host=self.db_ip, port=self.db_port)</span><br><span class="line">        self.db = self.conn[self.db_name]</span><br><span class="line">        self.table = self.db[self.table_name]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_one</span><span class="params">(self, query)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.table.find_one(query, projection=&#123;<span class="string">"_id"</span>: <span class="literal">False</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_all</span><span class="params">(self, query)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.table.find(query)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, kv_dict)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.table.insert(kv_dict)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self, query)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.table.delete_many(query)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_exist</span><span class="params">(self, query)</span>:</span></span><br><span class="line">        ret = self.get(query)</span><br><span class="line">        <span class="keyword">return</span> len(ret) &gt; <span class="number">0</span></span><br><span class="line">    <span class="comment"># 如果没有 会新建</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, query, kv_dict)</span>:</span></span><br><span class="line">        ret = self.table.update_many(</span><br><span class="line">            query,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"$set"</span>: kv_dict,</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ret.matched_count <span class="keyword">or</span> ret.matched_count == <span class="number">0</span>:</span><br><span class="line">            self.add(kv_dict)</span><br><span class="line">        <span class="keyword">elif</span> ret.matched_count <span class="keyword">and</span> ret.matched_count &gt; <span class="number">1</span>:</span><br><span class="line">            self.delete(query)</span><br><span class="line">            self.add(kv_dict)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DBAPITest</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.db_api = MongoAPI(<span class="string">"127.0.0.1"</span>,  <span class="comment"># 图书馆大楼地址</span></span><br><span class="line">                                <span class="number">27017</span>,  <span class="comment"># 图书馆门牌号</span></span><br><span class="line">                                <span class="string">"test"</span>,  <span class="comment"># 一号图书室</span></span><br><span class="line">                                <span class="string">"test_table"</span>)  <span class="comment"># 第一排书架</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line">        db_api = self.db_api</span><br><span class="line">        db_api.add(&#123;<span class="string">"url"</span>: <span class="string">"test_url"</span>, <span class="string">"k"</span>: <span class="string">"v"</span>&#125;)</span><br><span class="line">        self.assertEqual(db_api.get_one(&#123;<span class="string">"url"</span>: <span class="string">"test_url"</span>&#125;)[<span class="string">"k"</span>], <span class="string">"v"</span>)</span><br><span class="line">        db_api.update(&#123;<span class="string">"url"</span>: <span class="string">"test_url"</span>&#125;, &#123;<span class="string">"url_update"</span>: <span class="string">"url_update"</span>&#125;)</span><br><span class="line">        ob = db_api.get_one(&#123;<span class="string">"url"</span>: <span class="string">"test_url"</span>&#125;)</span><br><span class="line">        self.assertEqual(ob[<span class="string">"url_update"</span>], <span class="string">"url_update"</span>)</span><br><span class="line">        db_api.delete(&#123;<span class="string">"url"</span>: <span class="string">"test_url"</span>&#125;)</span><br><span class="line">        self.assertEqual(db_api.get_one(&#123;<span class="string">"url"</span>: <span class="string">"test_url"</span>&#125;), <span class="literal">None</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/03/06/Python/Quick Python/" data-id="cjvlw5bnu00bwxfq3njveo2ki" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-React/React开发环境搭建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/01/React/React开发环境搭建/" class="article-date">
  <time datetime="2017-03-01T12:23:44.000Z" itemprop="datePublished">2017-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/01/React/React开发环境搭建/">babel+eslint+webpack2 搭建 react 开发环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="搭建-React-开发环境"><a href="#搭建-React-开发环境" class="headerlink" title="搭建 React 开发环境"></a>搭建 React 开发环境</h1><p>文章介绍了如何使用 <code>babel+eslint+webpack2</code> 搭建 <code>react</code> 开发环境，详情访问我自己搭建的 React 的 <a href="https://github.com/hushiking/React-init" target="_blank" rel="noopener">github 地址</a>。</p>
<h2 id="npm包-生产依赖–save"><a href="#npm包-生产依赖–save" class="headerlink" title="npm包(生产依赖–save)"></a>npm包(生产依赖–save)</h2><ul>
<li>react</li>
<li>react-dom</li>
</ul>
<h2 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h2><ul>
<li>myReact<ul>
<li>components<ul>
<li>Hello.jsx</li>
</ul>
</li>
<li>images<ul>
<li>demo.jpg</li>
</ul>
</li>
<li>js<ul>
<li>Routers.jsx</li>
</ul>
</li>
<li>styles<ul>
<li>base.scss</li>
<li>hello.scss</li>
</ul>
</li>
<li><code>index.jsx</code></li>
<li><code>index.html</code></li>
<li><code>.babelrc</code></li>
<li><code>.eslintignore</code></li>
<li><code>.eslintrc.js</code></li>
<li><code>package.json</code></li>
<li><code>webpack.develop.config.js</code></li>
</ul>
</li>
</ul>
<h3 id="入口文件-index-jsx"><a href="#入口文件-index-jsx" class="headerlink" title="入口文件 index.jsx"></a>入口文件 <code>index.jsx</code></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>  <span class="comment">// 此处必须引用React, 因为使用了jsx语法, 否则报错 'React' must be in scope when using JSX react/react-in-jsx-scope'</span></span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">'./components/Hello.jsx'</span>  <span class="comment">// 引入自定义Hello组件</span></span><br><span class="line"><span class="comment">// 绑定到html模板指定节点</span></span><br><span class="line">ReactDom.render(</span><br><span class="line">  &lt;Hello/&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="html-模板"><a href="#html-模板" class="headerlink" title="html 模板"></a>html 模板</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>React初探<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定webpack打包后的js文件, 对应webpack配置文件的output属性 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"app.bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Hello组件-Hello-jsx"><a href="#Hello组件-Hello-jsx" class="headerlink" title="Hello组件 Hello.jsx"></a>Hello组件 <code>Hello.jsx</code></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PureRenderMixin <span class="keyword">from</span> <span class="string">'react-addons-pure-render-mixin'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../styles/hello.scss'</span>  <span class="comment">// 导入css文件</span></span><br><span class="line"><span class="comment">// 性能检测：运行程序，在操作之前先运行Perf.start()开启检测，然后进行若干操作，运行Perf.stop()停止检测</span></span><br><span class="line"><span class="comment">// 然后在运行Perf.printWasted()即可打印出浪费性能的组件列表</span></span><br><span class="line"><span class="comment">// 如果每次操作多浪费几毫秒、几十毫秒，没必要深究，如果浪费过多影响了用户体验，就必须去优化它</span></span><br><span class="line"><span class="keyword">import</span> Perf <span class="keyword">from</span> <span class="string">'react-addons-perf'</span></span><br><span class="line"><span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">  <span class="built_in">window</span>.Perf = Perf</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="comment">// React最基本优化方式，组件每次更新之前都要过一遍这个函数，返回true则更新，返回false则不更新</span></span><br><span class="line">    <span class="comment">// 默认情况下，这个函数会一直返回true，也就是说，如果有一些无效的改动触发了这个函数，也会导致无效的更新</span></span><br><span class="line">    <span class="comment">// 最好每个函数都写上这个函数</span></span><br><span class="line">    <span class="keyword">this</span>.shouldComponentUpdate = <span class="function"><span class="params">()</span> =&gt;</span> PureRenderMixin.shouldComponentUpdate</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;Hello, everyone&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;img/</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="css-文件"><a href="#css-文件" class="headerlink" title="css 文件"></a>css 文件</h3><ul>
<li><code>base.scss</code></li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$fontsize</span>: <span class="number">100px</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>hello.scss</code></li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">'base.scss'</span>;  <span class="comment">// 不能忘记写分号, 否则报错 --&gt; Invalid CSS after "p": expected selector or at-rule, was "&#123;"</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$fontsize</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="路由配置文件（Routers-jsx）"><a href="#路由配置文件（Routers-jsx）" class="headerlink" title="路由配置文件（Routers.jsx）"></a>路由配置文件（Routers.jsx）</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123;Router, Route, Redirect, browserHistory, IndexRoute&#125; <span class="keyword">from</span> <span class="string">'react-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> AppContainer <span class="keyword">from</span> <span class="string">'../containers/AppContainer.jsx'</span></span><br><span class="line"><span class="keyword">import</span> HomeContainer <span class="keyword">from</span> <span class="string">'../containers/HomeContainer.jsx'</span></span><br><span class="line"><span class="comment">// 以下组件采用动态按需加载 getComponent</span></span><br><span class="line"><span class="comment">// import MovieContainer from '../containers/MovieContainer.jsx'</span></span><br><span class="line"><span class="comment">// import AboutContainer from '../containers/AboutContainer.jsx'</span></span><br><span class="line"><span class="comment">// import MovieListContainer from '../containers/MovieListContainer.jsx'</span></span><br><span class="line"><span class="comment">// import MovieDetailContainer from '../containers/MovieDetailContainer.jsx'</span></span><br><span class="line"><span class="comment">// import MovieSearchContainer from '../containers/MovieSearchContainer.jsx'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由配置信息IndexRoute表示首次渲染的组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Routers</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Router history=&#123;browserHistory&#125;&gt;</span><br><span class="line">        &lt;Route path=<span class="string">'/'</span> component=&#123;AppContainer&#125;&gt;</span><br><span class="line">          &lt;IndexRoute component=&#123;HomeContainer&#125;/&gt;</span><br><span class="line">          &lt;Route path=<span class="string">'home'</span> component=&#123;HomeContainer&#125;/&gt;</span><br><span class="line">          &lt;Route</span><br><span class="line">            path=<span class="string">'movie'</span></span><br><span class="line">            getComponent=&#123;</span><br><span class="line">              (nextState, callback) =&gt; &#123;</span><br><span class="line">                <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                  callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieContainer.jsx'</span>).default)</span><br><span class="line">                &#125;, <span class="string">'movie'</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            onEnter=&#123;() =&gt; <span class="built_in">console</span>.log(<span class="string">'进入了movie路由'</span>)&#125;</span><br><span class="line">            onLeave=&#123;() =&gt; <span class="built_in">console</span>.log(<span class="string">'离开了movie路由'</span>)&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;IndexRoute</span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieListContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieList'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &#123;<span class="comment">/* 绝对路由带有'/',不带'/'的路由基于父组件的路径 */</span>&#125;</span><br><span class="line">            &lt;Route path=<span class="string">'/movieList/:movieType'</span></span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieListContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieList'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Route path=<span class="string">'/movieDetail/:id'</span></span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieDetailContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieDetail'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;Route path=<span class="string">'/movieSearch/:keyword'</span></span><br><span class="line">              getComponent=&#123;</span><br><span class="line">                (nextState, callback) =&gt; &#123;</span><br><span class="line">                  <span class="built_in">require</span>.ensure([], <span class="built_in">require</span> =&gt; &#123;</span><br><span class="line">                    callback(<span class="literal">null</span>, <span class="built_in">require</span>(<span class="string">'../containers/MovieSearchContainer.jsx'</span>).default)</span><br><span class="line">                  &#125;, <span class="string">'movieSearch'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            /&gt;</span><br><span class="line">            &#123;<span class="comment">/* 路由重定向 */</span>&#125;</span><br><span class="line">            &lt;Redirect <span class="keyword">from</span>=<span class="string">'movieList'</span> to=<span class="string">'/movieList'</span>/&gt;</span><br><span class="line">            &lt;Redirect <span class="keyword">from</span>=<span class="string">'movieDetail'</span> to=<span class="string">'/movieDetail'</span>/&gt;</span><br><span class="line">            &lt;Redirect <span class="keyword">from</span>=<span class="string">'movieSearch'</span> to=<span class="string">'/movieSearch'</span>/&gt;</span><br><span class="line">          &lt;<span class="regexp">/Route&gt;</span></span><br><span class="line"><span class="regexp">          &lt;Route path='about'</span></span><br><span class="line"><span class="regexp">            getComponent=&#123;</span></span><br><span class="line"><span class="regexp">              (nextState, callback) =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                require.ensure([], require =&gt; &#123;</span></span><br><span class="line"><span class="regexp">                  callback(null, require('../</span>containers/AboutContainer.jsx<span class="string">').default)</span></span><br><span class="line"><span class="string">                &#125;, '</span>about<span class="string">')</span></span><br><span class="line"><span class="string">              &#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          /&gt;</span></span><br><span class="line"><span class="string">        &lt;/Route&gt;</span></span><br><span class="line"><span class="string">      &lt;/Router&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h2><h3 id="npm包-开发依赖–save-dev"><a href="#npm包-开发依赖–save-dev" class="headerlink" title="npm包(开发依赖–save-dev)"></a>npm包(开发依赖–save-dev)</h3><ul>
<li>babel-core</li>
<li>babel-loader</li>
<li>babel-preset-es2015</li>
<li>babel-preset-react</li>
<li>babel-preset-stage-0</li>
</ul>
<h3 id="babelrc"><a href="#babelrc" class="headerlink" title=".babelrc"></a><code>.babelrc</code></h3><ul>
<li>配置方式一</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [[<span class="string">"es2015"</span>], [<span class="string">"stage-0"</span>], [<span class="string">"react"</span>]]</span><br><span class="line">&#125;</span><br><span class="line">// 或者</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"es2015"</span>, <span class="string">"stage-0"</span>, <span class="string">"react"</span>]</span><br><span class="line">&#125;</span><br><span class="line">// babel-preset-es2015 被推荐使用 babel-reset-env，即：</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"env"</span>, <span class="string">"stage-0"</span>, <span class="string">"react"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>babel-preset-env</code> 详细配置</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        [<span class="string">"env"</span>, &#123;</span><br><span class="line">            <span class="attr">"targets"</span>: &#123;</span><br><span class="line">                <span class="attr">"browsers"</span>: [<span class="string">"last 2 versions"</span>, <span class="string">"safari &gt;= 7"</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;],</span><br><span class="line">        [<span class="string">"stage-0"</span>],</span><br><span class="line">        [<span class="string">"react"</span>]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>配置方式二<ul>
<li>react-transform支持组件任意组装</li>
<li>react-transform-hmr支持组件热更新（自由拔插）</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [<span class="string">"env"</span>, <span class="string">"stage-0"</span>, <span class="string">"react"</span>],</span><br><span class="line">  <span class="attr">"plugins"</span>: [<span class="string">"transform-runtime"</span>],</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"dev"</span>: &#123;</span><br><span class="line">      <span class="attr">"plugins"</span>: [[</span><br><span class="line">        <span class="string">"react-transform"</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"transforms"</span>: [&#123;</span><br><span class="line">            <span class="attr">"transform"</span>: <span class="string">"react-transform-hmr"</span>,</span><br><span class="line">            <span class="attr">"imports"</span>: [<span class="string">"react"</span>],</span><br><span class="line">            <span class="attr">"locals"</span>: [<span class="string">"module"</span>]</span><br><span class="line">          &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">      ]]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>配置方式三<ul>
<li><code>transform-runtime</code> 以便用在发布 library（库）和 tool（工具函数）中，减少编译重复，创建沙箱环境，避免污染全局环境</li>
<li><code>babel-runtime</code> 转换器插件 (transform-runtime) 一般只用在开发时，而里面的实际垫片 (babel-runtime itself) 的代码在你部署或发布库时都需要。</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"env"</span>,</span><br><span class="line">        <span class="string">"stage-0"</span>,</span><br><span class="line">        <span class="string">"react"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">"transform-runtime"</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"helpers"</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">"polyfill"</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">"regenerator"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">"moduleName"</span>: <span class="string">"babel-runtime"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        [</span><br><span class="line">            <span class="string">"import"</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"libraryName"</span>: <span class="string">"antd"</span>,</span><br><span class="line">                <span class="attr">"style"</span>: <span class="string">"css"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><h3 id="npm包-–save-dev"><a href="#npm包-–save-dev" class="headerlink" title="npm包(–save-dev)"></a>npm包(–save-dev)</h3><ul>
<li>babel-eslint</li>
<li>eslint</li>
<li>eslint-config-standard</li>
<li>eslint-friendly-formatter</li>
<li>eslint-loader</li>
<li>eslint-plugin-html</li>
<li>eslint-plugin-import</li>
<li>eslint-plugin-node</li>
<li>eslint-plugin-promise</li>
<li>eslint-plugin-react</li>
<li>eslint-plugin-standard</li>
</ul>
<h3 id="eslintignore"><a href="#eslintignore" class="headerlink" title=".eslintignore"></a><code>.eslintignore</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br><span class="line">dist</span><br></pre></td></tr></table></figure>
<h3 id="eslintrc-js"><a href="#eslintrc-js" class="headerlink" title=".eslintrc.js"></a><code>.eslintrc.js</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>,   <span class="comment">//  eslint找到这个标识后，不会再去父文件夹中找eslint的配置文件</span></span><br><span class="line">  parser: <span class="string">'babel-eslint'</span>,   <span class="comment">//使用babel-eslint来作为eslint的解析器</span></span><br><span class="line">  parserOptions: &#123;      <span class="comment">// 设置解析器选项</span></span><br><span class="line">    sourceType: <span class="string">'module'</span>,    <span class="comment">// 表明自己的代码是ECMAScript模块</span></span><br><span class="line">    ecmaVersion: <span class="number">6</span>,    <span class="comment">// 可选3 5(默认) 6 7</span></span><br><span class="line">    ecmaFeatures: &#123;</span><br><span class="line">        jsx: <span class="literal">true</span>    <span class="comment">// 支持jsx语法eslint检测</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style</span></span><br><span class="line">  extends: [</span><br><span class="line">    <span class="string">'standard'</span>,  <span class="comment">// 继承eslint-config-standard里面提供的lint规则</span></span><br><span class="line">    <span class="string">'plugin:react/recommended'</span> <span class="comment">// 继承eslint-config-react里面提供的lint规则</span></span><br><span class="line">  ]</span><br><span class="line">  <span class="comment">// required to lint *.vue files</span></span><br><span class="line">  plugins: [    <span class="comment">// 使用的插件eslint-plugin-html. 写配置文件的时候，可以省略eslint-plugin-</span></span><br><span class="line">    <span class="string">'html'</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 启用额外的规则或者覆盖基础配置中的规则的默认选项</span></span><br><span class="line">  rules: &#123;  <span class="comment">// 0表示关闭检测，1表示警告，2表示禁止使用（报错）</span></span><br><span class="line">    <span class="comment">// allow paren-less arrow functions</span></span><br><span class="line">    <span class="comment">// 箭头函数括号规则(0表示关闭)</span></span><br><span class="line">    <span class="string">'arrow-parens'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// allow async-await</span></span><br><span class="line">    <span class="comment">// 是否允许generator函数</span></span><br><span class="line">    <span class="string">'generator-star-spacing'</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// http://eslint.org/docs/rules/comma-dangle</span></span><br><span class="line">    <span class="comment">// 对象或数组元素结尾是否省略逗号</span></span><br><span class="line">    <span class="string">'comma-dangle'</span>: [<span class="string">'error'</span>, <span class="string">'only-multiline'</span>],</span><br><span class="line">    <span class="comment">// 分号检测</span></span><br><span class="line">    <span class="string">'semi'</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  globals: &#123;    <span class="comment">// 声明在代码中自定义的全局变量</span></span><br><span class="line">    <span class="string">'CONFIG'</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  env: &#123;            <span class="comment">// 定义预定义的全局变量,比如browser: true，这样你在代码中可以放心使用宿主环境给你提供的全局变量。</span></span><br><span class="line">    browser: <span class="literal">true</span>, <span class="comment">// browser global variables.</span></span><br><span class="line">    node: <span class="literal">true</span>, <span class="comment">// Node.js global variables and Node.js scoping.</span></span><br><span class="line">    worker: <span class="literal">true</span>, <span class="comment">// web workers global variables.</span></span><br><span class="line">    mocha: <span class="literal">true</span>, <span class="comment">// adds all of the Mocha testing global variables.</span></span><br><span class="line">    phantomjs: <span class="literal">true</span>, <span class="comment">// PhantomJS global variables.</span></span><br><span class="line">    serviceworker: <span class="literal">true</span> <span class="comment">// Service Worker global variables.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="webpack2"><a href="#webpack2" class="headerlink" title="webpack2"></a>webpack2</h2><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><ul>
<li>开发环境： <code>npm start</code><ul>
<li>设置运行环境是<code>dev</code>还是<code>production</code>，windows开发环境下，<code>dev</code>后面不要留空格，否则 set 命令把空格带进环境变量里去 (windows环境)</li>
</ul>
</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"my_react"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.jsx"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"set NODE_ENV=dev&amp;&amp; webpack-dev-server --progress --color"</span>,</span><br><span class="line">    <span class="attr">"dev"</span>: <span class="string">"webpack-dev-server --config webpack.develop.config.js --devtool eval --progress --color --hot --content-base src"</span>,</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"rm -rf ./build &amp;&amp; set NODE_ENV=production&amp;&amp; webpack --config ./webpack.production.js --progress --colors"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"keywords"</span>: [],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"babel-core"</span>: <span class="string">"^6.25.0"</span>,</span><br><span class="line">    <span class="attr">"babel-eslint"</span>: <span class="string">"^7.2.3"</span>,</span><br><span class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^7.1.1"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-react-transform"</span>: <span class="string">"^2.0.2"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-runtime"</span>: <span class="string">"^6.23.0"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-env"</span>: <span class="string">"^1.6.0"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-es2015"</span>: <span class="string">"^6.24.1"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-react"</span>: <span class="string">"^6.24.1"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-stage-0"</span>: <span class="string">"^6.24.1"</span>,</span><br><span class="line">    <span class="attr">"css-loader"</span>: <span class="string">"^0.28.4"</span>,</span><br><span class="line">    <span class="attr">"eslint"</span>: <span class="string">"^4.2.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-config-standard"</span>: <span class="string">"^10.2.1"</span>,</span><br><span class="line">    <span class="attr">"eslint-friendly-formatter"</span>: <span class="string">"^3.0.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-loader"</span>: <span class="string">"^1.9.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-html"</span>: <span class="string">"^3.1.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-import"</span>: <span class="string">"^2.7.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-node"</span>: <span class="string">"^5.1.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-promise"</span>: <span class="string">"^3.5.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-react"</span>: <span class="string">"^7.1.0"</span>,</span><br><span class="line">    <span class="attr">"eslint-plugin-standard"</span>: <span class="string">"^3.0.1"</span>,</span><br><span class="line">    <span class="attr">"file-loader"</span>: <span class="string">"^0.11.2"</span>,</span><br><span class="line">    <span class="attr">"node-sass"</span>: <span class="string">"^4.5.3"</span>,</span><br><span class="line">    <span class="attr">"open-browser-webpack-plugin"</span>: <span class="string">"0.0.5"</span>,</span><br><span class="line">    <span class="attr">"react-addons-perf"</span>: <span class="string">"^15.4.2"</span>,</span><br><span class="line">    <span class="attr">"react-transform-hmr"</span>: <span class="string">"^1.0.4"</span>,</span><br><span class="line">    <span class="attr">"sass-loader"</span>: <span class="string">"^6.0.6"</span>,</span><br><span class="line">    <span class="attr">"style-loader"</span>: <span class="string">"^0.18.2"</span>,</span><br><span class="line">    <span class="attr">"url-loader"</span>: <span class="string">"^0.5.9"</span>,</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^3.2.0"</span>,</span><br><span class="line">    <span class="attr">"webpack-dev-server"</span>: <span class="string">"^2.5.1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"react"</span>: <span class="string">"^15.6.1"</span>,</span><br><span class="line">    <span class="attr">"react-addons-perf"</span>: <span class="string">"^15.4.2"</span>,</span><br><span class="line">    <span class="attr">"react-addons-pure-render-mixin"</span>: <span class="string">"^15.6.0"</span>,</span><br><span class="line">    <span class="attr">"react-dom"</span>: <span class="string">"^15.6.1"</span>,</span><br><span class="line">    <span class="attr">"react-router"</span>: <span class="string">"^3.0.5"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">var</span> OpenBrowserPlugin = <span class="built_in">require</span>(<span class="string">'open-browser-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  context: __dirname + <span class="string">'/src'</span>,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">'./index.jsx'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        enforce: <span class="string">'pre'</span>, <span class="comment">// 在babel-loader对源码进行编译前进行lint的检查</span></span><br><span class="line">        include: <span class="regexp">/src/</span>, <span class="comment">// src文件夹下的文件需要被lint</span></span><br><span class="line">        use: [&#123;</span><br><span class="line">          loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            formatter: <span class="built_in">require</span>(<span class="string">'eslint-friendly-formatter'</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">        <span class="comment">// exclude: /node_modules/ 可以不用定义这个字段的属性值，eslint会自动忽略node_modules和bower_</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        loaders: [</span><br><span class="line">          <span class="string">'babel-loader'</span>,</span><br><span class="line">          <span class="string">'eslint-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        loaders: [</span><br><span class="line">          <span class="string">'style-loader'</span>,</span><br><span class="line">          <span class="string">'css-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        loaders: [</span><br><span class="line">          <span class="string">'style-loader'</span>,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'sass-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">3000</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(eot|woff|ttf|woff2|svg)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">5000</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve:&#123;</span><br><span class="line">    extensions:[<span class="string">'.js'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// html模板插件</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: __dirname + <span class="string">'/src/index.html'</span>  <span class="comment">// 不使用 path.resolve() 方法，字符串路径第一位需要加 斜杠/</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 热加载插件</span></span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">    <span class="comment">// 打开浏览器</span></span><br><span class="line">    <span class="keyword">new</span> OpenBrowserPlugin(&#123;</span><br><span class="line">      url: <span class="string">'http://localhost:8080'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 可在业务js代码中使用__DEV__判断是否是dev模式（dev模式下可以提示错误、测试报告等，production模式不提示）</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      PRODUCTION: <span class="built_in">JSON</span>.stringify(<span class="literal">true</span>),  <span class="comment">// 测试全局变量</span></span><br><span class="line">      __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse((process.env.NODE_ENV == <span class="string">'dev'</span>) || <span class="string">'false'</span>))  <span class="comment">// package.json中set NODE_ENV=dev&amp;&amp;...，dev后面不能留空格，否则set命令会把空格带进环境变量中去</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    historyApiFallback: <span class="literal">true</span>,  <span class="comment">//不跳转，在开发单页应用时非常有用，它依赖于HTML5 history API，如果设置为true，所有的跳转将指向index.html</span></span><br><span class="line">    inline: <span class="literal">true</span>,  <span class="comment">// 实时刷新</span></span><br><span class="line">    hot: <span class="literal">true</span>  <span class="comment">//是否使用热加载插件</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-production-js"><a href="#webpack-production-js" class="headerlink" title="webpack.production.js"></a>webpack.production.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pkg = <span class="built_in">require</span>(<span class="string">'./package.json'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: path.resolve(__dirname, <span class="string">'src/index.jsx'</span>),</span><br><span class="line">    <span class="comment">// 将 第三方依赖（node_modules中的） 单独打包</span></span><br><span class="line">    vendor: <span class="built_in">Object</span>.keys(pkg.dependencies)</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: __dirname + <span class="string">"/build"</span>,</span><br><span class="line">    filename: <span class="string">"js/[name].[chunkhash:8].js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  resolve:&#123;</span><br><span class="line">    extensions:[<span class="string">'.js'</span>, <span class="string">'.jsx'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;<span class="attr">loader</span>: <span class="string">'style-loader'</span>&#125;,</span><br><span class="line">          &#123;<span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              plugins: <span class="function">(<span class="params">loader</span>) =&gt;</span> [</span><br><span class="line">                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)()  <span class="comment">// 调用autoprefixer插件，例如display: flex</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;<span class="attr">loader</span>: <span class="string">'style-loader'</span>&#125;,</span><br><span class="line">          &#123;<span class="attr">loader</span>: <span class="string">'css-loader'</span>&#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              plugins: <span class="function">(<span class="params">loader</span>) =&gt;</span> [</span><br><span class="line">                <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)()</span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;<span class="attr">loader</span>: <span class="string">'less-loader'</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|gif|jpg|jpeg|bmp)$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">5000</span>,</span><br><span class="line">              name: <span class="string">'images/[name].[chunkhash:8].[ext]'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test:<span class="regexp">/\.(png|woff|woff2|svg|ttf|eot)($|\?)/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'url-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: <span class="number">5000</span>,</span><br><span class="line">              name: <span class="string">'fonts/[name].[chunkhash:8].[ext]'</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// webpack 内置的 banner-plugin</span></span><br><span class="line">    <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">"Copyright by hushiking@github.com."</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// html 模板插件</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: __dirname + <span class="string">'/src/index.html'</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义为生产环境，编译 React 时压缩到最小</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      <span class="string">'process.env'</span>:&#123;</span><br><span class="line">        <span class="string">'NODE_ENV'</span>: <span class="built_in">JSON</span>.stringify(process.env.NODE_ENV)  <span class="comment">// package.json中set NODE_ENV=production&amp;&amp;...，production后面不能留空格，否则set命令会把空格带进环境变量中去</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为组件分配ID，通过这个插件webpack可以分析和优先考虑使用最多的模块，并为它们分配最小的ID</span></span><br><span class="line">    <span class="comment">// new webpack.optimize.OccurenceOrderPlugin(),</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">      compress: &#123;</span><br><span class="line">        <span class="comment">//supresses warnings, usually from module minification</span></span><br><span class="line">        warnings: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分离CSS和JS文件</span></span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'/css/[name].[chunkhash:8].css'</span>),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供公共代码</span></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="string">'vendor'</span>,</span><br><span class="line">      filename: <span class="string">'/js/[name].[chunkhash:8].js'</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可在业务 js 代码中使用 __DEV__ 判断是否是dev模式（dev模式下可以提示错误、测试报告等, production模式不提示）</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse((process.env.NODE_ENV == <span class="string">'dev'</span>) || <span class="string">'false'</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/03/01/React/React开发环境搭建/" data-id="cjvlw5bnh00b2xfq3aw77oe60" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Webpack/webpack2开发与生产环境配置文件详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/26/Webpack/webpack2开发与生产环境配置文件详解/" class="article-date">
  <time datetime="2017-02-26T07:34:03.000Z" itemprop="datePublished">2017-02-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/26/Webpack/webpack2开发与生产环境配置文件详解/">Webpack2 开发与生产环境配置文件详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Webpack2-如何配置"><a href="#Webpack2-如何配置" class="headerlink" title="Webpack2 如何配置"></a>Webpack2 如何配置</h1><p><code>Webpack2</code> 开发环境与生产环境配置文件详细说明，具体参见我的这个 <code>TodoList</code> 应用 <a href="https://github.com/hushiking/TodoList/tree/master/React-TodoList_Two" target="_blank" rel="noopener">github 地址</a>里面的 webpack2 配置方式。</p>
<h2 id="package-json-命令"><a href="#package-json-命令" class="headerlink" title="package.json 命令"></a>package.json 命令</h2><p>webpack-dev-server 命令参数似乎不支持 <code>--colors</code> ，支持 <code>--color</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"set NODE_ENV=dev&amp;&amp;webpack-dev-server --devtool eval --progress --colors --content-base src"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"set NODE_ENV=production&amp;&amp;webpack --config webpack.production.js --progress --colors"</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Webpack2-开发环境配置文件"><a href="#Webpack2-开发环境配置文件" class="headerlink" title="Webpack2 开发环境配置文件"></a>Webpack2 开发环境配置文件</h2><p>webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">var</span> OpenBrowserPlugin = <span class="built_in">require</span>(<span class="string">'open-browser-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  context: __dirname + <span class="string">'/src'</span>, <span class="comment">// 开发环境目录</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">'./index.jsx'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        enforce: <span class="string">'pre'</span>, <span class="comment">// 在babel-loader对源码进行编译前进行lint的检查</span></span><br><span class="line">        include: <span class="regexp">/src/</span>, <span class="comment">// src文件夹下的文件需要被lint</span></span><br><span class="line">        use: [&#123;</span><br><span class="line">          loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            formatter: <span class="built_in">require</span>(<span class="string">'eslint-friendly-formatter'</span>) <span class="comment">// 编译后错误报告格式</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">        <span class="comment">// exclude: /node_modules/ 可以不用定义这个字段的属性值，eslint会自动忽略node_modules和bower_components</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        loaders: [</span><br><span class="line">          <span class="string">'babel-loader'</span>,</span><br><span class="line">          <span class="string">'eslint-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        loaders: [</span><br><span class="line">          <span class="string">'style-loader'</span>,</span><br><span class="line">          <span class="string">'css-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="string">'style-loader'</span>,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'sass-loader'</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>,</span><br><span class="line">        loader: <span class="string">'url-loader?limit=25000'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(eot|woff|ttf|woff2|svg)$/</span>,</span><br><span class="line">        loader: <span class="string">'url-loader?limit=50000'</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// 打包完成自动打开浏览器</span></span><br><span class="line">    <span class="keyword">new</span> OpenBrowserPlugin(&#123;<span class="attr">url</span>: <span class="string">'http://localhost:8080/'</span>, <span class="attr">browser</span>: <span class="string">'chrome'</span>&#125;),</span><br><span class="line">    <span class="comment">// 可在业务js代码中使用__DEV__判断是否是dev模式（dev模式下可以提示错误、测试报告等，production模式不提示）</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse((process.env.NODE_ENV == <span class="string">'dev'</span>) || <span class="string">'false'</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Webpack2-生产环境配置文件"><a href="#Webpack2-生产环境配置文件" class="headerlink" title="Webpack2 生产环境配置文件"></a>Webpack2 生产环境配置文件</h2><p>webpack.production.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 项目部署配置文件（在module中抽取CSS时使用clean-css包压缩css）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="comment">// 抽取css第三方插件</span></span><br><span class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// 自动生成index.html页面插件</span></span><br><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"><span class="comment">// 删除文件夹（可以省去，直接在package.json里面设置：windows环境： rd/s/q build）build不能写成./build，windows不识别</span></span><br><span class="line"><span class="keyword">var</span> CleanPlugin = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果需要分别抽取 css 与 less 文件使用下面配置</span></span><br><span class="line"><span class="comment">// css 文件抽取配置项</span></span><br><span class="line"><span class="comment">//var ExtractCSS = new ExtractTextPlugin(&#123;</span></span><br><span class="line"><span class="comment">//  filename: "/css/[name].[contenthash].css",</span></span><br><span class="line"><span class="comment">//  disable: process.env.NODE_ENV === "dev"</span></span><br><span class="line"><span class="comment">//&#125;)</span></span><br><span class="line"><span class="comment">// less文件抽取配置项</span></span><br><span class="line"><span class="comment">//var ExtractLess = new ExtractTextPlugin(&#123;</span></span><br><span class="line"><span class="comment">//  filename: "/css/[name].[contenthash].css",</span></span><br><span class="line"><span class="comment">//  disable: process.env.NODE_ENV === "dev"</span></span><br><span class="line"><span class="comment">//&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: path.resolve(__dirname, <span class="string">'./src/index.jsx'</span>), <span class="comment">// 文件入口</span></span><br><span class="line">    vendor: [<span class="string">'react'</span>, <span class="string">'react-dom'</span>, <span class="string">'react-router'</span>, <span class="string">'react-loading'</span>, <span class="string">'antd'</span>, <span class="string">'react-addons-perf'</span>, <span class="string">'react-addons-pure-render-mixin'</span>] <span class="comment">// 通过CommonsChunkPlugin抽取第三方库</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'./dist'</span>), <span class="comment">// 文件打包输出目录</span></span><br><span class="line">    filename: <span class="string">'js/[name].[chunkhash:8].js'</span>, <span class="comment">// name对应入口的app, 打包为一个整体</span></span><br><span class="line">    <span class="comment">// 为了做代码的异步加载</span></span><br><span class="line">    publicPath: <span class="string">'/'</span>,</span><br><span class="line">    chunkFilename: <span class="string">'[name].[chunkhash:8].js'</span> <span class="comment">// name对应Routers.jsx中异步加载各个组件的名称</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// 处理jsx语法和ES6语法</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>, <span class="comment">// 使用babel-loader加载js语法</span></span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span> <span class="comment">// 必须排除掉node_modules的js文件, 否则报错</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">          fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">          use: [&#123;</span><br><span class="line">            loader: <span class="string">'css-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              minimize: <span class="literal">true</span> <span class="comment">// 压缩抽取的css, 需要安装clean-css包</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;]</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">          fallback: <span class="string">'style-loader'</span>,</span><br><span class="line">          use: [<span class="string">'css-loader'</span>, <span class="string">'sass-loader'</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 1kb=1024b 1b=8bit   25000bit~3kb</span></span><br><span class="line">      <span class="comment">// 如果图片小于25000b, 自动转化为base64格式图片文件, 减少网络请求服务器次数</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|jpeg|gif)$/</span>,</span><br><span class="line">        loader: <span class="string">'url?limit=25000&amp;name=images/[name].[ext]'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(eot|woff|ttf|woff2|svg)$/</span>,</span><br><span class="line">        loader: <span class="string">'url?limit=50000&amp;name=fonts/[name].[ext]'</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    <span class="comment">// 自动扩展文件后缀名，意味着我们require模块可以省略不写后缀名</span></span><br><span class="line">    <span class="comment">// 注意一下, extensions 第一个是空字符串! 对应不需要后缀的情况.</span></span><br><span class="line">    extensions: [<span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.scss'</span>, <span class="string">'.jsx'</span>],</span><br><span class="line">    <span class="comment">// 模块别名定义，方便后续直接引用别名，无须多写长长的地址。后续直接 require('AppStore') 即可</span></span><br><span class="line">    <span class="comment">// alias: &#123;</span></span><br><span class="line">    <span class="comment">//    ReactJS:"node_modules/react/react.min.js",</span></span><br><span class="line">    <span class="comment">//    AppStore: 'js/stores/AppStores.js',</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 在这个属性里面定义的包是不会被打包进bundle.js文件中的,如果你要用这个属性,别忘了在index.html中引入cdn</span></span><br><span class="line">  <span class="comment">// externals: &#123;</span></span><br><span class="line">  <span class="comment">//   // 配置了这个属性之后react和react-dom这些第三方的包都不会被构建进js中，那么我们就需要通过cdn进行文件的引用了</span></span><br><span class="line">  <span class="comment">//   // 前边这个名称是在项目中引用用的，相当于import React from 'react1'中的react，</span></span><br><span class="line">  <span class="comment">//   'react1':"react",</span></span><br><span class="line">  <span class="comment">//   'react-dom1':"react-dom",</span></span><br><span class="line">  <span class="comment">//   '$1':"jQuery"</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// 构建之前先删除dist目录下面的文件夹</span></span><br><span class="line">    <span class="keyword">new</span> CleanPlugin([<span class="string">'./dist'</span>]),</span><br><span class="line">    <span class="comment">// 分离第三方应用插件,name属性会自动指向entry中vendor属性，filename属性中的文件会自动构建到output中的path属性下面</span></span><br><span class="line">    <span class="comment">// webpack 内置的 banner-plugin（为抽取的文件添加版权信息等等）</span></span><br><span class="line">    <span class="keyword">new</span> webpack.BannerPlugin(<span class="string">"Copyright hushiking@github.com."</span>),</span><br><span class="line">    <span class="comment">// 提供公共代码</span></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;<span class="attr">name</span>: <span class="string">'vendor'</span>, <span class="attr">filename</span>: <span class="string">'js/[name].[chunkhash:8].js'</span>&#125;),</span><br><span class="line">    <span class="comment">// 用webpack压缩代码，可以忽略代码中的警告</span></span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">      compress: &#123;</span><br><span class="line">        warnings: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 可以新建多个抽离样式的文件，这样就可以有多个css文件了。</span></span><br><span class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"css/[name].[chunkhash:8].css"</span>), <span class="comment">// name对应入口的app</span></span><br><span class="line">    <span class="comment">// compiling our final assets</span></span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/template.html'</span>, <span class="comment">// html模板路径，HtmlWebpackPlugin自动引入css，js文件</span></span><br><span class="line">      <span class="comment">/*htmlWebpackPlugin: &#123; // 打包后的html文件自动引用css, js文件</span></span><br><span class="line"><span class="comment">        "files": &#123;</span></span><br><span class="line"><span class="comment">          "css": ["[name].[chunkhash:8].css"],</span></span><br><span class="line"><span class="comment">          "js": ["[name].[chunkhash:8].js","[name].[chunkhash:8].js"]</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">      &#125;,*/</span></span><br><span class="line">      <span class="comment">// 效果不大，情怀至上</span></span><br><span class="line">      minify: &#123;</span><br><span class="line">        removeComments: <span class="literal">true</span>,</span><br><span class="line">        collapseWhitespace: <span class="literal">true</span>,</span><br><span class="line">        removeAttributeQuotes: <span class="literal">true</span> <span class="comment">// 移除html属性的引号</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">      <span class="comment">// 根据生产环境去掉react中的警告，react会自己判断，定义生产环境，编译React时压缩到最小</span></span><br><span class="line">      <span class="string">'process.env'</span>: &#123;</span><br><span class="line">          NODE_ENV: <span class="string">'"production"'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/02/26/Webpack/webpack2开发与生产环境配置文件详解/" data-id="cjvlw5bnb00aoxfq32oc2aso0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Python/Python知识点" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/03/Python/Python知识点/" class="article-date">
  <time datetime="2017-01-03T11:55:36.000Z" itemprop="datePublished">2017-01-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/03/Python/Python知识点/">Python 相关</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python学习"><a href="#Python学习" class="headerlink" title="Python学习"></a>Python学习</h1><p>进了一家新公司，后端代码是用 Python 写的，就自己带着学习了一下 Python 语言，总结一些用法，不定时更新……</p>
<h2 id="Python2-和-Python3分别安装pip"><a href="#Python2-和-Python3分别安装pip" class="headerlink" title="Python2 和 Python3分别安装pip"></a>Python2 和 Python3分别安装pip</h2><ul>
<li><code>python -m pip install</code></li>
<li><code>python3 -m pip install</code></li>
</ul>
<h2 id="Python虚拟环境virtualenv"><a href="#Python虚拟环境virtualenv" class="headerlink" title="Python虚拟环境virtualenv"></a>Python虚拟环境virtualenv</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>pip install virtualenv</code></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>选择一个目录,比如我们把这个工程放在 <code>/path/to/project/spider/</code> 目录下,我们在这个目录下建立一个虚拟环境</p>
<p><code>virtualenv /path/to/project/spider</code></p>
<p>虚拟环境就建立好了。此时可以看到，在这个目录下面会有三个目录被建立:</p>
<ul>
<li>bin</li>
<li>include</li>
<li>lib</li>
</ul>
<h3 id="激活虚拟环境"><a href="#激活虚拟环境" class="headerlink" title="激活虚拟环境"></a>激活虚拟环境</h3><p>在上述目录中</p>
<ul>
<li>bin 目录中包含一些在这个虚拟环境中可用的命令，以及开启虚拟环境的脚本 activate；</li>
<li>include 中包含虚拟环境中的头文件，包括 Python 的头文件；</li>
<li>lib 中就是一些依赖库啦~~</li>
</ul>
<p><code>source /path/to/project/spider/bin/activate</code></p>
<h3 id="接下来就可以使用"><a href="#接下来就可以使用" class="headerlink" title="接下来就可以使用"></a>接下来就可以使用</h3><p>安装工程需要的 <code>requests</code> 库</p>
<p><code>pip install requests</code></p>
<h3 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h3><p><code>deactivate</code></p>
<p><strong><em>补充一句，如果想要删除虚拟环境，只要把这个目录下的 bin、include 和 lib 三个目录删掉就好了。</em></strong></p>
<h2 id="Python简单操作"><a href="#Python简单操作" class="headerlink" title="Python简单操作"></a>Python简单操作</h2><h3 id="if-name-quot-main-quot"><a href="#if-name-quot-main-quot" class="headerlink" title="if __name__ == &quot;__main__&quot;"></a><code>if __name__ == &quot;__main__&quot;</code></h3><ul>
<li><strong>表示当.py文件作为主程序时，调用相应的函数</strong></li>
</ul>
<p>如果.py文件被其他文件引入，不执行对应的函数</p>
<h3 id="Python判断数据类型与提示用户输入"><a href="#Python判断数据类型与提示用户输入" class="headerlink" title="Python判断数据类型与提示用户输入"></a>Python判断数据类型与提示用户输入</h3><h4 id="判断数据类型"><a href="#判断数据类型" class="headerlink" title="判断数据类型"></a>判断数据类型</h4><p><code>type(a)</code>与<code>type(a) is str</code>与<code>isinstance(a, int)</code></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">temp = <span class="string">'18'</span></span><br><span class="line">print(type(temp))</span><br><span class="line">print(type(temp) <span class="keyword">is</span> str)</span><br><span class="line">print(isinstance(temp, int))</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></span><br><span class="line"><span class="class"><span class="title">True</span></span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br></pre></td></tr></table></figure>
<h4 id="提示用户输入"><a href="#提示用户输入" class="headerlink" title="提示用户输入"></a>提示用户输入</h4><p>提示用户输入: <code>input(&#39;请输入密码:&#39;)</code>,<strong>用户输入内容均为字符串</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = input(<span class="string">'请输入密码:'</span>)</span><br><span class="line">请输入密码:<span class="number">222222</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'你的密码是%s'</span>%a)</span><br><span class="line">你的密码是<span class="number">222222</span></span><br></pre></td></tr></table></figure>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p><code>//</code>: 取整（地板除）</p>
<p><code>%</code> : 取余</p>
<p><code>and</code>: 相当于js的<code>&amp;&amp;</code></p>
<p><code>or</code>: 相当于js的<code>||</code></p>
<p><code>not</code>: 表示取非</p>
<h3 id="列表操作"><a href="#列表操作" class="headerlink" title="列表操作"></a>列表操作</h3><h4 id="列表推导式-x-for-x-in-args"><a href="#列表推导式-x-for-x-in-args" class="headerlink" title="列表推导式[x for x in args]"></a>列表推导式<code>[x for x in args]</code></h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [x <span class="keyword">for</span> x <span class="keyword">in</span> y]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><p>append</p>
<ul>
<li>直接在list列表后面追加</li>
<li><strong>只能追加一个元素</strong><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">member = [<span class="string">'舞蹈'</span>, <span class="string">'陆远'</span>, <span class="string">'剑无尘'</span>]</span><br><span class="line">member.append(<span class="string">'云峰'</span>) <span class="comment"># ['舞蹈', '陆远', '剑无尘', '云峰']</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>extend</p>
<ul>
<li>追加list列表<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.extend([<span class="string">'沧海'</span>, <span class="string">'傲雪'</span>]) <span class="comment"># ['舞蹈', '陆远', '剑无尘', '云峰', '沧海', '傲雪']</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>insert</p>
<ul>
<li>在列表指定索引位置添加<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.insert(<span class="number">1</span>, <span class="string">'瞻园'</span>) <span class="comment"># ['舞蹈', '瞻园', '陆远', '剑无尘', '云峰', '沧海', '傲雪']</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>remove</p>
<ul>
<li>删除元素(知道元素名称就行),<strong>找不到报错</strong><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.remove(<span class="string">'剑无尘'</span>) <span class="comment"># ['舞蹈', '瞻园', '陆远', '云峰', '沧海', '傲雪']</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>del</p>
<ul>
<li>del(member[1])等价于del member[1]</li>
<li>del member删除整个列表</li>
</ul>
</li>
<li><p>pop</p>
<ul>
<li>不加参数表示从后面删除一个元素</li>
<li>参数表示从指定索引位置删除元素<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.pop(<span class="number">2</span>) <span class="comment"># 删除陆远</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>列表切片(分片)</p>
<ul>
<li>使用冒号获取列表指定位置元素拷贝,原列表不变<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">member[<span class="number">1</span>:<span class="number">3</span>] <span class="comment"># ['瞻园', '云峰']</span></span><br><span class="line">member[:<span class="number">3</span>] <span class="comment"># ['舞蹈', '瞻园', '云峰']</span></span><br><span class="line">member[<span class="number">1</span>:] <span class="comment"># ['瞻园', '云峰', '沧海', '傲雪']</span></span><br><span class="line">member[:] <span class="comment"># ['舞蹈', '瞻园', '云峰', '沧海', '傲雪']</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>列表比较</p>
<ul>
<li>比较列表中的第一个元素,第一个赢了,整个列表就赢了</li>
</ul>
</li>
<li><p>列表相加</p>
<ul>
<li>只有数据类型相同才能相加</li>
<li><strong>原列表不变</strong><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">member + <span class="string">'比利'</span> <span class="comment"># 报错</span></span><br><span class="line">member + [<span class="string">'比利'</span>] <span class="comment"># ['舞蹈', '瞻园', '云峰', '沧海', '傲雪', '比利']</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>列表翻倍</p>
<ul>
<li><strong>原列表不变</strong></li>
<li><code>member * 3</code></li>
<li><code>member *= 2</code></li>
</ul>
</li>
<li><p>成员操作符 <code>in</code> &amp; <code>not in</code></p>
<ul>
<li>适用于一元列表,二元列表里的元素需要list[n]<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'云峰'</span> <span class="keyword">in</span> member <span class="comment"># True</span></span><br><span class="line"><span class="string">'陆云'</span> <span class="keyword">not</span> <span class="keyword">in</span> member <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>列表元素数目统计=&gt;<code>list.count(&#39;123&#39;)</code></p>
</li>
<li>列表元素出现索引位置<ul>
<li><code>list.index(xxx)</code>=&gt;表示从列表起始位置查找,显示第一次找到的索引</li>
<li><code>list.index(xxx, 3, 7)</code>=&gt;表示从指定位置开始查找</li>
<li><strong>找不到会报错</strong></li>
</ul>
</li>
<li>列表排序<ul>
<li><code>list.sort()</code>=&gt;从小到大排序</li>
<li><code>list.sort(reverse=True)</code>=&gt;从大到小排序</li>
</ul>
</li>
<li>列表翻转=&gt;<code>list.reverse()</code></li>
</ul>
<h3 id="元组操作"><a href="#元组操作" class="headerlink" title="元组操作"></a>元组操作</h3><p><strong><em>元组类似于列表,但是其内元素不可改变</em></strong></p>
<ul>
<li>创建元组(逗号是关键)<ul>
<li><code>tuple=(1, 3, 5, 7, 9)</code></li>
<li><code>tuple=()</code>=&gt;空元组</li>
<li><code>tuple=(1)</code>=&gt;整数1</li>
<li><code>tuple=1,</code> || <code>tuple=(1,)</code>=&gt;元组(1)</li>
</ul>
</li>
<li>元组的元素几乎不可以直接删除,可以像列表那样采用切片删除</li>
<li>删除元组<ul>
<li>del tuple</li>
<li>del(tuple)</li>
</ul>
</li>
</ul>
<h3 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h3><ul>
<li>大写与小写–&gt; <a href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=38992&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403" target="_blank" rel="noopener">字符串方法参考网址</a><ul>
<li><code>capitalize()</code> &amp; <code>casefold()</code></li>
</ul>
</li>
<li><code>center(width)</code>=&gt;字符串居中,使用空格填充至长度width的新字符串</li>
<li><code>count(sub[,start[,end]])</code>=&gt;返回sub在字符串里出现的次数</li>
<li><code>encode(encoding=&#39;utf-8&#39;, errors=&#39;strict&#39;)</code></li>
<li><code>endswith(sub[,start[,end]])</code></li>
<li><code>expandtabs([tabsize=8])</code>=&gt;将字符串中的tab符号(\t)转换为空格,默认8个空格</li>
<li><code>find(sub[,start[,end]])</code>=&gt;返回sub在字符串里的索引值,找不到返回-1</li>
<li><code>index(sub[,start[,end]])</code>=&gt;同find,找不到报异常</li>
<li><code>isalnum()</code></li>
<li><code>isalpha()</code></li>
<li><code>isdecimal()</code>=&gt;十进制</li>
<li><code>isdigital()</code>=&gt;数字</li>
<li><code>islower()</code></li>
<li><code>isnumeric()</code></li>
<li><code>isspace()</code></li>
<li><code>istitle()</code></li>
<li><code>isupper()</code></li>
<li><code>join(sub)</code>=&gt;以sub为分隔符插入到字符串中</li>
<li><code>split()</code>=&gt;找到空格就切</li>
<li><code>strip([chars])</code></li>
<li><code>swapcase()</code>=&gt;翻转大小写</li>
<li><code>translate(str.maketrans(&#39;a&#39;, &#39;b&#39;))</code></li>
</ul>
<h3 id="格式化输出-字符串格式化符号"><a href="#格式化输出-字符串格式化符号" class="headerlink" title="格式化输出(字符串格式化符号%)"></a>格式化输出(字符串格式化符号%)</h3><ul>
<li><p>format –&gt; <a href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=39140&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403" target="_blank" rel="noopener">字符串格式化符号含义</a></p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&#123;0&#125; love &#123;1&#125;.&#123;2&#125;"</span>.format(<span class="string">"I"</span>, <span class="string">"FishC"</span>, <span class="string">"com"</span>) <span class="comment"># 'I love FishC.com'</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125;.&#123;c&#125;"</span>.format(a=<span class="string">"I"</span>, b=<span class="string">"FishC"</span>, c=<span class="string">"com"</span>) <span class="comment"># 'I love FishC.com'</span></span><br><span class="line"><span class="string">"&#123;0&#125; love &#123;b&#125;.&#123;c&#125;"</span>.format(<span class="string">"I"</span>, b=<span class="string">"FishC"</span>, c=<span class="string">"com"</span>) <span class="comment"># 'I love FishC.com'</span></span><br><span class="line"><span class="string">"&#123;a&#125; love &#123;b&#125;.&#123;0&#125;"</span>.format(a=<span class="string">"I"</span>, b=<span class="string">"FishC"</span>, <span class="string">"com"</span>) <span class="comment"># 报错</span></span><br><span class="line"><span class="string">"&#123;0:.1f&#125;&#123;1&#125;"</span>.format(<span class="number">27.699</span>, <span class="string">"GB"</span>) <span class="comment"># '27.7GB' # 冒号后面表示格式化的格式</span></span><br><span class="line"><span class="string">"&#123;&#123;0&#125;&#125;"</span>.format(<span class="string">"不打印"</span>) <span class="comment"># '&#123;0&#125;'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>%c (格式化字符及ASCII码)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%a %c %c'</span>%(<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>) <span class="comment"># '97 b c'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>打印整数(%d)和百分号(%%)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"his score is %d%%"</span>%<span class="number">24</span>)</span><br><span class="line">his score <span class="keyword">is</span> <span class="number">24</span>%</span><br></pre></td></tr></table></figure>
</li>
<li><p>打印字符串(%s)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'xiaoming'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"his name is %s"</span>%a)</span><br><span class="line">his name <span class="keyword">is</span> xiaoming</span><br></pre></td></tr></table></figure>
</li>
<li><p>打印浮点数(%f)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"his height is %f m"</span>%<span class="number">1.83</span>)</span><br><span class="line">his height <span class="keyword">is</span> <span class="number">1.830000</span> m</span><br></pre></td></tr></table></figure>
</li>
<li><p>打印浮点数,指定保留小数点位数(%.2f)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"his height is %.2f m"</span>%<span class="number">1.83</span>)</span><br><span class="line">his height <span class="keyword">is</span> <span class="number">1.83</span> m</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定占位符宽度</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"Name:%10s Age:%8d Height:%8.2f"</span>%(<span class="string">"Aviad"</span>,<span class="number">25</span>,<span class="number">1.83</span>))</span><br><span class="line">Name:     Aviad Age:      <span class="number">25</span> Height:    <span class="number">1.83</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>指定占位符宽度(左对齐)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"Name:%-10s Age:%-8d Height:%-8.2f"</span>%(<span class="string">"Aviad"</span>, <span class="number">25</span>, <span class="number">1.83</span>))</span><br><span class="line">Name:Aviad      Age:<span class="number">25</span>       Height:<span class="number">1.83</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>指定占位符(只能用0当占位符?),且字符串无法使用0占位</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> (<span class="string">"Name:%-10s Age:%08d Height:%08.2f"</span>%(<span class="string">"Aviad"</span>,<span class="number">25</span>,<span class="number">1.83</span>))</span><br><span class="line">Name:Aviad      Age:<span class="number">00000025</span> Height:<span class="number">00001.83</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>科学计数法(保留小数点位数科学计数法)</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(<span class="number">0.0015</span>,<span class="string">'.5e'</span>)</span><br><span class="line"><span class="string">'1.50000e-03'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="列表、元组和字符串共同点-可统称为序列"><a href="#列表、元组和字符串共同点-可统称为序列" class="headerlink" title="列表、元组和字符串共同点(可统称为序列)"></a>列表、元组和字符串共同点(可统称为序列)</h3><p>三者统称为<strong><em>序列</em></strong>，下面介绍几个内置函数：</p>
<ul>
<li><code>list([iterable])</code>=&gt;把一个可迭代对象转化为列表</li>
<li><code>tuple([iterable])</code>=&gt;转化为元组</li>
<li><code>str(object)</code>=&gt;把obj对象转化为字符串</li>
<li><code>len()</code> =&gt; 返回序列长度</li>
<li><code>max()</code> =&gt; 返回序列或者参数集合中最大值，同理还有<code>min()</code></li>
<li><code>sum(iterable[,start])</code></li>
<li><code>sorted()</code></li>
<li><code>reversed()</code> =&gt; 返回一个迭代器对象，可使用list转化</li>
<li><code>enumerate()</code> =&gt; 返回一个迭代器对象，可使用list转化</li>
<li><code>zip(a, b)</code> =&gt; 将a与b中元素一一对应拼接为tuple类型，例如<code>list(zip(&#39;123456789&#39;, &#39;56789&#39;))</code></li>
</ul>
<h3 id="字典-dict"><a href="#字典-dict" class="headerlink" title="字典(dict)"></a>字典(dict)</h3><ul>
<li>类似于js的对象，设置本来不存在的键会自动创建</li>
<li><p>dict(mapping) –&gt; a mapping object’s (key, value) pairs</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1 = dict(((<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)))</span><br><span class="line"><span class="comment"># dict接收一个参数,可以将映射转化为字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict2 = dict(([<span class="string">'d'</span>,<span class="number">4</span>], [<span class="string">'e'</span>,<span class="number">5</span>], [<span class="string">'f'</span>,<span class="number">6</span>]))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict2</span><br><span class="line">&#123;<span class="string">'d'</span>: <span class="number">4</span>, <span class="string">'e'</span>: <span class="number">5</span>, <span class="string">'f'</span>: <span class="number">6</span>&#125;</span><br><span class="line"><span class="comment"># 以可迭代对象方式构造字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict3 = dict([[<span class="string">'g'</span>,<span class="number">7</span>],[<span class="string">'h'</span>,<span class="number">8</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict3</span><br><span class="line">&#123;<span class="string">'g'</span>: <span class="number">7</span>, <span class="string">'h'</span>: <span class="number">8</span>&#125;</span><br><span class="line"><span class="comment"># 以函数的可变参数形式(键值对)构造字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict4 = dict(one = <span class="string">'hello'</span>, two = <span class="string">'man'</span> , three = <span class="string">'how are you'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict4</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="string">'hello'</span>, <span class="string">'two'</span>: <span class="string">'man'</span>, <span class="string">'three'</span>: <span class="string">'how are you'</span>&#125;</span><br><span class="line"><span class="comment"># 以映射函数方式构造字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict(zip([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]))</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>json字符串转化为字典</p>
<ul>
<li><p>eval() 或 exec()</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>user</span><br><span class="line"><span class="string">"&#123;'name' : 'jim', 'sex' : 'male', 'age': 18&#125;"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=eval(user)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'name'</span>: <span class="string">'jim'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exec(<span class="string">"c="</span>+user)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">&#123;<span class="string">'age'</span>: <span class="number">18</span>, <span class="string">'name'</span>: <span class="string">'jim'</span>, <span class="string">'sex'</span>: <span class="string">'male'</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>json.loads() –&gt; json字符串转python字典</p>
</li>
<li>json.dumps() –&gt; python对象转json字符串</li>
</ul>
</li>
</ul>
<h4 id="字典常用方法"><a href="#字典常用方法" class="headerlink" title="字典常用方法"></a>字典常用方法</h4><ul>
<li>fromkeys</li>
<li>keys/values/items</li>
<li>get</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fromkeys(iterable, value=None)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict.fromkeys((<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>))</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="literal">None</span>, <span class="string">'b'</span>: <span class="literal">None</span>, <span class="string">'c'</span>: <span class="literal">None</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict.fromkeys((<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'three'</span>), <span class="string">'school'</span>)</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="string">'school'</span>, <span class="string">'two'</span>: <span class="string">'school'</span>, <span class="string">'three'</span>: <span class="string">'school'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1 = dict.fromkeys(range(<span class="number">10</span>), <span class="string">'赞'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;<span class="number">0</span>: <span class="string">'赞'</span>, <span class="number">1</span>: <span class="string">'赞'</span>, <span class="number">2</span>: <span class="string">'赞'</span>, <span class="number">3</span>: <span class="string">'赞'</span>, <span class="number">4</span>: <span class="string">'赞'</span>, <span class="number">5</span>: <span class="string">'赞'</span>, <span class="number">6</span>: <span class="string">'赞'</span>, <span class="number">7</span>: <span class="string">'赞'</span>, <span class="number">8</span>: <span class="string">'赞'</span>, <span class="number">9</span>: <span class="string">'赞'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># fromkeys修改字典会返回新的字典,不影响原有字典</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="number">1</span>, <span class="number">3</span>), <span class="string">'不攒'</span>)</span><br><span class="line">&#123;<span class="number">1</span>: <span class="string">'不攒'</span>, <span class="number">3</span>: <span class="string">'不攒'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> dict1.keys():</span><br><span class="line"><span class="meta">... </span>    print(key)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> value <span class="keyword">in</span> dict1.values():</span><br><span class="line"><span class="meta">... </span> print(value)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> dict1.items():</span><br><span class="line"><span class="meta">... </span> print(item)</span><br><span class="line">...</span><br><span class="line">(<span class="number">0</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">4</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">5</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">6</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">7</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">8</span>, <span class="string">'赞'</span>)</span><br><span class="line">(<span class="number">9</span>, <span class="string">'赞'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1[<span class="number">9</span>]</span><br><span class="line"><span class="string">'赞'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1[<span class="number">10</span>] <span class="comment"># 报错keyError</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.get(<span class="number">9</span>)</span><br><span class="line"><span class="string">'赞'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(dict1.get(<span class="number">10</span>)) <span class="comment"># 找不到索引是返回None</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.get(<span class="number">10</span>, <span class="string">'找不到'</span>) <span class="comment"># 也可以自己设置'找不到'作为返回值</span></span><br><span class="line"><span class="string">'找不到'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>清空字典 clear</li>
<li>浅拷贝 copy</li>
<li>弹出指定值 pop(key)</li>
<li><p>弹出最后一个值 popitem</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1 = &#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.clear()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浅拷贝内存地址发生了变化,a与c相同,指向同一内存地址,b不同于a和c</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a.copy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)</span><br><span class="line"><span class="number">4329539984</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(b)</span><br><span class="line"><span class="number">4329538328</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改c,a会跟着变化,b不变</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c[<span class="string">"four"</span>] = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>, <span class="string">'four'</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>, <span class="string">'four'</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 弹出指定值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.pop(<span class="string">'three'</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'four'</span>: <span class="number">4</span>&#125;</span><br><span class="line"><span class="comment"># 弹出最后一项</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.popitem()</span><br><span class="line">(<span class="string">'four'</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>setdefault –&gt; 设置默认值</p>
</li>
<li>update(dict) –&gt; 更新字典值  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.setdefault(<span class="string">'小白'</span>, <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'小白'</span>: <span class="number">6</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c.setdefault(<span class="string">'红豆'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'小白'</span>: <span class="number">6</span>, <span class="string">'红豆'</span>: <span class="literal">None</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.update(&#123;<span class="string">'小白'</span>: <span class="string">'够'</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'小白'</span>: <span class="string">'够'</span>, <span class="string">'红豆'</span>: <span class="literal">None</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="集合-set"><a href="#集合-set" class="headerlink" title="集合(set)"></a>集合(set)</h3><ul>
<li><p>集合内元素唯一，利用该性质可以给list(列表)去重</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 利用集合唯一性去重</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>new_num = list(set(num))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>new_num</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通方法去重</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>temp = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> num:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> item <span class="keyword">not</span> <span class="keyword">in</span> temp:</span><br><span class="line"><span class="meta">... </span>        temp.append(item)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>temp</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">0</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>集合类型内建方法–&gt; <a href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45276&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403" target="_blank" rel="noopener">参考网址</a></p>
<ul>
<li><code>add</code></li>
<li><code>remove(如果删除对象不存在,报错)</code></li>
<li><code>discard(删除对象不存在没事)</code></li>
<li><code>pop, clear</code></li>
</ul>
</li>
<li>不可变集合  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>alpha = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alpha.add(<span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>alpha</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>beta = frozenset(&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>beta.add(<span class="number">10</span>) <span class="comment"># 报错，frozenset没有add方法</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p><code>for xx in aaa:</code>: 遍历aaa</p>
<p><code>range([start,] stop[, step=1])</code>: 内置函数，range[2,5]表示从2到5的整数，不包括5</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(range(<span class="number">5</span>)) <span class="comment"># [0, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h3 id="Python导入模块与包"><a href="#Python导入模块与包" class="headerlink" title="Python导入模块与包"></a>Python导入模块与包</h3><h4 id="导入模块"><a href="#导入模块" class="headerlink" title="导入模块"></a>导入模块</h4><ol>
<li>import 模块名</li>
<li>form 模块名 import 函数名</li>
<li>import 模块名 as 新名字</li>
</ol>
<h4 id="搜索路径"><a href="#搜索路径" class="headerlink" title="搜索路径"></a>搜索路径</h4><p>原始python包搜索路径如下:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.path</span><br><span class="line">[<span class="string">''</span>, <span class="string">'/usr/local/Cellar/python3/3.6.1/Frameworks/Python.framework/Versions/3.6/lib/python36.zip'</span>,</span><br><span class="line"><span class="string">'/usr/local/Cellar/python3/3.6.1/Frameworks/Python.framework/Versions/3.6/lib/python3.6'</span>,</span><br><span class="line"><span class="string">'/usr/local/Cellar/python3/3.6.1/Frameworks/Python.framework/Versions/3.6/lib/python3.6/lib-dynload'</span>,</span><br><span class="line"><span class="string">'/usr/local/lib/python3.6/site-packages'</span>]</span><br></pre></td></tr></table></figure>
<p>搜索包的路径可以增加, 例如</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sys.path.append(<span class="string">'/usr/local/add'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h4><p><strong><em>.代表当前目录，..代表上一层目录，…代表上上层目录。</em></strong></p>
<p>例如：在模块A.B.C中的代码:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> D     <span class="comment"># 导入A.B.D</span></span><br><span class="line"><span class="keyword">from</span> .. <span class="keyword">import</span> E    <span class="comment"># 导入A.E</span></span><br><span class="line"><span class="keyword">from</span> ..F <span class="keyword">import</span> G   <span class="comment"># 导入A.F.G，.. 和 F是连着的，中间没有空格</span></span><br></pre></td></tr></table></figure>
<h3 id="Python内建函数-BIF-build-in-function-与模块"><a href="#Python内建函数-BIF-build-in-function-与模块" class="headerlink" title="Python内建函数(BIF: build in function)与模块"></a>Python内建函数(BIF: build in function)与模块</h3><ul>
<li><code>range(1, 10)</code><ul>
<li><code>for i in range(1, 10)</code>：表示i从1循环到9, 不包括10</li>
</ul>
</li>
<li><code>issubclass(B, A)</code> –&gt; B是否是A的子类 ==&gt; 自身是自身的子类<code>issubclass(B, B)</code> –&gt;True<ul>
<li>第二个参数可以接收元组</li>
</ul>
</li>
<li><code>isinstance(B, A)</code> –&gt; B是否是A的实例对象<ul>
<li>第二个参数可以接收元组</li>
</ul>
</li>
<li><code>hasattr(object, attr)</code> –&gt; 第二个参数用字符串</li>
<li><code>getattr(object, attr[, default])</code> –&gt; 第三个参数可以设置不存在属性的默认值</li>
<li><code>setattr(object, attr[, value])</code> –&gt; 设置属性</li>
<li><code>delattr(object, attr)</code> –&gt; 删除属性</li>
<li><code>property(getattr, setattr, delattr)</code></li>
<li>random模块</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">50</span>):</span><br><span class="line">    print(random.randint(<span class="number">1</span>, <span class="number">10</span>), i)  <span class="comment"># 返回1, 10之间的随机整数, 包括1, 10</span></span><br></pre></td></tr></table></figure>
<ul>
<li>os模块<ul>
<li>操作文件、文件夹和系统分隔符等</li>
<li><a href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45512&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403" target="_blank" rel="noopener">os模块及os.path模块参考网址</a></li>
</ul>
</li>
<li>os.path模块<ul>
<li>python路径操作模块</li>
<li><code>os.path.basename</code></li>
<li><code>os.path.dirname</code></li>
</ul>
</li>
<li>pickle模块  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">my_list = [<span class="string">'xyz'</span>, <span class="number">123</span>, <span class="string">'bbc'</span>, [<span class="string">'hello'</span>, <span class="string">'lady'</span>]]</span><br><span class="line">pkl_file = open(<span class="string">'my_list.pkl'</span>, <span class="string">'wb'</span>)  <span class="comment"># 以二进制方式打开文件</span></span><br><span class="line">pickle.dump(my_list, pkl_file)  <span class="comment"># 将数据转化为二进制存入</span></span><br><span class="line">pkl_file.close</span><br><span class="line">pkl_file = open(<span class="string">'my_list.pkl'</span>, <span class="string">'rb'</span>)  <span class="comment"># 以只读方式打开二进制文件</span></span><br><span class="line">my_list2 = pickle.load(pkl_file)  <span class="comment"># 将二进制文件转换为原始数据</span></span><br><span class="line">print(my_list2)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Python普通函数"><a href="#Python普通函数" class="headerlink" title="Python普通函数"></a>Python普通函数</h3><h4 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h4><blockquote>
<p>如果python函数没有return语句，默认返回None对象<br>不要在函数中试图定义或修改全局变量的值，否则python会新建一个与全局变量名字相同的局部变量代替(屏蔽保护全局变量)<br>在函数内部使用global关键字修饰需要修改的全局变量，调用函数，全局变量发生改变</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">display</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">global</span> count</span><br><span class="line"><span class="meta">... </span>    count = <span class="number">99</span></span><br><span class="line"><span class="meta">... </span>    print(count)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(count)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>display()</span><br><span class="line"><span class="number">99</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(count)</span><br><span class="line"><span class="number">99</span></span><br></pre></td></tr></table></figure>
<ul>
<li>lambda表达式</li>
</ul>
<p><code>lambda x : 2 * x + 1</code>相当于定义了函数，冒号前面是参数，后面是返回值</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">ds</span><span class="params">(x)</span>:</span></span><br><span class="line"><span class="meta">... </span> <span class="keyword">return</span> <span class="number">2</span> * x + <span class="number">1</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ds(<span class="number">5</span>)</span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = <span class="keyword">lambda</span> x : <span class="number">2</span> * x + <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g(<span class="number">5</span>)</span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>默认参数</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(a=<span class="string">"apple"</span>, b=<span class="string">"banana"</span>)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"正在吃"</span> + a, b)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>eat(<span class="string">"pear"</span>, <span class="string">"peach"</span>)</span><br><span class="line">正在吃pear peach</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>eat()</span><br><span class="line">正在吃apple banana</span><br></pre></td></tr></table></figure>
</li>
<li><p>关键字参数</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(name, address)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(name + <span class="string">"在"</span> + address)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>write(<span class="string">"小明"</span>, <span class="string">"杭州"</span>)</span><br><span class="line">小明在杭州</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>write(address = <span class="string">"武汉"</span>, name = <span class="string">"小萌"</span>)</span><br><span class="line">小萌在武汉</span><br></pre></td></tr></table></figure>
</li>
<li><p>可变参数</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(*params)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"参数长度是:"</span>, len(params))</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"第三个参数是:"</span>, params[<span class="number">2</span>])</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>test(<span class="string">"今天"</span>, <span class="string">"明天"</span>, <span class="string">"后天"</span>, <span class="string">"大后天"</span>, <span class="string">"大大后天"</span>)</span><br><span class="line">参数长度是: <span class="number">5</span></span><br><span class="line">第三个参数是: 后天</span><br><span class="line"><span class="comment"># 可变参数后面如果有其他函数,建议设置成默认函数,否则需要使用关键字参数获得</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(*params, extra=<span class="string">"萨瓦迪卡"</span>)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"参数长度是:"</span>, len(params))</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"其他参数是:"</span>, extra)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hello(<span class="string">"hi"</span>, <span class="string">"hello"</span>, <span class="string">"你好"</span>)</span><br><span class="line">参数长度是: <span class="number">3</span></span><br><span class="line">其他参数是: 萨瓦迪</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(*params, extra)</span>:</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"参数长度是:"</span>, len(params))</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">"其他参数是:"</span>, extra)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hello(<span class="string">"hi"</span>, <span class="string">"hello"</span>, <span class="string">"你好"</span>, <span class="string">"萨瓦迪卡"</span>, extra=<span class="string">"阿妮哈赛呦"</span>)</span><br><span class="line">参数长度是: <span class="number">4</span></span><br><span class="line">其他参数是: 阿妮哈赛呦</span><br></pre></td></tr></table></figure>
</li>
<li><p>内嵌函数和闭包</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    x = <span class="number">5</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>        x *= x</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> x</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> f2()</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1() <span class="comment"># 报错,局部变量x未定义</span></span><br><span class="line"><span class="comment"># UnboundLocalError: local variable 'x' referenced before assignment</span></span><br></pre></td></tr></table></figure>
<p>  解决办法1(Python2.0)：</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    x = [<span class="number">5</span>]</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>        x[<span class="number">0</span>] *= x[<span class="number">0</span>]</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> x[<span class="number">0</span>]</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> f2()</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure>
<p>  解决方法2(Python3.0) –&gt; nonlocal关键字：</p>
  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    x = <span class="number">5</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">nonlocal</span> x</span><br><span class="line"><span class="meta">... </span>        x *= x</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> x</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> f2()</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f1()</span><br><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>两个牛逼的BIF(内置函数 build in function)</p>
<ul>
<li><p>filter(function or None, iterable) –&gt; filter object</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个参数为None,过滤结果为false的值</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(filter(<span class="literal">None</span>, (<span class="number">1</span>, <span class="number">0</span>, <span class="literal">False</span>, <span class="literal">True</span>)))</span><br><span class="line">[<span class="number">1</span>, <span class="literal">True</span>]</span><br><span class="line"><span class="comment"># 第一个参数为函数,过滤返回结果为false的数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">(x)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x % <span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>temp = range(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>show = filter(odd, temp)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(show)</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment"># 上述函数简便写法</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(filter(<span class="keyword">lambda</span> x : x % <span class="number">2</span>, range(<span class="number">10</span>)))</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>map(func, *iterables) –&gt; map object</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(<span class="keyword">lambda</span> x : x * <span class="number">2</span>, range(<span class="number">10</span>)))</span><br><span class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>递归调用</p>
<ul>
<li><p>设置递归深度</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.setrecursionlimit(<span class="number">100000</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>阶乘的非递归版本实现：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">  result = n</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">    result *= i</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">num = int(input(<span class="string">"请输入一个正整数:"</span>))</span><br><span class="line">result = factorial(num)</span><br><span class="line">print(<span class="string">"%d 的阶乘是: %d"</span> % (num, result))</span><br></pre></td></tr></table></figure>
</li>
<li><p>阶乘的递归实现</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">num = int(input(<span class="string">"请输入一个正整数:"</span>))</span><br><span class="line">result = factorial(num)</span><br><span class="line">print(<span class="string">"%d 的阶乘是: %d"</span> % (num, result))</span><br></pre></td></tr></table></figure>
</li>
<li><p>斐波那契数列非递归实现:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci</span><span class="params">(n)</span>:</span></span><br><span class="line">  n1 = <span class="number">1</span></span><br><span class="line">  n2 = <span class="number">1</span></span><br><span class="line">  n3 = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> n &lt; <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"输入有误!"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (n - <span class="number">2</span>) &gt; <span class="number">0</span>:</span><br><span class="line">    n3 = n2 + n1</span><br><span class="line">    n1 = n2</span><br><span class="line">    n2 = n3</span><br><span class="line">    n -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> n3</span><br><span class="line"></span><br><span class="line">result = fibonacci(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">if</span> result != <span class="number">-1</span>:</span><br><span class="line">  print(<span class="string">"总共有%d对兔子诞生~"</span> % result)</span><br></pre></td></tr></table></figure>
</li>
<li><p>斐波那契数列递归实现:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci</span><span class="params">(n)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> n &lt; <span class="number">1</span>:</span><br><span class="line">    print(<span class="string">"输入有误!"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">1</span> <span class="keyword">or</span> n == <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">result = fibonacci(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">if</span> result != <span class="number">-1</span>:</span><br><span class="line">  print(<span class="string">"总共有%d对兔子诞生~"</span> % result)</span><br></pre></td></tr></table></figure>
</li>
<li><p>汉诺塔递归实现</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hanoi</span><span class="params">(n, x, y, z)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> n &lt; <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">    print(x, <span class="string">'--&gt;'</span>, z)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    hanoi(n - <span class="number">1</span>, x, z, y) <span class="comment"># 将前n-1个盘子从x移动到y上</span></span><br><span class="line">    print(x, <span class="string">'--&gt;'</span>, z) <span class="comment"># 将最底下的最后一个盘子从x移动到z上</span></span><br><span class="line">    hanoi(n - <span class="number">1</span>, y, x, z)<span class="comment"># 将y上的n-1个盘子移动到z上</span></span><br><span class="line"></span><br><span class="line">n = int(input(<span class="string">"请输入汉诺塔的层数:"</span>))</span><br><span class="line">hanoi(n, <span class="string">'X'</span>, <span class="string">'Y'</span>, <span class="string">'Z'</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="Python文件读写"><a href="#Python文件读写" class="headerlink" title="Python文件读写"></a>Python文件读写</h3><ul>
<li><p>读取文件–&gt; <a href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45279&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403" target="_blank" rel="noopener">参考网址</a></p>
<ul>
<li>打开模式<ul>
<li><code>&#39;r&#39;</code> –&gt; 只读方式(默认)</li>
<li><code>&#39;w&#39;</code> –&gt; 写入方式打开，会覆盖已存在的文件(用于写入文件)</li>
<li><code>&#39;a&#39;</code> –&gt; 写入模式打开文件,如果文件存在,则在末尾追加<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = open(<span class="string">'test.txt'</span>) <span class="comment"># 以只读方式打开文件</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(f) <span class="comment"># 打开的文件流可以序列化</span></span><br><span class="line">[<span class="string">'hello my name is liming\n'</span>, <span class="string">'where are you from\n'</span>, <span class="string">'i am from america\n'</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>文件对象方法</p>
<ul>
<li><code>f.close()</code> –&gt; 关闭文件流</li>
<li><code>f.read([size=-1])</code> –&gt; 从文件流中读取size个字符, 当未给定size或给定负值, 读取剩余的所有字符</li>
<li><code>f.readline([size=-1])</code> –&gt; 读取一行(遇到<code>\n</code>和<code>EOF</code>结束), 如果定义了size，有可能返回的只是一行的一部分</li>
<li><code>f.readlines([size=-1])</code> –&gt; 把文件每一行作为一个list的一个成员，并返回这个list, 它的内部是通过循环调用readline()来实现的. 如果提供size参数，size是表示读取内容的总长，也就是说可能只读到文件的一部分</li>
<li><code>f.write(str)</code> –&gt; 将字符串写入文件, write()并不会在str后加上一个换行符</li>
<li><code>f.writelines(seq)</code> –&gt; 向文件中写入字符串序列seq(list, tuple, str), seq应该是一个返回字符串的可迭代对象. 这个函数也只是忠实地写入，不会在每行后面加上任何东西</li>
<li><code>f.seek(offset, from)</code> –&gt; 在文件中移动文件指针, 从from(0代表文件起始位置, 1代表当前位置, 2代表文件末尾)偏移offset个字节</li>
<li><code>f.tell()</code> –&gt; 返回当前在文件中的位置<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'test.txt'</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">  print(line) <span class="comment"># 直接读取文件流</span></span><br><span class="line"></span><br><span class="line">f.seek(<span class="number">10</span>, <span class="number">0</span>) <span class="comment"># 定位文件指针</span></span><br><span class="line">print(f) <span class="comment"># 打印File文本对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lines = f.readline(100)</span></span><br><span class="line"><span class="comment"># print(lines)</span></span><br><span class="line"></span><br><span class="line">lines = list(f) <span class="comment"># 将文件流(iterable)转化为list</span></span><br><span class="line">print(lines)</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">  count += <span class="number">1</span></span><br><span class="line">  print(<span class="string">'第%d行:'</span> % count, line)</span><br><span class="line"></span><br><span class="line">f.close() <span class="comment"># 关闭文件流</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>一个Python文件读写任务</p>
<ul>
<li><p>文本文件molest.txt(调戏), 任务是将其中小甲鱼和小客服的三次对话分别读出来, 每次对话分为boy*.txt和girl*.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">小客服: 小甲鱼, 今天有客服问你有没有女朋友?</span><br><span class="line">小甲鱼: 咦??</span><br><span class="line">小客服: 我跟她说了你已经有女朋友了!</span><br><span class="line">小甲鱼: ......</span><br><span class="line">==========</span><br><span class="line">小客服: 小甲鱼, 有个好评很好笑哈.</span><br><span class="line">小甲鱼: 哦?</span><br><span class="line">小客服: <span class="string">"有了小甲鱼, 妈妈再也不用担心我的学习了~"</span></span><br><span class="line">小甲鱼: 哈哈哈.</span><br><span class="line">==========</span><br><span class="line">小客服: 小甲鱼, 今天一个会员想找你.</span><br><span class="line">小甲鱼: 哦? 什么事?</span><br><span class="line">小客服: 他说他妈喊他回家吃饭.</span><br><span class="line">小甲鱼: 滚!</span><br></pre></td></tr></table></figure>
</li>
<li><p>代码如下</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_file</span><span class="params">(boy, girl, count)</span>:</span></span><br><span class="line">file_name_boy = <span class="string">'boy_%d.txt'</span> % count</span><br><span class="line">file_name_girl = <span class="string">'girl_%d.txt'</span> % count</span><br><span class="line"></span><br><span class="line">boy_file = open(file_name_boy, <span class="string">'w'</span>)</span><br><span class="line">girl_file = open(file_name_girl, <span class="string">'w'</span>)</span><br><span class="line"></span><br><span class="line">boy_file.writelines(boy)</span><br><span class="line">girl_file.writelines(girl)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以'====='分割对话</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">split_file</span><span class="params">(file_name)</span>:</span></span><br><span class="line">    f = open(file_name)</span><br><span class="line"></span><br><span class="line">    boy = []</span><br><span class="line">    girl = []</span><br><span class="line">    count = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> each_line <span class="keyword">in</span> f:</span><br><span class="line">        <span class="keyword">if</span> each_line[:<span class="number">5</span>] != <span class="string">'====='</span>:</span><br><span class="line">            (role, line_say) = each_line.split(<span class="string">':'</span>, <span class="number">1</span>) <span class="comment"># 每一行按照冒号分割说话人和说话内容, 一次即可</span></span><br><span class="line">            <span class="keyword">if</span> role == <span class="string">'小甲鱼'</span>:</span><br><span class="line">                boy.append(line_say.lstrip())</span><br><span class="line">            <span class="keyword">if</span> role == <span class="string">'小客服'</span>:</span><br><span class="line">                girl.append(line_say.lstrip())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            save_file(boy, girl, count) <span class="comment"># 存储说话内容</span></span><br><span class="line"></span><br><span class="line">            boy = []</span><br><span class="line">            girl = []</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    save_file(boy, girl, count)</span><br><span class="line"></span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line">split_file(<span class="string">'molest.txt'</span>) <span class="comment"># 调用分割文件函数</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="Python异常处理"><a href="#Python异常处理" class="headerlink" title="Python异常处理"></a>Python异常处理</h3><ul>
<li><code>try ---&gt; except --&gt; except --&gt; finally</code></li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># int('abc')</span></span><br><span class="line">    f = open(<span class="string">'boy_1.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">    print(f.write(<span class="string">'好冷啊'</span>))</span><br><span class="line">    print(f.read())</span><br><span class="line">    sum = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'文件出错啦T_T\n错误原因是:'</span> + str(reason), <span class="string">'=='</span> * <span class="number">10</span>, type(reason))</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'类型出错啦T_T\n错误原因是:'</span> + str(reason), <span class="string">'=='</span> * <span class="number">10</span>, type(reason))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'没有异常'</span>)  <span class="comment"># else可以和try except连用, 没异常时起作用</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br><span class="line">    print(<span class="string">'这里收个尾'</span>)</span><br><span class="line"><span class="comment"># f.close()  # 写在这里也可行</span></span><br><span class="line">print(<span class="string">'来来来,见面分一半'</span>)</span><br><span class="line"><span class="keyword">raise</span> ZeroDivisionError(<span class="string">'除数不能为0'</span>)  <span class="comment"># 直接手写产生异常</span></span><br></pre></td></tr></table></figure>
<p>结果如下:</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line">文件出错啦T_T</span><br><span class="line">错误原因是:<span class="keyword">not</span> readable ==================== &lt;<span class="class"><span class="keyword">class</span> '<span class="title">io</span>.<span class="title">UnsupportedOperation</span>'&gt;</span></span><br><span class="line"><span class="class">这里收个尾</span></span><br><span class="line">来来来,见面分一半</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Users/hushiking/hu/python/littleTurtle/exception.py"</span>, line <span class="number">17</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">raise</span> ZeroDivisionError(<span class="string">'除数不能为0'</span>)  <span class="comment"># 直接手写产生异常</span></span><br><span class="line">ZeroDivisionError: 除数不能为<span class="number">0</span></span><br></pre></td></tr></table></figure>
<h3 id="with用法"><a href="#with用法" class="headerlink" title="with用法"></a>with用法</h3><ul>
<li>用在文件读写中, 不用手动关闭文件流, with自动搞定. 例如:</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'data.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="string">'with处理文件读写不用手动关闭文件流'</span>)</span><br><span class="line">        <span class="keyword">for</span> each_line <span class="keyword">in</span> f:</span><br><span class="line">            print(each_line)</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'出错啦'</span> + str(reason))</span><br><span class="line"><span class="comment"># finally:</span></span><br><span class="line"><span class="comment">#    f.close()  # 不需要了</span></span><br></pre></td></tr></table></figure>
<ul>
<li>with可用于异常追踪</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, type, value, trace)</span>:</span></span><br><span class="line">        print(<span class="string">"type:"</span>, type)</span><br><span class="line">        print(<span class="string">"value:"</span>, value)</span><br><span class="line">        print(<span class="string">"trace:"</span>, trace)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_something</span><span class="params">(self)</span>:</span></span><br><span class="line">        bar = <span class="number">1</span> / <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> bar + <span class="number">10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Sample() <span class="keyword">as</span> sample:</span><br><span class="line">    sample.do_something()  <span class="comment"># 可答应出来异常的类型,值和追踪位置</span></span><br></pre></td></tr></table></figure>
<h2 id="Python面向对象"><a href="#Python面向对象" class="headerlink" title="Python面向对象"></a>Python面向对象</h2><h3 id="类似js的构造方法"><a href="#类似js的构造方法" class="headerlink" title="类似js的构造方法"></a>类似js的构造方法</h3><ul>
<li><code>__init__(self, name, ...)</code></li>
<li><code>__init__()</code>函数必须返回None, 否则报错</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kick</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我叫%s, shit, 谁踢我..."</span> % self.name)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Person(<span class="string">"李世民"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.kick()</span><br><span class="line">我叫李世民, shit, 谁踢我...</span><br></pre></td></tr></table></figure>
<h3 id="设置私有变量"><a href="#设置私有变量" class="headerlink" title="设置私有变量"></a>设置私有变量</h3><ul>
<li><code>__name = &quot;xxx&quot;</code></li>
<li>可使用<code>p._Person__name</code>访问</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    __name = <span class="string">'小甲鱼'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Person()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.__name</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;console&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'Person'</span> object has no attribute <span class="string">'__name'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.getName()</span><br><span class="line"><span class="string">'小甲鱼'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p._Person__name</span><br><span class="line"><span class="string">'小甲鱼'</span></span><br></pre></td></tr></table></figure>
<h3 id="通过property绑定属性"><a href="#通过property绑定属性" class="headerlink" title="通过property绑定属性"></a>通过property绑定属性</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, size=<span class="number">10</span>)</span>:</span></span><br><span class="line">        self.size = size</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getSize</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.size</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setSize</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.size = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delSize</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.size</span><br><span class="line">    <span class="comment"># 绑定属性x与属性size</span></span><br><span class="line">    x = property(getSize, setSize, delSize)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = C()</span><br><span class="line">print(c.size)  <span class="comment"># 10</span></span><br><span class="line">c.x = <span class="number">28</span></span><br><span class="line">print(c.size)  <span class="comment"># 28</span></span><br><span class="line">c.size = <span class="number">30</span></span><br><span class="line">print(c.x)  <span class="comment"># 30</span></span><br><span class="line"><span class="keyword">del</span> c.x</span><br><span class="line">print(c.size)  <span class="comment"># size属性已删除,报错</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong><em>property绑定属性原理</em></strong>, 自定义property类</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyProperty</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, fget=None, fset=None, fdel=None)</span>:</span></span><br><span class="line">        self.fget = fget</span><br><span class="line">        self.fset = fset</span><br><span class="line">        self.fdel = fdel</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.fget(instance)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></span><br><span class="line">        self.fset(instance, value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, instance)</span>:</span></span><br><span class="line">        self.fdel(instance)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._x = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getX</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._x</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setX</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self._x = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delX</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self._x</span><br><span class="line"></span><br><span class="line">    x = MyProperty(getX, setX, delX)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = C()</span><br><span class="line">c.x = <span class="string">'xxx'</span></span><br><span class="line">print(c._x)  <span class="comment"># xxx</span></span><br><span class="line"><span class="keyword">del</span> c.x</span><br><span class="line">print(c._x)  <span class="comment"># 报错, AttributeError: 'C' object has no attribute '_x'</span></span><br></pre></td></tr></table></figure>
<h3 id="继承-用于纵向关系的类"><a href="#继承-用于纵向关系的类" class="headerlink" title="继承(用于纵向关系的类)"></a>继承(用于纵向关系的类)</h3><ul>
<li>其中pass是占位符, 表示不做任何处理</li>
<li>自己创建的MyList类继承系统的list类</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span><span class="params">(list)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = MyList()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1.append(<span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1.append(<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1.append(<span class="number">7</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1</span><br><span class="line">[<span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1</span><br><span class="line">[<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>子类中定义的方法会覆盖父类定义的方法, 包括<code>__init__(self)</code>方法</li>
<li>所以子类的<code>__init__(self)</code>需要先调用父类的<code>__init__(self)</code>方法<ol>
<li>调用未绑定的父类方法</li>
<li><code>super().__init__()</code></li>
</ol>
</li>
<li>Python支持多继承</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random <span class="keyword">as</span> r</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.x = r.randint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">        self.y = r.randint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.x -= <span class="number">1</span></span><br><span class="line">        print(<span class="string">'我的位置是:'</span>, self.x, self.y)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shark</span><span class="params">(Fish)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="comment">#        Fish.__init__(self)  # 调用未绑定的父类方法</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.hungry = <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h3 id="类组合-用于横向关系的类-类之间没有继承关系或者其他关联"><a href="#类组合-用于横向关系的类-类之间没有继承关系或者其他关联" class="headerlink" title="类组合(用于横向关系的类, 类之间没有继承关系或者其他关联)"></a>类组合(用于横向关系的类, 类之间没有继承关系或者其他关联)</h3><ul>
<li>把要组合的类的实例化写入新类的<code>__init__</code>函数中, 例如:</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Turtle</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.num = x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.num = x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pool</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        self.turtle = Turtle(x)</span><br><span class="line">        self.fish = Fish(y)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_num</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"水池里总共有乌龟 %d 只和小鱼 %d 条!"</span> % (self.turtle.num, self.fish.num))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pool = Pool(<span class="number">2</span>, <span class="number">11</span>)</span><br><span class="line">pool.print_num()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 水池里总共有乌龟 2 只和小鱼 11 条!</span></span><br></pre></td></tr></table></figure>
<ul>
<li>类、类对象、实例对象<ul>
<li>类属性(静态属性/成员), 所有实例对象共用</li>
<li>实例属性(实例属性/成员), 与类属性同名的实例属性会覆盖类属性</li>
</ul>
</li>
<li>属性名与方法名相同, 属性会覆盖方法(导致方法无法调用)</li>
<li><strong>类的方法需要绑定self</strong>, 是为了实例对象调用该方法</li>
</ul>
<h2 id="Python魔法方法"><a href="#Python魔法方法" class="headerlink" title="Python魔法方法"></a>Python魔法方法</h2><h3 id="解构与析构"><a href="#解构与析构" class="headerlink" title="解构与析构"></a>解构与析构</h3><ul>
<li>在定义类时, 第一个调用的方法是<code>__new__</code>方法, 一般采用Python自带即可, 不需要重写, 当继承一个不可变的类时才可能需要重写. 例如:</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CapitalStr</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, string)</span>:</span></span><br><span class="line">        string = string.upper()</span><br><span class="line">        <span class="keyword">return</span> str.__new__(cls, string)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = CapitalStr(<span class="string">'Good morning, everyone!'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">'GOOD MORNING, EVERYONE!'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>定义类时, 还有一个隐式的<code>__del__</code>方法, 当对象不再被其它变量引用时会被Python垃圾回收机制回收, 触发<code>__del__</code>方法</li>
</ul>
<h3 id="str-与-repr"><a href="#str-与-repr" class="headerlink" title="__str__与__repr__"></a><code>__str__</code>与<code>__repr__</code></h3><ul>
<li><code>str()</code>函数得到的字符串可读性好, 所以被print调用, 对应<code>__str__</code>函数返回值</li>
<li><code>repr()</code>函数得到字符串通常可以用来重新获得该对象, <code>obj==eval(repr(obj)</code>. 对应<code>__repr__</code>函数返回值</li>
<li><code>str()</code>则不同，它生成一个对象的可读性好的字符串表示，结果通常无法用<code>eval()</code>求值，但适合print输出。</li>
<li><code>str()</code>出来的值是给人看的。<code>repr()</code>出来的值是给python看的，可以通过eval()重新变回一个Python对象。</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> <span class="string">'a__str__'</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> <span class="string">'a__repr__'</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = A()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">a__repr__</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">a__str__</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%s'</span> % a</span><br><span class="line"><span class="string">'a__str__'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%r'</span> % a</span><br><span class="line"><span class="string">'a__repr__'</span></span><br></pre></td></tr></table></figure>
<h4 id="定制定时器"><a href="#定制定时器" class="headerlink" title="定制定时器"></a>定制定时器</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定制定时器</span></span><br><span class="line"><span class="keyword">import</span> time <span class="keyword">as</span> t</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTimer</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.unit = [<span class="string">'年'</span>, <span class="string">'月'</span>, <span class="string">'日'</span>, <span class="string">'时'</span>, <span class="string">'分'</span>, <span class="string">'秒'</span>]</span><br><span class="line">        self.prompt = <span class="string">'未开始计时!'</span></span><br><span class="line">        self.lasted = []</span><br><span class="line">        self.begin = <span class="number">0</span></span><br><span class="line">        self.end = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 表示直接输出对象的值或者print(对象)的值</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.prompt</span><br><span class="line"></span><br><span class="line">    __repr__ = __str__</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        prompt = <span class="string">'总共运行了'</span></span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">6</span>):</span><br><span class="line">            result.append(self.lasted[index] + other.lasted[index])</span><br><span class="line">            <span class="keyword">if</span> result[index]:</span><br><span class="line">                prompt += (str(result[index]) + self.unit[index])</span><br><span class="line">        <span class="keyword">return</span> prompt</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 开始计时</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.begin = t.localtime()</span><br><span class="line">        self.prompt = <span class="string">'提示: 请先调研stop()停止计时!'</span></span><br><span class="line">        print(<span class="string">'计时开始...'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 停止计时</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.begin:</span><br><span class="line">            print(<span class="string">'提示: 请先调用start()进行计时!'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.end = t.localtime()</span><br><span class="line">            self._calc()</span><br><span class="line">            print(<span class="string">'计时结束!'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 内部方法,计算运行时间</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_calc</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.lasted = []</span><br><span class="line">        self.prompt = <span class="string">'总共运行了'</span></span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">6</span>):</span><br><span class="line">            self.lasted.append(self.end[index] - self.begin[index])</span><br><span class="line">            <span class="keyword">if</span> self.lasted[index]:</span><br><span class="line">                self.prompt += (str(self.lasted[index]) + self.unit[index])</span><br><span class="line">        <span class="comment"># 为下一轮计时初始化</span></span><br><span class="line">        self.begin = <span class="number">0</span></span><br><span class="line">        self.end = <span class="number">0</span></span><br><span class="line">        <span class="comment"># print(self.prompt)</span></span><br></pre></td></tr></table></figure>
<h3 id="add-与-sub"><a href="#add-与-sub" class="headerlink" title="__add__与__sub__"></a><code>__add__</code>与<code>__sub__</code></h3><p>内置加法与内置减法, 当两个对象相加或相减是触发</p>
<h3 id="属性访问-定制"><a href="#属性访问-定制" class="headerlink" title="属性访问(定制)"></a>属性访问(定制)</h3><ul>
<li><code>__getattr__(self, name)</code> –&gt; 定义当用户试图获取一个不存在的属性时的行为</li>
<li><code>__getattribute__(self, name)</code> –&gt; 定义当该类的属性被访问时的行为</li>
<li><code>__setattr__(self, name, value)</code> –&gt; 定义当一个属性被设置时的行为</li>
<li><code>__delattr__(self, name)</code> –&gt; 定义当一个属性被删除时的行为</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, width=<span class="number">0</span>, height=<span class="number">0</span>)</span>:</span></span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, name, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> name == <span class="string">'square'</span>:</span><br><span class="line">            self.width = value</span><br><span class="line">            self.height = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># self.name = value  # 报错,__setattr__自己调用自己,死循环</span></span><br><span class="line">            <span class="comment"># super().__setattr__(name, value)  # 可使用基类的__setattr__方法</span></span><br><span class="line">            self.__dict__[name] = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getArea</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.width * self.height</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r = Rectangle(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">print(r.getArea())  <span class="comment"># 10</span></span><br><span class="line">r.square = <span class="number">10</span></span><br><span class="line">print(r.getArea())  <span class="comment"># 100</span></span><br></pre></td></tr></table></figure>
<ul>
<li>自定义温度函数转换(类似property)</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Celsius</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value=<span class="number">26</span>)</span>:</span></span><br><span class="line">        self.value = float(value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></span><br><span class="line">        self.value = float(value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fahrenheit</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> instance.cel * <span class="number">1.8</span> + <span class="number">32</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></span><br><span class="line">        instance.cel = float(value) - <span class="number">32</span> / <span class="number">1.8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Temperature</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value=<span class="number">26</span>)</span>:</span></span><br><span class="line">        self.value = float(value)</span><br><span class="line">    cel = Celsius()</span><br><span class="line">    fah = Fahrenheit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">temp = Temperature()</span><br><span class="line">print(temp.value)  <span class="comment"># 26.0</span></span><br><span class="line">print(temp.cel)  <span class="comment"># 26.0</span></span><br><span class="line">temp.cel = <span class="number">30</span></span><br><span class="line">print(temp.fah)  <span class="comment"># 86.0</span></span><br><span class="line">temp.fah = <span class="number">88</span></span><br><span class="line">print(temp.cel)  <span class="comment"># 70.22222222223</span></span><br></pre></td></tr></table></figure>
<h3 id="定制序列-容器"><a href="#定制序列-容器" class="headerlink" title="定制序列(容器)"></a>定制序列(容器)</h3><ol>
<li><code>__len__(self)</code></li>
<li><code>__getitem__(self, key)</code></li>
<li><code>__setitem__(self, key, value)</code></li>
<li><code>__delitem__(self, key)</code></li>
</ol>
<blockquote>
<p>定义元组或者字符串等不可变容器, 只需定义前两个方法即可<br>如果定义可变容器, 以上四个方法都需要定义</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *args)</span>:</span></span><br><span class="line">        self.values = [x <span class="keyword">for</span> x <span class="keyword">in</span> args]</span><br><span class="line">        self.count = dict.fromkeys(range(len(self.values)), <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.values)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        self.count[key] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> self.values[key]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list1 = CountList(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>)</span><br><span class="line">list2 = CountList(<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>)</span><br><span class="line">print(list1[<span class="number">1</span>])  <span class="comment"># 3</span></span><br><span class="line">print(list2[<span class="number">1</span>])  <span class="comment"># 4</span></span><br><span class="line">print(list1[<span class="number">1</span>] + list2[<span class="number">2</span>])  <span class="comment"># 3 + 6 = 9</span></span><br><span class="line">list1.count  <span class="comment"># 不代表获取list1容器中的元素</span></span><br><span class="line">print(list1.count)  <span class="comment"># &#123;0: 0, 1: 2, 2: 0, 3: 0, 4: 0&#125;</span></span><br><span class="line">print(list2.count)  <span class="comment"># &#123;0: 0, 1: 1, 2: 1, 3: 0, 4: 0&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="定制迭代器"><a href="#定制迭代器" class="headerlink" title="定制迭代器"></a>定制迭代器</h3><ul>
<li>iter() –&gt; 返回可迭代对象的迭代器</li>
<li>next() –&gt; 得到迭代器的下一个迭代值, 如果没有下一个迭代值, 报StopIteration异常</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>it = iter(<span class="string">'abc'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(it)</span><br><span class="line"><span class="string">'a'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(it)</span><br><span class="line"><span class="string">'b'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(it)</span><br><span class="line"><span class="string">'c'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(it)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;console&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure>
<ul>
<li>自己定制迭代器</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fibs</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n=<span class="number">10</span>)</span>:</span></span><br><span class="line">        self.a = <span class="number">0</span></span><br><span class="line">        self.b = <span class="number">1</span></span><br><span class="line">        self.n = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = self.b, self.a + self.b</span><br><span class="line">        <span class="keyword">if</span> self.a &gt; self.n:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="keyword">return</span> self.a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fibs = Fibs(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> fibs:</span><br><span class="line">    print(each, end=<span class="string">' '</span>)</span><br></pre></td></tr></table></figure>
<p>以上代码, Fibs被定义为一个可迭代的斐波那契类容器, 迭代结果如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 1 2 3 5 8 13 21 34 55 89</span><br></pre></td></tr></table></figure>
<h3 id="生成器函数"><a href="#生成器函数" class="headerlink" title="生成器函数"></a>生成器函数</h3><ul>
<li>关键词<code>yield</code>, 相当于return, 函数运行到此处会暂停或挂起, 并在需要的时候(<code>next()</code>)从程序离开的地方继续或者重新开始</li>
<li><strong>生成器推导式</strong></li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = (i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x10b9588e0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(d)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(d)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(d)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> d:</span><br><span class="line">    print(each, end=<span class="string">' '</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>
<ul>
<li>生成器推导式作为函数参数时可以<strong><em>省略括号</em></strong></li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum((i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>) <span class="keyword">if</span> i % <span class="number">2</span>))</span><br><span class="line"><span class="number">2500</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sum(i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>) <span class="keyword">if</span> i % <span class="number">2</span>)</span><br><span class="line"><span class="number">2500</span></span><br></pre></td></tr></table></figure>
<h4 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>) <span class="keyword">if</span> i % <span class="number">2</span> <span class="keyword">and</span> <span class="keyword">not</span>(i % <span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a  <span class="comment"># 显示0, 99之间不能被2整除但能被3整除的数字</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">9</span>, <span class="number">15</span>, <span class="number">21</span>, <span class="number">27</span>, <span class="number">33</span>, <span class="number">39</span>, <span class="number">45</span>, <span class="number">51</span>, <span class="number">57</span>, <span class="number">63</span>, <span class="number">69</span>, <span class="number">75</span>, <span class="number">81</span>, <span class="number">87</span>, <span class="number">93</span>, <span class="number">99</span>]</span><br></pre></td></tr></table></figure>
<h4 id="字典推导式"><a href="#字典推导式" class="headerlink" title="字典推导式"></a>字典推导式</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = &#123;i: i % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b  <span class="comment"># 0, 9之间的数字是否为偶数</span></span><br><span class="line">&#123;<span class="number">0</span>: <span class="literal">True</span>, <span class="number">1</span>: <span class="literal">False</span>, <span class="number">2</span>: <span class="literal">True</span>, <span class="number">3</span>: <span class="literal">False</span>, <span class="number">4</span>: <span class="literal">True</span>, <span class="number">5</span>: <span class="literal">False</span>, <span class="number">6</span>: <span class="literal">True</span>, <span class="number">7</span>: <span class="literal">False</span>, <span class="number">8</span>: <span class="literal">True</span>, <span class="number">9</span>: <span class="literal">False</span>&#125;</span><br></pre></td></tr></table></figure>
<h4 id="集合推导式"><a href="#集合推导式" class="headerlink" title="集合推导式"></a>集合推导式</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = &#123;i <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">23</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c  <span class="comment"># 排除列表中重复的数字</span></span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">23</span>&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2017/01/03/Python/Python知识点/" data-id="cjvlw5bny00c9xfq3m15o6nv0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript/for...in与for...of区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/13/JavaScript/for...in与for...of区别/" class="article-date">
  <time datetime="2016-12-13T12:19:31.000Z" itemprop="datePublished">2016-12-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/JavaScript/for...in与for...of区别/">for...in 与 for...of 遍历的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="主要区别"><a href="#主要区别" class="headerlink" title="主要区别"></a>主要区别</h1><ol>
<li>推荐在循环对象属性的时候，使用 <code>for...in</code>，在遍历数组的时候的时候使用 <code>for...of</code>。</li>
<li><code>for...in</code> 循环出的是 <code>key</code>，<code>for...of</code> 循环出的是 <code>value</code></li>
<li>注意，<code>for...of</code> 是 ES6 新引入的特性。修复了 ES5 引入的 <code>for...in</code> 的不足</li>
<li><code>for...of</code> 不能循环普通的对象，需要通过和 <code>Object.keys()</code> 搭配使用</li>
</ol>
<blockquote>
<p>假设我们要遍历一个数组的 value，<code>let Arr = [&#39;a&#39;,123,{a:&#39;1&#39;,b:&#39;2&#39;}]</code></p>
</blockquote>
<h2 id="使用for…in循环："><a href="#使用for…in循环：" class="headerlink" title="使用for…in循环："></a>使用for…in循环：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">in</span> Arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(&#123;Arr[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用for…of循环："><a href="#使用for…of循环：" class="headerlink" title="使用for…of循环："></a>使用for…of循环：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> value <span class="keyword">of</span> Arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>咋一看似乎只是写法不一样而已，那为什么说 for…of 修复了 for…in 的缺陷和不足。<br>假设我们往数组添加一个属性 name：<code>Arr.name = &#39;demo&#39;</code>，往数组的原型对象上添加一个属性 myArr：<code>Array.prototype.myArr = function() {}</code>，再分别查看上面写的两个循环：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">in</span> Arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(Arr[index]); <span class="comment">// demo 与 function 都被遍历出来了！！！</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> value <span class="keyword">of</span> Arr)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以说，作用于数组的 for…in 循环除了遍历数组元素以外，<strong>还会遍历自定义属性与数组原型对象上添加的属性</strong>。</p>
<p>for…of 循环不会循环对象的 key，只会循环出数组的 value，因此 for…of 不能循环遍历普通对象,对普通对象的属性遍历推荐使用 for…in</p>
<p>如果非要想用 for…of 来遍历普通对象的属性的话，可以通过和 <code>Object.keys()</code> 搭配使用，先获取对象的所有key的数组，然后遍历</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> student=&#123;</span><br><span class="line">    name: <span class="string">'tom'</span>,</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    locate: &#123;</span><br><span class="line">        country:<span class="string">'US'</span>,</span><br><span class="line">        city:<span class="string">'LA'</span>,</span><br><span class="line">        school:<span class="string">'SSU'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(student))&#123;</span><br><span class="line">    <span class="comment">//使用Object.keys()方法获取对象 key 的数组</span></span><br><span class="line">    <span class="built_in">console</span>.log(key+<span class="string">": "</span>+student[key])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>Object.keys()</code> 只会遍历出对象本身含有的属性，不会遍历对象的构造函数的原型对象上的属性。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/12/13/JavaScript/for...in与for...of区别/" data-id="cjvlw5bkv003rxfq3mi9dm8ju" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Array/">Array</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/循环遍历/">循环遍历</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web前端/">Web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web前端/">web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/自由随笔/">自由随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维与Linux/">运维与Linux</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ajax/">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/">Cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django/">Django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECMAScript/">ECMAScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grammar/">Grammar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RegExp/">RegExp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSI/">SSI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebAPP/">WebAPP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/audio/">audio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/">cmd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/form表单/">form表单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reduce/">reduce</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/作用域/">作用域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原型/">原型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原型链/">原型链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/循环遍历/">循环遍历</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/枚举/">枚举</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/缓存/">缓存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域/">跨域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/闭包/">闭包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/音视频/">音视频</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Ajax/" style="font-size: 12.5px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Array/" style="font-size: 17.5px;">Array</a> <a href="/tags/CSS/" style="font-size: 12.5px;">CSS</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/DOM/" style="font-size: 16.25px;">DOM</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Docker/" style="font-size: 11.25px;">Docker</a> <a href="/tags/ECMAScript/" style="font-size: 11.25px;">ECMAScript</a> <a href="/tags/Error/" style="font-size: 10px;">Error</a> <a href="/tags/Git/" style="font-size: 13.75px;">Git</a> <a href="/tags/Grammar/" style="font-size: 10px;">Grammar</a> <a href="/tags/HTML/" style="font-size: 18.75px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 11.25px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/Java/" style="font-size: 16.25px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Node-js/" style="font-size: 11.25px;">Node.js</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Promise/" style="font-size: 11.25px;">Promise</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/React/" style="font-size: 16.25px;">React</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/SSI/" style="font-size: 10px;">SSI</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/WebAPP/" style="font-size: 10px;">WebAPP</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/audio/" style="font-size: 11.25px;">audio</a> <a href="/tags/cmd/" style="font-size: 10px;">cmd</a> <a href="/tags/es6/" style="font-size: 11.25px;">es6</a> <a href="/tags/form表单/" style="font-size: 10px;">form表单</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/reduce/" style="font-size: 10px;">reduce</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/作用域/" style="font-size: 10px;">作用域</a> <a href="/tags/原型/" style="font-size: 10px;">原型</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/循环遍历/" style="font-size: 10px;">循环遍历</a> <a href="/tags/枚举/" style="font-size: 10px;">枚举</a> <a href="/tags/缓存/" style="font-size: 11.25px;">缓存</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/闭包/" style="font-size: 15px;">闭包</a> <a href="/tags/随笔/" style="font-size: 12.5px;">随笔</a> <a href="/tags/面试/" style="font-size: 13.75px;">面试</a> <a href="/tags/音视频/" style="font-size: 11.25px;">音视频</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">七月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/22/HTML/HTML5 Audio兼容问题/">HTML5 Audio兼容问题</a>
          </li>
        
          <li>
            <a href="/2019/03/30/Webpack/webpack中externals用法/">webpack externals 的用法</a>
          </li>
        
          <li>
            <a href="/2019/03/28/Vue/Vue微信网页刷新问题/">Vue 微信网页刷新问题</a>
          </li>
        
          <li>
            <a href="/2019/03/18/JavaScript/JS生成[n,m]随机数/">JS 生成[n, m]随机数</a>
          </li>
        
          <li>
            <a href="/2019/02/09/Vue/Vue使用中遇到的问题/">Vue 使用中遇到的问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 化简为凡<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>