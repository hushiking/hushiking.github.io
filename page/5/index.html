<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>化简为凡的小站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="hello, everyone, I love you!~">
<meta property="og:type" content="website">
<meta property="og:title" content="化简为凡的小站">
<meta property="og:url" content="http://hushiking.github.io/page/5/index.html">
<meta property="og:site_name" content="化简为凡的小站">
<meta property="og:description" content="hello, everyone, I love you!~">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="化简为凡的小站">
<meta name="twitter:description" content="hello, everyone, I love you!~">
  
    <link rel="alternate" href="/atom.xml" title="化简为凡的小站" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">化简为凡的小站</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">用生命谱写代码的赞歌</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hushiking.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Vue/Vue基本用法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/22/Vue/Vue基本用法/" class="article-date">
  <time datetime="2016-11-22T11:45:24.000Z" itemprop="datePublished">2016-11-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/22/Vue/Vue基本用法/">Vue 基本用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Vue-基础"><a href="#Vue-基础" class="headerlink" title="Vue 基础"></a>Vue 基础</h1><p>本文介绍了 Vue 一些基本用法，详情访问 <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">Vue 官方文档</a>。</p>
<h2 id="创建-vue-实例"><a href="#创建-vue-实例" class="headerlink" title="创建 vue 实例"></a>创建 vue 实例</h2><ul>
<li>绑定元素<ul>
<li>data 的属性值绑定在全局变量 app 上，可任意修改</li>
<li>props 属性与 html 元素的属性名称 绑定</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>，</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: <span class="string">'hello vue!'</span>，</span><br><span class="line">    seen: <span class="literal">true</span>，</span><br><span class="line">    todos: [</span><br><span class="line">      &#123;<span class="attr">text</span>: <span class="string">'js'</span>&#125;，</span><br><span class="line">      &#123;<span class="attr">text</span>: <span class="string">'vue'</span>&#125;，</span><br><span class="line">      &#123;<span class="attr">text</span>: <span class="string">'css3'</span>&#125;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
<ul>
<li>html 内容使用 mustache 语法<ul>
<li> 语法</li>
</ul>
</li>
<li><strong>html 元素属性应使用 v-bind 指令，<em>默认解析</em>，不采用 mustache 语法</strong></li>
<li>如果用到组件，<strong>要确保在初始化根实例之前注册了组件</strong></li>
<li>vue实例的简单方法<ul>
<li>vm.$el -&gt; 就是元素</li>
<li>vm.$data -&gt; 就是data</li>
<li>vm.$mount -&gt; 手动挂载vue实例到指定元素上</li>
<li>vm.$options -&gt; 获取自定义属性</li>
<li>vm.$destroy -&gt; 销毁vue实例对象</li>
<li>vm.$log() -&gt; 查看现在数据的状态</li>
</ul>
</li>
</ul>
<h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><ul>
<li>指令<ul>
<li>能接受一些参数，以冒号指明</li>
<li>最后也可以采用半角句号添加修饰符</li>
<li>v-bind 缩写<ul>
<li><code>&lt;a v-bind:href=&quot;url&quot;&gt;&lt;/a&gt;</code>缩写为<code>&lt;a :href=&quot;url&quot;&gt;&lt;/a&gt;</code></li>
<li><code>&lt;a v-on:click=&quot;doSomething&quot;&gt;&lt;/a&gt;</code>缩写为`</li>
</ul>
</li>
<li>过滤器<ul>
<li>过滤器设计目的只是用于文本转换，为了在其他指令中实现更复杂的数据变化，需要采用<strong>计算属性</strong></li>
</ul>
</li>
<li>v-for<ul>
<li>vue1.0的<code>track-by=&quot;id&quot;</code>废弃，变为<code>:key=&quot;id&quot;</code></li>
<li>例如<code>&lt;li v-for=&quot;(val，index) in list&quot; :key=&quot;index&quot;&gt;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="生命周期函数-vue2-0"><a href="#生命周期函数-vue2-0" class="headerlink" title="生命周期函数(vue2.0)"></a>生命周期函数(vue2.0)</h2><ul>
<li>钩子函数<ul>
<li>beforeCreate<ul>
<li>组件实例刚刚被创建(创建一个空实例，没有绑定属性和方法)</li>
</ul>
</li>
<li>created<ul>
<li>实例已经创建完成(给实例绑定了属性和方法，但是DOM树还未构建)</li>
</ul>
</li>
<li>beforeMount<ul>
<li>模板编译之前(vue实例还未挂载)</li>
</ul>
</li>
<li>mounted<ul>
<li>模板编译完成(插值语法编译完成，花括号已经转化为数据)</li>
</ul>
</li>
<li>beforeUpdate<ul>
<li>数据或组件更新之前</li>
</ul>
</li>
<li>update<ul>
<li>数据或组件更新完毕</li>
</ul>
</li>
<li>beforeDestroy<ul>
<li>组件销毁之前</li>
</ul>
</li>
<li>destroyed<ul>
<li>组件销毁完毕</li>
</ul>
</li>
</ul>
</li>
<li>用户刷新是看到花括号标记<ul>
<li><strong><em>v-cloak</em></strong><ul>
<li>防止闪烁，用于大段落</li>
</ul>
</li>
<li><strong><em>v-text</em></strong>和<strong><em>v-html</em></strong></li>
</ul>
</li>
</ul>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><ul>
<li><strong>计算属性后面不加小括号</strong>，一经运行立即计算</li>
<li><p>完整的computed属性形式</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    a: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">computed: &#123;</span><br><span class="line">    b: &#123;</span><br><span class="line">        <span class="keyword">get</span>: function() &#123;</span><br><span class="line">            <span class="keyword">return</span> a + <span class="number">1</span></span><br><span class="line">        &#125;，</span><br><span class="line">        <span class="keyword">set</span>: function(val) &#123;</span><br><span class="line">            <span class="keyword">this</span>.a = val</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">vm.b = <span class="number">20</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>computed里面放置一些业务逻辑代码，一定要<strong><em>记得return</em></strong></p>
</li>
<li>计算属性是基于它的<strong>依赖缓存</strong>，只有在它的相关依赖发生改变时才会重新取值</li>
<li><p>例如 Date.now()不是响应式依赖:</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    now: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Date</span>.now()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果你不希望有缓存，<strong>请使用 method 代替 computed</strong></p>
</li>
<li>watch 是监测实例的属性值是否发生变化而执行的，允许执行异步操作</li>
</ul>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><ul>
<li>组件创建和注册<ol>
<li>调用<code>Vue.extend()</code>创建的是一个组件构造器</li>
<li>使用<code>Vue.component()</code>注册组件，需要提供2个参数，第1个参数时组件的标签，第2个参数是组件构造器</li>
<li>组件应该挂载到某个Vue实例下，否则它不会生效</li>
</ol>
</li>
<li>全局注册和局部注册<ul>
<li>全局注册<code>Vue.component()</code></li>
<li>局部注册:选项对象的<code>components</code>属性</li>
</ul>
</li>
<li>父子组件<ul>
<li>Child组件是在Parent组件中注册的，它只能在Parent组件中使用，确切地说：子组件只能在父组件的<code>template</code>中使用</li>
</ul>
</li>
<li>使用script(需要设置type=”text/template”)或template标签</li>
<li>传入Vue构造器的多数选项也可以用在 <code>Vue.extend()</code> 或<code>Vue.component()</code>中，不过有两个特例： <strong>data</strong> 和 <strong>el</strong>。<ul>
<li><em>Vue.js规定：在定义组件的选项时，data和el选项必须使用函数，函数的返回值必须是对象。</em></li>
</ul>
</li>
<li>props<ul>
<li>数组(属性名称)</li>
<li>对象(props验证)</li>
<li>props绑定类型<ul>
<li>默认单向绑定类型</li>
<li>双向绑定(.sync)</li>
<li>单次绑定(.once)</li>
</ul>
</li>
</ul>
</li>
<li>编译作用域<ul>
<li>组件的模板是在其作用域内编译的，那么组件选项对象中的数据也应该是在组件模板中使用的</li>
<li>父组件模板的内容在父组件作用域内编译；子组件模板的内容在子组件作用域内编译</li>
<li>通俗地讲，在子组件中定义的数据，只能用在子组件的模板。在父组件中定义的数据，只能用在父组件的模板。如果父组件的数据要在子组件中使用，则需要子组件定义props</li>
</ul>
</li>
</ul>
<h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><ul>
<li>路由实例方法<ul>
<li><code>router.push({path: &#39;/home&#39;)</code><ul>
<li>直接添加一个路由，表现为切换路由，本质是向历史记录中添加一条记录，相当于html5的history的api添加路由方法</li>
</ul>
</li>
<li><code>router.replace({path: &#39;/home&#39;)</code><ul>
<li>替换路由，不会向历史记录中添加，相当于HTML5的history的API替换路由方法</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/11/22/Vue/Vue基本用法/" data-id="cjvlw5blq005nxfq3xftnk8t7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-React/React.Children用法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/13/React/React.Children用法/" class="article-date">
  <time datetime="2016-11-13T14:03:54.000Z" itemprop="datePublished">2016-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/13/React/React.Children用法/">React.Children 用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="React-Children"><a href="#React-Children" class="headerlink" title="React.Children"></a>React.Children</h1><p><code>React.Children</code> 为处理 <code>this.props.children</code> 的未知数据结构提供了解决方法。</p>
<ul>
<li>任何东西都能是一个<code>child</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Row</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Row</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Row</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>React中的 <code>Children</code> 不一定是组件，它们可以使任何东西。例如，我们能够直接将文字作为 children 传递我们的 <code>&lt;Grid /&gt;</code> 组件。<br>JSX将会自动删除每行开头和结尾的空格，以及空行。它还会把字符串中间的空白行压缩为一个空格。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Grid</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们能够传递任何的 <code>JavaScript表达式</code> 作为children，包括函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Executioner</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="comment">// See how we're calling the child as a function?</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以像下面这样使用上面的组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Executioner&gt;</span><br><span class="line">  &#123;() =&gt; <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>&#125;</span><br><span class="line">&lt;<span class="regexp">/Executioner&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="React-Children-map"><a href="#React-Children-map" class="headerlink" title="React.Children.map"></a>React.Children.map</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">React.Children.map(<span class="keyword">this</span>.props.children, <span class="function"><span class="keyword">function</span> (<span class="params">child</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">this</span>.props.children.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">child</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>需要注意， <code>this.props.children</code> 的值有三种可能：如果当前组件没有子节点，它就是 <code>undefined</code>；如果有一个子节点，数据类型是 <code>object</code>；如果有多个子节点，数据类型就是 <code>array</code>。所以，处理 <code>this.props.children</code> 的时候要小心。</p>
<p><code>React</code> 提供一个工具方法 <code>React.Children</code> 来处理 <code>this.props.children</code>。我们可以用 <code>React.Children.map</code> 来遍历子节点，而不用担心 <code>this.props.children</code> 的数据类型是 <code>undefined</code> 还是<code>object</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;NotesList&gt;</span><br><span class="line">   &lt;span&gt;hello&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">   &lt;span&gt;hello&lt;/</span>span&gt;</span><br><span class="line">&lt;<span class="regexp">/NotesList&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/返回两个子节点</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;NotesList&gt;&lt;/</span>NotesList&gt;</span><br><span class="line"><span class="comment">//返回undefined</span></span><br><span class="line"></span><br><span class="line">&lt;NotesList&gt;<span class="literal">null</span>&lt;<span class="regexp">/NotesList&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/返回null</span></span><br></pre></td></tr></table></figure>
<h2 id="React-Children-forEach"><a href="#React-Children-forEach" class="headerlink" title="React.Children.forEach"></a>React.Children.forEach</h2><p><code>React.Children.forEach(children, function [(this.Arg)])</code></p>
<p>类似于 <code>React.Children.map()</code>，但是不返回对象。</p>
<h2 id="React-Children-count"><a href="#React-Children-count" class="headerlink" title="React.Children.count"></a>React.Children.count</h2><p>number <code>React.Children.count(children)</code></p>
<p>返回 <code>children</code> 当中的组件总数，和传递给 <code>map</code> 或者 <code>forEach</code> 的回调函数的调用次数一致。</p>
<h2 id="React-Children-only"><a href="#React-Children-only" class="headerlink" title="React.Children.only"></a>React.Children.only</h2><p>object <code>React.Children.only(children)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上面的 &lt;Executioner /&gt; 组件，它只能在传递单一child的情况下使用，而且child必须为函数。可以像下面这么写</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Executioner</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> React.Children.only(<span class="keyword">this</span>.props.children)()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返回 <code>children</code> 中 仅有的子级。否则抛出异常。</p>
<p>这里仅有的子级，only 方法接受的参数只能是一个对象，不能是多个对象（数组）。</p>
<h2 id="实际应用（编辑-children-）"><a href="#实际应用（编辑-children-）" class="headerlink" title="实际应用（编辑 children ）"></a>实际应用（编辑 children ）</h2><p>我们可以将任意的组件呈现为 children ，但是仍然可以用父组件去控制它们，而不是用渲染的组件。为了说明这点，让我们举例一个能够拥有很多 <code>RadioButton</code> 组件的 <code>RadiaGroup</code> 组件。</p>
<p><code>RadioButton</code> 不会从 <code>RadioGroup</code> 本身上进行渲染，它们只是作为 children 使用。这意味着我们将会有这样的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span>(</span><br><span class="line">    &lt;RadioGroup&gt;</span><br><span class="line">      &lt;RadioButton value=<span class="string">"first"</span>&gt;First&lt;<span class="regexp">/RadioButton&gt;</span></span><br><span class="line"><span class="regexp">      &lt;RadioButton value="second"&gt;Second&lt;/</span>RadioButton&gt;</span><br><span class="line">      &lt;RadioButton value=<span class="string">"third"</span>&gt;Third&lt;<span class="regexp">/RadioButton&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>RadioGroup&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了把 <code>input</code> 标签弄到同组，必须拥有相同的 <code>name</code> 属性。当然我们可以直接给每个RadioButton 的 <code>name</code> 赋值，但是这个是无聊的并且容易出错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;RadioGroup&gt;</span><br><span class="line">  &lt;RadioButton name=<span class="string">"g1"</span> value=<span class="string">"first"</span>&gt;First&lt;<span class="regexp">/RadioButton&gt;</span></span><br><span class="line"><span class="regexp">  &lt;RadioButton name="g1" value="second"&gt;Second&lt;/</span>RadioButton&gt;</span><br><span class="line">  &lt;RadioButton name=<span class="string">"g1"</span> value=<span class="string">"third"</span>&gt;Third&lt;<span class="regexp">/RadioButton&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>RadioGroup&gt;</span><br></pre></td></tr></table></figure>
<h3 id="改变-children-属性"><a href="#改变-children-属性" class="headerlink" title="改变 children 属性"></a>改变 children 属性</h3><p>在RadioGroup 中我们将会添加一个叫做 <code>renderChildren</code> 的方法，在这里我们编辑children的属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RadioGroup</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="comment">// Bind the method to the component context</span></span><br><span class="line">    <span class="keyword">this</span>.renderChildren = <span class="keyword">this</span>.renderChildren.bind(<span class="keyword">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  renderChildren() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Change the name prop of all children</span></span><br><span class="line">    <span class="comment">// to this.props.name</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"group"</span>&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.renderChildren()&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>那么如何编辑它们的属性呢？</p>
<h3 id="永恒地克隆元素"><a href="#永恒地克隆元素" class="headerlink" title="永恒地克隆元素"></a>永恒地克隆元素</h3><p><code>React.cloneElement</code> 会克隆一个元素。我们将想要克隆的元素当作第一个参数，然后将想要设置的属性以对象的方式作为第二个参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">renderChildren() &#123;</span><br><span class="line">  <span class="keyword">return</span> React.Children.map(<span class="keyword">this</span>.props.children, child =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> React.cloneElement(child, &#123;</span><br><span class="line">      name: <span class="keyword">this</span>.props.name</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后一步就是传递一个唯一的 <code>name</code> 给RadioGroup</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;RadioGroup name=<span class="string">"g1"</span>&gt;</span><br><span class="line">  &lt;RadioButton value=<span class="string">"first"</span>&gt;First&lt;<span class="regexp">/RadioButton&gt;</span></span><br><span class="line"><span class="regexp">  &lt;RadioButton value="second"&gt;Second&lt;/</span>RadioButton&gt;</span><br><span class="line">  &lt;RadioButton value=<span class="string">"third"</span>&gt;Third&lt;<span class="regexp">/RadioButton&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>RadioGroup&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/11/13/React/React.Children用法/" data-id="cjvlw5blj005cxfq3tcd71r82" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Git/git与github详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/19/Git/git与github详解/" class="article-date">
  <time datetime="2016-10-18T22:15:17.000Z" itemprop="datePublished">2016-10-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/19/Git/git与github详解/">Git 版本控制工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git-命令"><a href="#Git-命令" class="headerlink" title="Git 命令"></a>Git 命令</h1><p>本文主要介绍 <code>Git</code> 版本控制的部分命令，顺带谈了谈 <code>Github</code> 多人协作以及 <code>hexo</code> 。</p>
<p>Git的几个专有名词：</p>
<ul>
<li>Workspace：工作区</li>
<li>Index / Stage：暂存区</li>
<li>Repository：仓库区（或本地仓库）</li>
<li>Remote：远程仓库</li>
</ul>
<h2 id="git-初始化-amp-vi-命令-amp-cmd"><a href="#git-初始化-amp-vi-命令-amp-cmd" class="headerlink" title="git 初始化 &amp; vi 命令 &amp; cmd"></a>git 初始化 &amp; vi 命令 &amp; cmd</h2><ul>
<li>初始化git配置(github的邮箱和用户名)<ul>
<li><code>git config --global user.email &quot;you@example.com&quot;</code></li>
<li><code>git config --global user.name &quot;your name&quot;</code></li>
<li><code>git config --list</code> (查看 git 配置信息)</li>
<li><code>git config --global --list</code> (查看 git 全局配置信息)</li>
</ul>
</li>
<li>Git 是一个分布式版本控制软件，保存历史记录，多人协作</li>
<li>相对于 SVN 更强大，用户非常多</li>
<li>nice 查看模式 (:)<ul>
<li>通过上下箭头键查看过长日志</li>
<li><strong>想要退出模式按下字母Q</strong></li>
</ul>
</li>
<li>vi编辑模式(Visual Interface可视化接口)<ul>
<li><strong>vi 文件名(或者vim 文件名)</strong>：进入文件编辑区域</li>
<li><strong>vi默认是命令模式，输入 <code>u</code> 可以撤销， <code>ctr+r</code> 表示恢复撤销</strong></li>
<li>输入 <code>i</code> 表示 insert ，可以进入编辑模式</li>
<li><code>Esc</code>：退出编辑模式</li>
<li><code>:w 回车</code>：保存</li>
<li><code>:q</code>：退出</li>
<li><code>:q!</code>：修改后不保存，强制退出</li>
<li>输入 <code>:wq</code> 表示编辑完毕保存并退出</li>
</ul>
</li>
<li>cmd 命令：<code>dir</code> 查看当前目录所有文件</li>
</ul>
<h2 id="git-操作"><a href="#git-操作" class="headerlink" title="git 操作"></a>git 操作</h2><ul>
<li><code>ls</code>：查看当前目录所有文件</li>
<li><code>ls -a</code>：查看所有文件，包括隐藏文件</li>
<li><code>cd ~</code>：返回到当前用户目录</li>
<li><code>cd ..</code>：必须空格..才能返回上级目录</li>
<li><code>mkdir 『文件夹名』</code>：创建一个文件夹</li>
<li><code>mkdir 『文件夹名』 &amp;&amp; cd 『文件夹名』</code>：新建并进入该文件夹</li>
<li><code>mv 『目录1』 『目录2』</code>：移动一个目录到另一个目录下，如果目录2不存在则重命名目录1为目录2</li>
<li><code>rmdir 『空文件夹名』</code>：删除一个空文件夹</li>
<li><code>rm 『文件名』</code>：删除指定文件</li>
<li><code>rm -r 『文件夹名』</code>：递归删除指定文件夹文件</li>
<li><code>rm -rf 『文件夹名』</code>：<code>rm</code> 表示删除， <code>-rf</code> 表示递归强制删除指定文件夹</li>
<li><code>pwd(Print Working Directory)</code>：显示当前工作目录</li>
</ul>
<h3 id="git-初始化代码库"><a href="#git-初始化代码库" class="headerlink" title="git 初始化代码库"></a>git 初始化代码库</h3><ul>
<li><code>git init</code>：在当前目录下初始化一个 git 仓库，创建版本管理仓库</li>
<li><code>git init 『project-name』</code>：创建一个目录同时初始化为Git代码库</li>
<li><code>git clone 『url』</code>：下载一个项目和它的整个代码历史</li>
<li><code>git clone -o 『anothername』 『url』</code>：克隆版本库同时修改默认 origin 别名</li>
<li><code>git clone -b 『branchname』 『url』</code>：克隆远程仓库某个分支</li>
<li><code>git clone -b 『branchname』 『url』 『本地目录名』</code>：在本地目录克隆远程仓库某个分支，如果没有该目录则新建</li>
</ul>
<h3 id="git-配置"><a href="#git-配置" class="headerlink" title="git 配置"></a>git 配置</h3><ul>
<li><code>git config -l [--glbal]</code>：显示当前的Git配置【全局配置】</li>
<li><code>git config -e [--global]</code>：编辑Git配置文件【全局配置文件】</li>
<li>设置提交代码时的用户信息<ul>
<li><code>git config [--global] user.name 『name』</code></li>
<li><code>git config [--global] user.email 『email address』</code></li>
</ul>
</li>
</ul>
<h3 id="git-查看状态-提交暂存区-提交本地仓库并创建提交日志"><a href="#git-查看状态-提交暂存区-提交本地仓库并创建提交日志" class="headerlink" title="git 查看状态/提交暂存区/提交本地仓库并创建提交日志"></a>git 查看状态/提交暂存区/提交本地仓库并创建提交日志</h3><ul>
<li><code>git status</code>：查看仓库状态，是否有改动后未提交的文件(工作区)，不跟着空目录，除非在目录下新建 <code>.gitkeep</code> 文件</li>
<li><code>git add 『file1』 『file2』 ...</code>：添加指定文件到暂存区</li>
<li><code>git add 『file路径』</code>：将文件提交到暂存区<ul>
<li><code>git add file1 file2</code></li>
<li><code>git add .</code></li>
<li><code>git add --all</code></li>
<li><code>git add -A</code></li>
</ul>
</li>
<li><code>git rm 『file1』 『file2』 ...</code>：删除工作区文件，并且将这次删除放入暂存区</li>
<li><code>git rm --cached 『file』</code>：从暂存区中取消要提交的文件（停止追踪指定文件），但文件会保留在工作区</li>
<li><code>git rm --cached -r js/</code>：移除目录必须添加 <code>-r</code> 参数，表示递归移除</li>
<li><code>git mv 『file-original』 『file-renamed』</code>：改名文件，并且将这个改名放入暂存区</li>
</ul>
<h4 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h4><p>在 git 中删除文件后有两个选择:</p>
<ol>
<li>确实要从版本库中删除该文件，那就用命令 <code>git rm</code> 删掉，并且 <code>git commit</code></li>
<li>删错了，因为版本库里还有呢，所以可以很轻松地把误删的文件恢复到最新版本 (<code>git checkout -- 『file』</code>)</li>
<li><code>git checkout</code> 其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。</li>
<li>命令 <code>git rm</code> 用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失最近一次提交后你修改的内容。</li>
</ol>
<h4 id="git-代码提交本地仓库并创建提交日志"><a href="#git-代码提交本地仓库并创建提交日志" class="headerlink" title="git 代码提交本地仓库并创建提交日志"></a>git 代码提交本地仓库并创建提交日志</h4><ul>
<li><code>git commit -m &#39;xxx&#39;</code>：提交到本地仓库并创建提交日志(必须初始化 git 配置)</li>
<li><code>git commit 『file』 -m &#39;xxx&#39;</code>：指定文件提交到本地仓库并创建提交日志</li>
<li><code>git commit -a</code>：会先把所有已经track的文件的改动<code>git add</code>进来，然后提交(有点像svn的一次提交,不用先暂存)。对于没有track的文件,还是需要执行<code>git add &lt;file&gt;</code> 命令</li>
<li><code>git commit --amend -m 『message』</code>：使用一次新的 commit ，替代上一次提交(修改上一次提交日志)</li>
<li><code>git commit --amend 『file1』 『file2』...</code>：重置上一次 commit ，并包括指定文件的新变化，如果你上一次提交忘了某个文件，可以通过该方式把指定文件和上一次提交合并之后作为一次提交</li>
</ul>
<h4 id="将文件添加到-git-版本库"><a href="#将文件添加到-git-版本库" class="headerlink" title="将文件添加到 git 版本库"></a>将文件添加到 git 版本库</h4><p>git 版本控制系统分为工作区 (working directory) 和版本库 (repository)</p>
<p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage (或者叫index) 的暂存区，还有 Git 为我们自动创建的第一个分支 master，以及指向 master 的一个指针叫 HEAD</p>
<ol>
<li>用<code>git add</code>把文件添加进去，实际上就是把文件修改添加到暂存区</li>
<li>用<code>git commit</code>提交更改，实际上就是把暂存区的所有内容提交到当前分支</li>
</ol>
<p>我们创建 Git 版本库时， Git 自动为我们创建了唯一一个 master 分支，所以，现在， commit 就是往 master 分支上提交更改。</p>
<p>简单理解为，需要提交的文件修改统统放到暂存区，然后，一次性提交暂存区的所有修改</p>
<h3 id="git-查看提交信息"><a href="#git-查看提交信息" class="headerlink" title="git 查看提交信息"></a>git 查看提交信息</h3><ul>
<li><code>git log</code>：查看提交日志(显示永不重复的版本号)</li>
<li><code>git log --pretty=oneline</code>：在一行显示提交日志</li>
<li><code>gitk</code>：查看提交日志的图形化界面</li>
<li><code>git diff</code>：显示暂存区和工作区的差异</li>
<li><code>git diff 『file』</code>：查看文件修改</li>
<li><code>git diff -w 『file』</code>：查看代码自动合并状况</li>
<li><code>git diff --cached 『file』</code>：显示暂存区和上一个 commit 的差异</li>
<li><code>git diff HEAD</code>：显示工作区与当前分支最新 commit 之间的差异</li>
<li><code>git diff HEAD -- 『file』</code>：查看工作区和版本库里面最新版本文件的区别</li>
</ul>
<h4 id="git-查看各个分支之间的关系图"><a href="#git-查看各个分支之间的关系图" class="headerlink" title="git 查看各个分支之间的关系图"></a>git 查看各个分支之间的关系图</h4><ol>
<li>使用 git log 命令</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> --graph --decorate --oneline --simplify-by-decoration --all</span><br><span class="line">说明：</span><br><span class="line"></span><br><span class="line">--decorate 标记会让git <span class="built_in">log</span>显示每个commit的引用(如:分支、tag等)</span><br><span class="line"></span><br><span class="line">--oneline 一行显示</span><br><span class="line"></span><br><span class="line">--simplify-by-decoration 只显示被branch或tag引用的commit</span><br><span class="line"></span><br><span class="line">--all 表示显示所有的branch，这里也可以选择，比如我指向显示分支ABC的关系，则将--all替换为branchA branchB branchC</span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit --&gt; 查看分支合并情况</span><br></pre></td></tr></table></figure>
<ol>
<li>使用 gitk 工具</li>
</ol>
<p><code>gitk --simplify-by-decoration --all</code></p>
<h3 id="git-分支操作"><a href="#git-分支操作" class="headerlink" title="git 分支操作"></a>git 分支操作</h3><ul>
<li><code>git branch</code>：列出所有本地分支</li>
<li><code>git branch -r</code>：列出所有远程分支</li>
<li><code>git branch -a</code>：列出所有本地和远程分支</li>
<li><code>git branch -vv</code>：查看所有本地分支并列出该分支最新的一次 commit</li>
<li><code>git branch 『branch-name』</code>：基于当前分支创建一个新分支，仍然停留在当前分支(主分支最起码要有一次提交，才能基于主分支创建新分支)</li>
<li><code>git branch -m[-M] 『old-branch-name』 『new-branch-name』</code>: 修改本地分支的名字（-M 表示强制更改）</li>
<li><code>git branch 『branch-name』 『commit』</code>：新建一个分支，指向指定 commit</li>
<li><code>git branch --track 『branch-name』 『remote-branch-name』</code>：新建一个分支，并与指定的远程分支建立追踪关系</li>
<li><code>git checkout -b 『branch-name』 (remote)/(branch)</code>：在本地创建一个分支跟踪远程分支</li>
<li><code>git checkout -b 『branch-name』</code>：基于当前分支新建一个分支并切换到该分支</li>
<li><code>git checkout 『branch-name』</code>：切换到指定分支，并更新工作区</li>
<li><code>git checkout -</code>：在最近的两个分支之间切换</li>
<li><code>git merge 『branch-name』</code>：<strong><em> 将指定分支合并到当前分支 </em></strong></li>
<li><code>git cherry-pick 『commit』</code>：选择一个commit，合并到当前分支</li>
<li><code>git branch -d 『branch-name』</code>：删除分支(注意：必须在删除的分支之外才行)</li>
<li><code>git show [branch-name]</code>：可以看出分支上的递交状况</li>
</ul>
<h4 id="git-删除不存在对应远程分支的本地分支"><a href="#git-删除不存在对应远程分支的本地分支" class="headerlink" title="git 删除不存在对应远程分支的本地分支"></a>git 删除不存在对应远程分支的本地分支</h4><ul>
<li><code>git remote show origin</code>：查看远程仓库详细信息，看到远程分支后面<code>stale</code>标记的，说明已经不需要了</li>
<li><code>git remote prune origin</code>：删除没有与远程分支对应的本地分支</li>
</ul>
<h4 id="分支的-upstream"><a href="#分支的-upstream" class="headerlink" title="分支的 upstream"></a>分支的 upstream</h4><ul>
<li><code>git branch --set-upstream master origin/next</code>：手动建立追踪关系，指定 master 分支追踪 origin/next 分支(已过时)</li>
<li><code>git branch --set-upstream-to=origin/dev 『本地分支名』</code>：为指定分支设置 upstream 追踪远程 origin/dev 分支，如果省略本地分支名，则默认设置当前分支</li>
<li><code>git branch --unset-upstream</code>：取消当前分支的 upstream</li>
<li><code>git branch --unset-upstream [分支名]</code>：取消其他分支的 upstream</li>
</ul>
<h5 id="查看-upstream-信息，主要是查看仓库目录下-git-config-文件"><a href="#查看-upstream-信息，主要是查看仓库目录下-git-config-文件" class="headerlink" title="查看 upstream 信息，主要是查看仓库目录下 .git/config 文件"></a>查看 upstream 信息，主要是查看仓库目录下 <code>.git/config</code> 文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/config</span><br><span class="line">[core]</span><br><span class="line">  repositoryformatversion = 0</span><br><span class="line">  filemode = <span class="literal">true</span></span><br><span class="line">  bare = <span class="literal">false</span></span><br><span class="line">  logallrefupdates = <span class="literal">true</span></span><br><span class="line">  ignorecase = <span class="literal">true</span></span><br><span class="line">  precomposeunicode = <span class="literal">true</span></span><br><span class="line">[branch <span class="string">"optimize_tab"</span>]</span><br><span class="line">[remote <span class="string">"meiqia"</span>]</span><br><span class="line">  url = git@git.meiqia.com:crm_platform/crm_web_workbench.git</span><br><span class="line">  fetch = +refs/heads/*:refs/remotes/meiqia/*</span><br><span class="line">[remote <span class="string">"myself"</span>]</span><br><span class="line">  url = git@git.meiqia.com:hushijin/crm_web_workbench.git</span><br><span class="line">  fetch = +refs/heads/*:refs/remotes/myself/*</span><br><span class="line">[branch <span class="string">"master"</span>]</span><br><span class="line">  remote = meiqia</span><br><span class="line">  merge = refs/heads/master</span><br><span class="line">[branch <span class="string">"hotfix"</span>]</span><br><span class="line">  remote = meiqia</span><br><span class="line">  merge = refs/heads/hotfix</span><br><span class="line">[branch <span class="string">"develop"</span>]</span><br><span class="line">  remote = meiqia</span><br><span class="line">  merge = refs/heads/develop</span><br></pre></td></tr></table></figure>
<p>其中[branch “分支名”]下的信息就是 upstream 信息，remote 项表示 upstream 的远程仓库名，merge 项表示远程跟踪分支名。</p>
<p>也可以通过 git remote show origin 查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git remote show origin</span><br><span class="line">* remote origin</span><br><span class="line">  Fetch URL: git@git.meiqia.com:crm_platform/crm_web_workbench.git</span><br><span class="line">  Push  URL: git@git.meiqia.com:crm_platform/crm_web_workbench.git</span><br><span class="line">  HEAD branch: develop</span><br><span class="line">  Remote branches:</span><br><span class="line">    develop     tracked</span><br><span class="line">    hotfix      tracked</span><br><span class="line">    master      tracked</span><br><span class="line">  Local branches configured <span class="keyword">for</span> <span class="string">'git pull'</span>:</span><br><span class="line">    develop   merges with remote develop</span><br><span class="line">    hotfix    merges with remote hotfix</span><br><span class="line">    master    merges with remote master</span><br><span class="line">  Local refs configured <span class="keyword">for</span> <span class="string">'git push'</span>:</span><br><span class="line">    develop   pushes to develop  (up to date)</span><br><span class="line">    hotfix    pushes to hotfix   (up to date)</span><br><span class="line">    master    pushes to master   (<span class="built_in">local</span> out of date)</span><br></pre></td></tr></table></figure>
<p>Remote branches表示远程仓库的分支，git pull表示upstream跟踪分支。</p>
<h4 id="git-基于远程分支创建新的本地分支"><a href="#git-基于远程分支创建新的本地分支" class="headerlink" title="git 基于远程分支创建新的本地分支"></a>git 基于远程分支创建新的本地分支</h4><ul>
<li>基于远程分支无污染创建本地分支：<code>git fetch origin hotfix</code> &amp; <code>git checkout -b chief_fix FETCH_HEAD</code>，将线上分支的 HEAD 指向本地分支</li>
<li>或者 <code>git fetch origin hotfix</code> &amp; <code>git checkout -b chief_fix origin/hotfix</code>，效果与上面一致</li>
</ul>
<h3 id="git-衍合"><a href="#git-衍合" class="headerlink" title="git 衍合"></a>git 衍合</h3><ul>
<li><a href="http://blog.csdn.net/d6619309/article/details/52711035" target="_blank" rel="noopener">Your branch and ‘origin/xxx’ have diverged</a></li>
<li><code>git rebase</code>: 解决 git 分支出现分叉的状况，在 rebase 的过程中如果遇到冲突就解决冲突，然后 <code>git add 冲突的文件</code>，标识冲突解决，然后再执行 <code>git rebase --continue</code> (注意 <code>git add</code> 之后不要执行 <code>git commit</code>)</li>
<li><code>git pull</code>衍合会合并保留双方分叉提交并形成一个新的提交，<code>git rebase</code>衍合会合并保留双方提交，使之看起来像没有经过任何合并一样。</li>
</ul>
<h3 id="git-远程同步-拉取"><a href="#git-远程同步-拉取" class="headerlink" title="git 远程同步(拉取)"></a>git 远程同步(拉取)</h3><ul>
<li><code>git remote add 『shortname』 『url』</code>：指定你要 push 提交到的远端仓库别名和地址(增加一个新的远端仓库)</li>
<li><code>git remote rm 『shortname』</code>：根据别名删除指定的远程仓库</li>
<li><code>git remote rename 『old name』 『new name』</code>：修改远程仓库别名</li>
<li>第一次使用Git的clone或者push命令连接GitHub时，会得到一个警告：<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013752340242354807e192f02a44359908df8a5643103a000" target="_blank" rel="noopener">SSH警告</a></li>
<li><code>git pull 『remote』 『remote-branch-name』:『branch-name』</code>：取回远程仓库某个分支的更新，与本地分支合并，如果远程分支与当前分支合并则可以省略冒号后面的部分</li>
<li><code>git pull 『origin』 『next』</code>：取回 origin/next 分支，再与当前分支合并.实质上，这等同于先做 <code>git fetch</code> ，再做 <code>git merge</code><ul>
<li><code>git fetch origin next</code></li>
<li><code>git merge origin/next</code> 或者 <code>git rebase origin/next</code>：在本地分支 next 上合并远程 next 分支</li>
</ul>
</li>
<li><code>git pull origin</code>：本地的当前分支自动与对应的 origin 主机“追踪分支” (remote-tracking branch) 进行合并，如果当前分支只有一个追踪分支，连远程主机名都可以省略</li>
<li><code>git pull</code>：如果当前分支只有一个追踪分支，连远程主机名都可以省略.当前分支自动与唯一一个追踪分支进行合并</li>
<li><code>git pull --rebase &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</code>：如果合并需要采用 <code>rebase</code> 模式，可以使用 –-rebase 选项</li>
<li><code>git pull --rebase</code>：表示把你的本地当前分支里的每个提交(commit)取消掉，并且把它们临时保存为补丁(patch)(这些补丁放到 “.git/rebase” 目录中),然后把本地当前分支更新为最新的 “origin” 分支，最后把保存的这些补丁应用到本地当前分支上</li>
</ul>
<h4 id="推荐使用-fetch-merge-代替-pull"><a href="#推荐使用-fetch-merge-代替-pull" class="headerlink" title="推荐使用 fetch + merge 代替 pull"></a>推荐使用 fetch + merge 代替 pull</h4><ul>
<li><code>git fetch 『远程主机名』</code>：将某个远程主机所有分支的更新全部取回本地，但是不会自动 merge</li>
<li><code>git fetch 『远程主机名』 『分支名』</code>：取回特定分支的更新</li>
<li><code>git fetch origin master</code>：所取回的更新，在本地主机上要用”远程主机名/分支名”的形式读取。比如origin主机的master，就要用origin/master读取。即合并远程分支更新到本地分支 <code>git merge origin/master</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin master</span><br><span class="line">git <span class="built_in">log</span> -p master..origin/master</span><br><span class="line">git merge origin/master</span><br><span class="line">以上命令的含义：</span><br><span class="line">    首先从远程的origin的master主分支下载最新的版本到origin/master分支上</span><br><span class="line">    然后比较本地的master分支和origin/master分支的差别</span><br><span class="line">    最后进行合并</span><br><span class="line">上述过程其实可以用以下更清晰的方式来进行：</span><br><span class="line">    git fetch origin master:tmp</span><br><span class="line">    git diff tmp</span><br><span class="line">    git merge tmp</span><br><span class="line">从远程获取最新的版本到本地的tmp分支上</span><br><span class="line">之后再进行比较合并</span><br></pre></td></tr></table></figure>
<h3 id="git-远程操作-推送"><a href="#git-远程操作-推送" class="headerlink" title="git 远程操作(推送)"></a>git 远程操作(推送)</h3><ul>
<li><code>git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</code>：推送本地分支到远程仓库</li>
<li><code>git push</code>：仅限于 <code>git clone</code> 下来的项目，它会默认创建一个 remote ，名字叫 origin ，所以可以直接 <code>git push</code> ，不需要指定后面的 origin 别名</li>
<li><code>git remote add 『name』 『url』</code>：添加远端仓库地址并起一个别名</li>
<li><code>git remote</code>：查看所有远端地址，默认只能看到别名</li>
<li><code>git remote -v</code>：查看所有远端地址详情</li>
<li><code>git remote show 『远端地址别名』</code>：查看某个具体的远端地址</li>
<li><code>git remote show origin</code>：查看 origin 远程仓库的所有信息，其中 Remote branches 表示远程仓库的分支， <code>git pull</code> 表示 upstream 跟踪分支</li>
<li><code>git remote rm 『远端主机别名』</code>：删除远程主机(仓库)</li>
<li><code>git remote rename 『原主机名』 『新主机名』</code>：重命名远程主机名</li>
<li><code>git push 『远端地址别名』 『要提交到的分支名称』</code>：提交到对应仓库，如果远端没有对应的分支，则新建该分支</li>
<li><code>git push -u 『remote』 『branch』</code>：把本地仓库推送到远端仓库， 加上了 <code>-u</code> 参数， Git 不但会把本地的分支内容推送到远程新的分支，还会把本地分支和远程分支关联起来，在以后的推送或者拉取时就可以简化命令</li>
<li><code>git push -u origin master</code>：该命令和下一条命令功能一致</li>
<li><code>git push --set-upstream origin master</code>：记住当前的远端地址别名并提交，下次提交可以直接 <code>git push</code></li>
</ul>
<h4 id="git-删除远程分支"><a href="#git-删除远程分支" class="headerlink" title="git 删除远程分支"></a>git 删除远程分支</h4><ul>
<li><code>git branch -dr 『remote/branch』</code>：删除远程分支与本地分支的跟踪关系</li>
<li><code>git push --delete origin 『branch』</code>：删除远程分支</li>
<li><code>git push origin :&lt;branchName&gt;</code>：推送一个空分支到远程分支，相当于删除远程分支</li>
</ul>
<h3 id="git-撤销-版本回退"><a href="#git-撤销-版本回退" class="headerlink" title="git 撤销/版本回退"></a>git 撤销/版本回退</h3><ul>
<li><code>git checkout 『file』</code>：恢复暂存区的指定文件到工作区</li>
<li><code>git checkout master(master~1/master~2) 『file』</code>：将当前分支工作区恢复到master分支当前/前一个/前两个commit版本并暂存，可以提交并推送到远程仓库</li>
<li><code>git checkout -- 『file』</code>：丢弃工作区修改，恢复到最近一次 <code>git commit</code> 或 <code>git add</code> 状态. 这里有两种情况:<ol>
<li>一种是 file 自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态</li>
<li>一种是 file 已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态</li>
<li><code>git checkout -- file</code> 命令中的 <code>--</code> 很重要，没有 <code>--</code> ，就变成了“切换到另一个分支”的命令</li>
</ol>
</li>
<li><code>git checkout 『commit』 『file』</code>：恢复某个 commit 的指定文件到暂存区和工作区 <code>git checkout (7位commit字母) 『file』</code></li>
<li><code>git checkout .</code>：放弃暂存区的文件修改，恢复到工作区初始状态</li>
<li><code>git reset 『file』</code>：重置<strong>暂存区</strong>的指定文件，与上一次 commit 保持一致，但工作区不变</li>
<li><code>git reset HEAD file</code>：可以把暂存区的修改撤销掉 (unstage) ，重新放回工作区，工作区内容不变</li>
<li><code>git reset --soft HEAD^</code>：回滚到HEAD之前最近的一次提交，工作区不作任何改变</li>
<li><code>git reset --hard HEAD^</code>：HEAD 表示当前版本， <code>HEAD^</code> 与 <code>HEAD^^</code> ， 版本回退太多采用 <code>HEAD~100</code></li>
<li><code>git reset --hard</code>：重置暂存区与工作区，与上一次 commit 保持一致</li>
<li><code>git reset 『commit』</code>：重置当前分支的指针为指定 commit ，同时重置暂存区，但工作区不变</li>
<li><code>git reset --hard 『commit』</code>：重置当前分支的 <code>HEAD</code> 为指定 commit ，同时重置暂存区和工作区，与指定commit一致</li>
<li><code>git reset --keep 『commit』</code>：重置当前 <code>HEAD</code> 为指定 commit ，但保持暂存区和工作区不变</li>
<li><code>git revert 『commit』</code>：生成一次新的 commit，需要填写提交注释，会撤销指定 commit，后者的所有变化都将被前者抵消，并且应用到当前分支</li>
<li><code>git reflog</code>：用来记录你的每一次命令</li>
<li><code>git stash</code>：暂时将为提交的变化移除，稍后再移入</li>
<li><code>git stash pop</code></li>
</ul>
<h4 id="git-撤销修改总结"><a href="#git-撤销修改总结" class="headerlink" title="git 撤销修改总结"></a>git 撤销修改总结</h4><ol>
<li><code>场景1：</code>当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令 <code>git checkout -- file</code> 。</li>
<li><code>场景2：</code>当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令 <code>git reset HEAD file</code> ，就回到了场景1，第二步按场景1操作。</li>
<li><code>场景3：</code>已经提交了不合适的修改到版本库时，想要撤销本次提交，参考下面的版本回退总结，不过前提是没有推送到远程库。</li>
</ol>
<h4 id="git-版本回退总结"><a href="#git-版本回退总结" class="headerlink" title="git 版本回退总结"></a>git 版本回退总结</h4><ul>
<li>HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令 <code>git reset --hard commit_id</code> 。</li>
<li>穿梭前，用 <code>git log</code> 可以查看提交历史，以便确定要回退到哪个版本。</li>
<li>要重返未来，用 <code>git reflog</code> 查看命令历史，以便确定要回到未来的哪个版本。</li>
</ul>
<h3 id="git-代码冲突常见解决方法"><a href="#git-代码冲突常见解决方法" class="headerlink" title="git 代码冲突常见解决方法"></a>git 代码冲突常见解决方法</h3><blockquote>
<p>error: Your local changes to the following files would be overwritten by merge: protected/config/main.php<br>Please, commit your changes or stash them before you can merge.</p>
</blockquote>
<ul>
<li>如果希望保留生产服务器上所做的改动，仅仅并入新配置项， 处理方法如下:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br><span class="line">git pull</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>
<p>然后可以使用 <code>git diff -w +文件名</code> 来确认代码自动合并的情况.</p>
<p>反过来，如果希望用代码库中的文件完全覆盖本地工作版本. 方法如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>
<h3 id="分支策略-Git-flow"><a href="#分支策略-Git-flow" class="headerlink" title="分支策略 Git flow"></a>分支策略 Git flow</h3><ul>
<li>在项目中长期存在两个分支： master 和 develop</li>
<li>日常开发基于 develop 分支创建三个临时分支<ol>
<li>功能分支：feature-功能名称，完成开发合并到 develop 分支后删除该分支</li>
<li>预发布分支：release-版本号，测试完成后合并到 develop 和 master 分支后删除该分支</li>
<li>修补bug分支：fixbug-名称，该分支是从 master 分支上面分出来的，修补结束后再合并到 master 和 develop 分支，最后删除该分支</li>
</ol>
</li>
</ul>
<h2 id="git-每次-clone-pull-push-都要输入密码解决方案"><a href="#git-每次-clone-pull-push-都要输入密码解决方案" class="headerlink" title="git 每次 clone/pull/push 都要输入密码解决方案"></a>git 每次 clone/pull/push 都要输入密码解决方案</h2><ol>
<li>进入项目路径下</li>
<li>输入 <code>git config --global credential.helper store</code></li>
<li>然后，打开<code>.gitconfig</code>文件，发现下面代码，以后提交克隆输入一次用户名密码就ok了</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[credential]</span><br><span class="line">    helper = store</span><br></pre></td></tr></table></figure>
<p>如果没解决则可能是 git 开启了双因子控制，通过以下命令解决：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">git remote origin</span><br><span class="line">git remote add origin 你的项目仓库地址</span><br></pre></td></tr></table></figure>
<h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><ul>
<li><code>git push origin 【空格】【冒号】【你的分支名字】</code>: 删除github上的远程分支</li>
<li>Github 可以让你使用社交化的方式进行编程协作，免费在线托管你的仓库，实现多人合作</li>
<li>多人协作<ul>
<li>Pull Request</li>
<li>Collaborators<ul>
<li>项目页面-&gt;Settings-&gt;Collaborators-&gt;添加协作者</li>
<li>协作者会收到一封email，然后点进去收到的邮件同意成为协作者</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="github-pages-配合-hexo"><a href="#github-pages-配合-hexo" class="headerlink" title="github pages 配合 hexo"></a>github pages 配合 hexo</h3><ul>
<li>github 免费提供一个静态资源托管服务</li>
<li>新建一个仓库<ul>
<li>仓库名必须是: 你的 <code>github用户名.github.io</code></li>
</ul>
</li>
</ul>
<h3 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h3><ul>
<li>安装: <code>npm install hexo-cli -g</code><ul>
<li><code>hexo-cli</code>是hexo的命令行模式， <code>CLI = Command Line Interface</code>， 官网推荐用户只安装一个 <code>hexo-cli</code> 即可. 在执行<code>hexo init blog</code>和<code>npm install</code>的时候， <code>hexo-cli</code> 会自动安装 <code>hexo</code> 到博客的 <code>node_modules</code> 目录下. 另外， <code>hexo-cli</code> 安装后， 命令行的命令叫做 hexo， 这其实只是一个别名而已……</li>
</ul>
</li>
<li>初始化: <code>hexo init blog</code></li>
<li><code>hexo server</code>: 用于启动服务器， 主要用于本地预览</li>
<li><code>hexo new 文章名称</code>(不用加后缀名.md， 它会自动加)</li>
<li><code>hexo generate</code>: 生产静态文件， 该命令会把所有 md 文件以及其他资源生成到 public 目录中， 生产结束之后可以把 public 丢到一个 web 容器中， 就可以直接访问了， 不需要依赖于 hexo 了</li>
<li>假如以后新增了一篇文章，使用 <code>hexo generate</code> 命令重新生成该目录</li>
</ul>
<h3 id="hexo常用命令-后面是注释"><a href="#hexo常用命令-后面是注释" class="headerlink" title="hexo常用命令(# 后面是注释)"></a>hexo常用命令(# 后面是注释)</h3><ul>
<li><code>hexo g</code>  # 完整命令为 <code>hexo generate</code> ，用于生成静态文件</li>
<li><code>hexo s</code>  # 完整命令为 <code>hexo server</code> ，用于启动服务器， 主要用来本地预览</li>
<li><code>hexo d</code>  # 完整命令为 <code>hexo deploy</code> ，用于将本地文件发布到github上</li>
<li><code>hexo n</code>  # 完整命令为 <code>hexo new</code> ，用于新建一篇文章</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/10/19/Git/git与github详解/" data-id="cjvlw5bng00azxfq397zbduo2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript/JavaScript设计模式（一）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/02/JavaScript/JavaScript设计模式（一）/" class="article-date">
  <time datetime="2016-10-02T11:15:22.000Z" itemprop="datePublished">2016-10-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书笔记/">读书笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/02/JavaScript/JavaScript设计模式（一）/">JavaScript设计模式（一）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="设计模式（一）"><a href="#设计模式（一）" class="headerlink" title="设计模式（一）"></a>设计模式（一）</h1><p>本系列出自于《JavaScript设计模式》一书，本书由张容铭所著，以你问我答的方式逐步介绍了<code>JavaScript</code>的各种设计模式，作者写作方式由浅入深，引人入胜，可读性强。</p>
<h2 id="灵活的语言-JavaScript"><a href="#灵活的语言-JavaScript" class="headerlink" title="灵活的语言-JavaScript"></a>灵活的语言-JavaScript</h2><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>普通函数会在代码执行之前加载到作用域中, 函数名作为全局变量提升到代码最开始执行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">val1, val2</span>) </span>&#123;</span><br><span class="line">    alert(val1 + val2);</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="函数另一种形式"><a href="#函数另一种形式" class="headerlink" title="函数另一种形式"></a>函数另一种形式</h3><p>命名函数, 函数声明会给函数指定一个名字，而函数表达式则是创建一个匿名函数，然后将这个匿名函数赋给一个变量. 函数声明不会提前</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">val1, val2</span>) </span>&#123;</span><br><span class="line">    alert(val1 + val2);</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h3 id="用对象收编变量"><a href="#用对象收编变量" class="headerlink" title="用对象收编变量"></a>用对象收编变量</h3><p>如果定义大量验证函数, 会产生太多全局变量, 在团队开发中, 别人可能会定义相同的方法从而覆盖掉原有的一些验证功能, 很难察觉</p>
<p>所有将验证函数放在一个变量里保存, 减少被覆盖的风险, 如果变量被覆盖, 所有功能失效, 会很明显察觉到</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = &#123;</span><br><span class="line">    checkName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 验证姓名</span></span><br><span class="line">    &#125;,</span><br><span class="line">    checkEmail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 验证邮箱</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="对象的另一种形式"><a href="#对象的另一种形式" class="headerlink" title="对象的另一种形式"></a>对象的另一种形式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.checkName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.checkEmail = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>以上对象无法复制一份, 使用new关键字新建的对象无法继承验证方法</p>
<h3 id="真假对象"><a href="#真假对象" class="headerlink" title="真假对象"></a>真假对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        checkName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">        checkEmail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = CheckObject()</span><br><span class="line">a.checkEmail()</span><br></pre></td></tr></table></figure>
<p>每次执行CheckObject函数都会返回一个新对象, 这样每个人使用时就互不影响了</p>
<h3 id="类也可以"><a href="#类也可以" class="headerlink" title="类也可以"></a>类也可以</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.checkName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.checkEmail = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> CheckObject()</span><br><span class="line">a.checkEmail()</span><br></pre></td></tr></table></figure>
<h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h3><p>新创建的对象都会对类的this上的属性进行复制, 每个新创建的对象都会有自己的一套方法, 这是很奢侈的, 可以用原型处理一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.prototype.checkName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.prototype.checkEmail = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.prototype = &#123;</span><br><span class="line">    checkName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    checkEmail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面两项不能混用, 否则后面会覆盖前面</p>
<h3 id="链式调用"><a href="#链式调用" class="headerlink" title="链式调用"></a>链式调用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = &#123;</span><br><span class="line">    checkName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 验证姓名</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;,</span><br><span class="line">    checkEmail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 验证邮箱</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CheckObject.checkName().checkEmail()</span><br></pre></td></tr></table></figure>
<p>或者使用类的原型对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> CheckObject = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">CheckObject.prototype = &#123;</span><br><span class="line">    checkName: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;,</span><br><span class="line">    checkEmail: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> CheckObject()</span><br><span class="line">a.checkName().checkEmail()</span><br></pre></td></tr></table></figure>
<h3 id="prototype-js"><a href="#prototype-js" class="headerlink" title="prototype.js"></a>prototype.js</h3><p>一款JavaScript框架, 最大特点是对原生对象(如Function Array Object)的拓展</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.checkEmail = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 验证邮件</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数形式调用方法</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">f.checkEmail()</span><br><span class="line"><span class="comment">// 类形式调用方法</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="built_in">Function</span>()</span><br><span class="line">c.checkEmail()</span><br></pre></td></tr></table></figure>
<p>以上方式不允许, 会污染原生对象Function, 导致别人创建的函数也会被你创建的函数污染, 造成不必要的开销, 但你可以抽象出一个统一添加方法的功能方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.addMethod = <span class="function"><span class="keyword">function</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>[name] = fn  <span class="comment">// 变量必须采用中括号获取属性, 不能使用 . 符号</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> methods = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;  <span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">var</span> methods = <span class="keyword">new</span> <span class="built_in">Function</span>()</span><br><span class="line">methods.addMethod(<span class="string">'checkName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 验证姓名</span></span><br><span class="line">&#125;)</span><br><span class="line">methods.addMethod(<span class="string">'checkEmail'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 验证邮箱</span></span><br><span class="line">&#125;)</span><br><span class="line">methods.checkName()</span><br><span class="line">methods.checkEmail()</span><br></pre></td></tr></table></figure>
<h3 id="链式添加-函数式调用"><a href="#链式添加-函数式调用" class="headerlink" title="链式添加(函数式调用)"></a>链式添加(函数式调用)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.addMethod = <span class="function"><span class="keyword">function</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>[name] = fn</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> methods = funciton() &#123;&#125;</span><br><span class="line"><span class="comment">// 链式添加方法</span></span><br><span class="line">methods.addMethod(<span class="string">'checkName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;).addMethod(<span class="string">'checkEmail'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br><span class="line"><span class="comment">// 链式添加每一个验证方法</span></span><br><span class="line">methods.addMethod(<span class="string">'checkName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 验证姓名</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;).addMethod(<span class="string">'checkEmail'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 验证邮箱</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;)</span><br><span class="line">methods.checkName().checkEmail()</span><br></pre></td></tr></table></figure>
<h3 id="换一种方式使用方法-类式调用"><a href="#换一种方式使用方法-类式调用" class="headerlink" title="换一种方式使用方法(类式调用)"></a>换一种方式使用方法(类式调用)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.addMethod = <span class="function"><span class="keyword">function</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.prototype[name] = fn</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Methods = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Methods.addMethod(<span class="string">'checkName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;).addMethod(<span class="string">'checkEmail'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> Methods()</span><br><span class="line">m.checkEmail()</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/10/02/JavaScript/JavaScript设计模式（一）/" data-id="cjvlw5bks003kxfq3wp0p1tux" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Front-end/移动App" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/21/Front-end/移动App/" class="article-date">
  <time datetime="2016-09-21T11:36:23.000Z" itemprop="datePublished">2016-09-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/21/Front-end/移动App/">安卓 WebApp 打包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安卓App打包步骤与遇到的问题"><a href="#安卓App打包步骤与遇到的问题" class="headerlink" title="安卓App打包步骤与遇到的问题"></a>安卓App打包步骤与遇到的问题</h1><ul>
<li>项目依赖环境搭建<ul>
<li>(cordova打包工具) <code>npm install -g cordova</code></li>
<li>(ionic框架) <code>npm install -g ionic</code></li>
</ul>
</li>
<li>创建项目模板<ul>
<li>ionic start myAPP (需要网络好)<ul>
<li>ionic start myAPP blank (空白页)</li>
<li>ionic start myAPP tabs (带tab导航栏)</li>
<li>ionic start myAPP sidemenu (带侧滑菜单)</li>
</ul>
</li>
<li>模板创建完毕后须记得 <code>npm install</code> 安装所有依赖项</li>
</ul>
</li>
<li>模拟器运行<ul>
<li>android <em>ionic emulate android</em></li>
<li>ios <em>ionic emulate ios</em></li>
</ul>
</li>
<li>打包 app<ol>
<li>添加项目平台<ul>
<li>android <em>ionnic platform add android</em><ul>
<li>此处有可能会出现以下错误<ul>
<li>android-sdk 的 platforms 的 android-23 问题<ul>
<li>解决方法: 将 android-6.0 改为 android-23</li>
</ul>
</li>
<li>android SDK Platform 24 问题<ul>
<li>解决方法: 打开 SDK Manager 勾选 android 7.0(API 24) 的 SDK Platfrom 选项并点击右下角 install 安装该包</li>
</ul>
</li>
<li>Failed to install cordova-plugin-whitelist 问题<ul>
<li>解决方法: 同上</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ios <em>ionic platfrom add android</em></li>
</ul>
</li>
<li>打包<ul>
<li>android <em>ionic build android</em></li>
<li>ios <em>ionic build ios</em></li>
</ul>
</li>
<li>直接运行在手机<ul>
<li>android <em>ionic run android</em><ul>
<li>此处有可能失败<ul>
<li>解决方法:<ol>
<li>必须打开手机开发者选项</li>
<li>选中 usb 调试</li>
<li>选中 usb 安装</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/09/21/Front-end/移动App/" data-id="cjvlw5bjo000vxfq3fwcl5cll" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebAPP/">WebAPP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-React/React API" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/05/React/React API/" class="article-date">
  <time datetime="2016-09-05T11:13:24.000Z" itemprop="datePublished">2016-09-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/05/React/React API/">React 常用 API</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="React-相关-API"><a href="#React-相关-API" class="headerlink" title="React 相关 API"></a>React 相关 API</h1><p>本文介绍了 React 一些常用的 API ，详情访问 <a href="https://facebook.github.io/react/docs/hello-world.html" target="_blank" rel="noopener">React 官方文档</a>。</p>
<h2 id="render"><a href="#render" class="headerlink" title="render"></a>render</h2><ul>
<li>ReactDom.render(html|react组件, Dom元素)<ul>
<li>html 或 react 组件外部只能被一层标签包裹</li>
</ul>
</li>
<li><code>render() {return (html|组件)}</code></li>
</ul>
<h2 id="jsx-语法"><a href="#jsx-语法" class="headerlink" title="jsx 语法"></a>jsx 语法</h2><ul>
<li>碰到 <code>&lt;</code> 用 html 语法解析，碰到 <code>{</code> 用 js 语法解析</li>
<li>DOM 节点属性 <code>class</code> 改为 <code>className</code> ， <code>for</code> 改为 <code>htmlFor</code></li>
<li>注释采用<code>{/* */}</code></li>
<li><p>标签 style 属性写法：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style=&#123;&#123;<span class="attr">fontSize</span>: <span class="number">50</span>px, <span class="attr">display</span>: block&#125;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>其中大括号中内容为 js 对象，对象的属性名不能是 <code>font-size</code></li>
<li><code>-</code>不符合 js 变量命名规范</li>
<li>可改写为 <code>var s = {fontSize: 50px, display: block}</code> 和 <code>style={s}</code></li>
</ul>
</li>
<li><code>render() {}</code> 函数中可以自定义变量保存 html 代码<blockquote>
<p>html 代码中的 map 函数需要用大括号包裹， map 函数内部箭头函数的函数体 <strong>不能用{}包裹</strong>，否则会冲突，可以不包裹或者 <strong>用()包裹</strong></p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">    <span class="comment">/* map内部的箭头函数函数体不能用&#123;&#125;包裹，否则会冲突，可以不包裹或者改用()包裹 */</span></span><br><span class="line">    <span class="keyword">const</span> items = <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    &#123;this.state.items.map((item, i) =&gt; <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.handleRemove(i)&#125;&gt;&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>)&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.inputValue&#125; onChange=&#123;<span class="keyword">this</span>.handleValue&#125; onKeyUp=&#123;<span class="keyword">this</span>.handleAdd&#125;/&gt;</span><br><span class="line">        &#123;items&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="react-分发-html"><a href="#react-分发-html" class="headerlink" title="react 分发 html"></a>react 分发 html</h3><p>将 html 代码保存在 button 变量中，然后在父组件 Todo 的子组件 List 上添加自定义 html 属性 <code>button={button}</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件Todo渲染</span></span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">const</span> button = <span class="xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>点击变身<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Input submitFn=&#123;<span class="keyword">this</span>.submitFn.bind(<span class="keyword">this</span>)&#125;/&gt;</span><br><span class="line">            &lt;List todos=&#123;<span class="keyword">this</span>.state.todos&#125; deleteFn=&#123;<span class="keyword">this</span>.deleteFn.bind(<span class="keyword">this</span>)&#125; button=&#123;button&#125;/&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>在子组件中使用 <code>this.props.button</code> 接收传过来的 html 代码，可以使用 <code>{this.props.button}</code> 渲染</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件List</span></span><br><span class="line">render() &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">this</span>.props.todos</span><br><span class="line">    <span class="keyword">const</span> button = <span class="keyword">this</span>.props.button</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ul style=&#123;&#123;<span class="attr">marginTop</span>: <span class="string">'10px'</span>, <span class="attr">fontSize</span>: <span class="string">'20px'</span>, <span class="attr">lineHeight</span>: <span class="string">'30px'</span>&#125;&#125;&gt;</span><br><span class="line">            &#123;button&#125;</span><br><span class="line">            &lt;ReactCSSTransitionGroup</span><br><span class="line">                component=<span class="string">"div"</span></span><br><span class="line">                transitionName=<span class="string">"example"</span></span><br><span class="line">                transitionAppear=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">                transitionEnterTimeout = &#123;<span class="number">500</span>&#125;</span><br><span class="line">                transitionLeaveTimeout = &#123;<span class="number">300</span>&#125;</span><br><span class="line">                transitionAppearTimeout = &#123;<span class="number">500</span>&#125;</span><br><span class="line">            &gt;</span><br><span class="line">            &#123;data.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;this.clickHandler.bind(this,</span> <span class="attr">item.id</span>)&#125;&gt;</span>&#123;item.text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">            &#125;)&#125;</span><br><span class="line">            &lt;<span class="regexp">/ReactCSSTransitionGroup&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/u</span>l&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="组件中自定义函数的形式"><a href="#组件中自定义函数的形式" class="headerlink" title="组件中自定义函数的形式"></a>组件中自定义函数的形式</h2><p>组件中自定义函数可以分为普通函数和箭头函数，两者均可，如果都是命名函数，普通函数反倒简便一些</p>
<p>二者有一点区别：<strong>箭头函数自动绑定 this 指向组件，普通函数的 this 指向为 null ，如果使用箭头函数，在 html 标签内调用函数是不必绑定 this ，否则需要使用 <code>.bind(this)</code> 绑定 this 指向，或者采用箭头函数的调用形式</strong>，由于 constructor 内部 <code>.bind(this)</code> 无法传参，所以在有参数的情况下尽量使用箭头函数传参</p>
<p>html 标签属性中函数的调用形式，分为两种情况：</p>
<ol>
<li>在 render 函数的 html 标签属性中调用组件内部 <strong>普通函数</strong> 需要绑定 this 指向，否则组件中的函数内部 this为 null ，也可以采用箭头函数的调用形式</li>
<li>如果调用组件内部的 <strong>箭头函数</strong> ， html 标签的属性中调用函数的形式不必绑定 this ，普通函数和箭头函数调用形式均可</li>
<li>html 标签属性中函数调用可以使用箭头函数的形式，箭头函数不传参使用 <code>() =&gt; this.clickHandle()</code>，箭头函数传参可以使用 <code>() =&gt; this.clickHandler(a, b)</code>，其中第一个括号中均不需要写东西，<strong><em>除非需要传递鼠标事件</em></strong></li>
<li>如果组件内部函数需要用到鼠标事件，例如 <code>handleChange(e) { console.log(e.target.value) }</code>，那么 html 标签属性中可以使用普通函数调用形式 <code>this.handleChange</code> 或者 <code>this.handleChange.bind(this)</code>，也可以说使用箭头函数调用形式 <code>(e) =&gt; this.handleChange(e)</code></li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">var</span> arr = [<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>]</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p onClick=&#123;<span class="keyword">this</span>.clickHandler.bind(<span class="keyword">this</span>)&#125;&gt;<span class="number">123</span>&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;p style=&#123;&#123;fontSize: 50px, display: block&#125;&#125;&gt;345&lt;/</span>p&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &#123;arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>  <span class="comment">// 必须使用大括号包裹item返回变量的值(aa, bb, cc), 否则只返回item这个单词. 同理index也要使用大括号包裹, 设置属性key是为了配合React的diff算法提高渲染效率</span></span><br><span class="line">                    &#125;)&#125;</span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 普通函数</span></span><br><span class="line">    clickHandler(event) &#123;</span><br><span class="line">        event.preventDefault()  <span class="comment">// 阻止默认行为</span></span><br><span class="line">        <span class="keyword">this</span>.setState = &#123;&#125;  <span class="comment">// React组件中普通函数内的this为null, 所以需要在绑定事件的时候使用 .bind(this) 传入this, 方便后续使用</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">Date</span>.now())</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 箭头函数</span></span><br><span class="line">    clickHandler = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line">        <span class="keyword">this</span>.setState = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h2><ul>
<li>推荐在构造函数中定义state</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props)</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            userInput: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Refs-and-the-DOM"><a href="#Refs-and-the-DOM" class="headerlink" title="Refs and the DOM"></a>Refs and the DOM</h2><p>Use the <code>ref</code> callback to store a reference to the text input DOM element in an instance field (for example, this.textInput).</p>
<blockquote>
<p>使用ref回调函数存储一个实例字段(例如textInput)对input文本框的引用</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ref</span>=<span class="string">&#123;input</span> =&gt;</span> (this.theInput = input)&#125; value=&#123;this.state.userInput&#125; onChange=&#123;this.handleChange.bind(this)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>ref属性<ul>
<li>必须是一个回调函数</li>
<li><code>this.refs.textInput</code> 已经过时，未来会被移除</li>
<li><code>Arrow function should not return assignment</code> –&gt; 箭头函数不能返回赋值语句，需要用()包裹</li>
<li>箭头函数的函数体如果只有一行，可省去大括号，表示直接返回结果</li>
</ul>
</li>
</ul>
<h2 id="事件监听与处理"><a href="#事件监听与处理" class="headerlink" title="事件监听与处理"></a>事件监听与处理</h2><ul>
<li>事件参数(a, b, c, d)<ul>
<li>如果传过来的参数够四个，则显示传过来的参数</li>
<li>少一个则表示 Proxy 对象</li>
<li>少两个第二个参数表示 Event 事件对象</li>
<li>比如 <code>handleClick(a, b, c, d)</code></li>
</ul>
</li>
<li>组件中自定义的箭头函数传参表示直接执行,添加事件处理时需要用空箭头函数包裹起来传参</li>
<li>普通函数传参时最好使用 <code>.bind(this, ...)</code> ，否则this指向不明</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 演示错误添加监听事件</span></span><br><span class="line">componentWillMount() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, <span class="keyword">this</span>.handleResize)</span><br><span class="line">&#125;</span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">    <span class="comment">// 1.在已经插入到真实DOM节点之后,注册窗体改变大小的事件监听</span></span><br><span class="line">    <span class="comment">// 3.用Ajax发起数据请求的操作也要在componentDidMount方法里面去调用</span></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, <span class="keyword">this</span>.handleResize)</span><br><span class="line">&#125;</span><br><span class="line">componentWillUnmount() &#123;</span><br><span class="line">    <span class="comment">// 2.在组件将要被卸载的时候移除监听事件,防止对其他组件的影响</span></span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>, <span class="keyword">this</span>.handleResize)</span><br><span class="line">&#125;</span><br><span class="line">handleResize = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.innerWidth)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="受控表单"><a href="#受控表单" class="headerlink" title="受控表单"></a>受控表单</h2><ul>
<li>React 中写死 value 值的表单永远无法改变 value 值</li>
<li>this.refs (已过时)获取 dom 元素必须要在 componentDidMount 方法里面或者之后的生命周期函数中使用</li>
<li>受控表单不能设置固定的 value ，否则报错，必须用 onChange 事件改变 value</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 受控表单 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ref</span>=<span class="string">&#123;(input)</span> =&gt;</span> (this.textInput = input)&#125; value=&#123;this.state.userInput&#125; onChange=&#123;this.handleChange.bind(this)&#125;/&gt;</span><br><span class="line"><span class="comment">&lt;!-- React中写死value值的表单永远无法改变value值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"hello"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 非受控表单组件里面输入框值改变不受react控制 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ref</span>=<span class="string">&#123;(input)</span> =&gt;</span> (this.textInput2 = input)&#125;/&gt;</span><br><span class="line"><span class="comment">&lt;!-- 普通表单 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="组合组件"><a href="#组合组件" class="headerlink" title="组合组件"></a>组合组件</h2><p>只用存在嵌套关系就是组合组件</p>
<ul>
<li>组合组件通过 <code>this.props.items</code> 传递属性</li>
<li>必须要用 <code>PropTypes</code> 校验属性</li>
<li>最新 API ， PropTypes 从<code>prop-types</code>包引入</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    items: PropTypes.any</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">let</span> createItem = <span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;this.props.items.map(createItem)&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="属性校验"><a href="#属性校验" class="headerlink" title="属性校验"></a>属性校验</h2><p>最新 API 通过 <code>prop-types</code> 导入PropTypes</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckProps</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 初始化props属性值</span></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    paly: <span class="literal">false</span>,</span><br><span class="line">    loop: <span class="string">'对不对'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="comment">// 设置初始状态(state只能通过this.setState(&#123;&#125;)改变)</span></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    play: PropTypes.bool.isRequired,</span><br><span class="line">    loop: PropTypes.string</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        属性校验&#123;<span class="keyword">this</span>.props.loop&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="context-特性"><a href="#context-特性" class="headerlink" title="context 特性"></a>context 特性</h2><ul>
<li><p>在父组件中需要一个静态属性和一个方法</p>
<ol>
<li><p>通过静态属性校验传递给子孙组件的属性</p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">    color: PropTypes.string,</span><br><span class="line">    age: PropTypes.number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件通过下面方法向子孙组件传递属性</p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        color: <span class="string">'pink'</span>,</span><br><span class="line">        age: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在子孙组件里校验父组件传递过来的属性</p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">    color: PropTypes.string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>this.props 对象的属性与组件的属性一一对应，但是有一个例外，就是 this.props.children 属性。它表示组件的所有子节点。</p>
</li>
<li><code>this.props.children</code> 表示某个组件所包含的所有子节点</li>
<li><p>React.Children 是顶层API之一，为处理 this.props.children 这个封闭的数据结构提供了有用的工具。</p>
<ol>
<li><p>对应方法 <code>React.Children.map</code></p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">React.Children.map(<span class="keyword">this</span>.props.children, <span class="function"><span class="keyword">function</span> (<span class="params">child</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>React.Child.forEach</code></p>
 <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">React.Children.forEach(<span class="keyword">this</span>.props.children, <span class="function"><span class="keyword">function</span> (<span class="params">child</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>React.Child.count</code> &amp; <code>React.Child.only</code></p>
</li>
</ol>
</li>
</ul>
<h2 id="显示隐藏组件的动画效果"><a href="#显示隐藏组件的动画效果" class="headerlink" title="显示隐藏组件的动画效果"></a>显示隐藏组件的动画效果</h2><ul>
<li>使用 npm 包 –&gt; <code>react-addons-css-transition-group</code></li>
<li>使用 <code>&lt;ReactCSSTransitionGroup&gt;显示/隐藏组件&lt;/ReactCSSTransitionGroup&gt;</code></li>
<li>其中 <code>component=&#39;div&#39;</code> 表示是指将 {items} 外面默认包裹的 span 标签替换成 div 标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ReactCSSTransitionGroup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">component</span> = <span class="string">'div'</span></span></span><br><span class="line"><span class="tag">  <span class="attr">transitionName</span> = <span class="string">'example'</span></span></span><br><span class="line"><span class="tag">  <span class="attr">transitionAppear</span> = <span class="string">&#123;true&#125;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">transitionEnterTimeout</span> = <span class="string">&#123;500&#125;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">transitionLeaveTimeout</span> = <span class="string">&#123;300&#125;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">transitionAppearTimeout</span> = <span class="string">&#123;500&#125;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  &#123;items&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ReactCSSTransitionGroup</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>css文件</li>
</ul>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* -enter是进入时候的初始状态 */</span></span><br><span class="line"><span class="selector-class">.example-enter</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* -enter-active是进入时候的结束状态 */</span></span><br><span class="line"><span class="selector-class">.example-enter</span><span class="selector-class">.example-enter-active</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity .<span class="number">5s</span> ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-leave</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-leave</span><span class="selector-class">.example-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.01</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">300ms</span> ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-appear</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.example-appear</span><span class="selector-class">.example-appear-active</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity .<span class="number">5s</span> ease-in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/09/05/React/React API/" data-id="cjvlw5bna00alxfq3ke7lyfei" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript/ECMAScript6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/08/JavaScript/ECMAScript6/" class="article-date">
  <time datetime="2016-08-08T13:24:07.000Z" itemprop="datePublished">2016-08-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/08/JavaScript/ECMAScript6/">ECMAScript6 相关</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ES6-语法"><a href="#ES6-语法" class="headerlink" title="ES6 语法"></a>ES6 语法</h2><p>在 ES6 中，我们可以使用 <code>for...of</code> 遍历数组,伪数组和字符串</p>
<ol>
<li>推荐在循环对象属性的时候，使用<code>for...in</code>,在遍历数组的时候的时候使用<code>for...of</code></li>
<li><code>for...in</code>循环出的是key，<code>for...of</code>循环出的是value</li>
<li><strong>注意：</strong><code>for...of</code>是ES6新引入的特性。修复了ES5引入的<code>for...in</code>的不足</li>
<li><strong>注意：</strong> 作用于数组的for-in循环除了遍历数组自身元素以外,还会遍历自定义属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aArray = [<span class="string">'a'</span>, <span class="number">123</span>, &#123;</span><br><span class="line">    a: <span class="string">'1'</span>,</span><br><span class="line">    b: <span class="string">'2'</span></span><br><span class="line">&#125;]</span><br><span class="line">aArray.name = <span class="string">'demo'</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> aArray) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(aArray[index]); <span class="comment">// a, 123, &#123;a: '1', b: '2'&#125;, demo</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;aArray[index]&#125;</span>`</span>) <span class="comment">// a, 123, [object Object], demo</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> value <span class="keyword">of</span> aArray) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value) <span class="comment">// a, 123, &#123;a: '1', b: '2'&#125;, demo</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>for...of</code>不能循环普通的对象，需要通过和<code>Object.keys()</code>搭配使用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> student = &#123;</span><br><span class="line">    name: <span class="string">'wujunchuan'</span>,</span><br><span class="line">    age: <span class="number">22</span>,</span><br><span class="line">    locate: &#123;</span><br><span class="line">    country: <span class="string">'china'</span>,</span><br><span class="line">    city: <span class="string">'xiamen'</span>,</span><br><span class="line">    school: <span class="string">'XMUT'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(student)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span>:`</span>, student[key]) <span class="comment">// name: 'wujunchuan', age: 22, locate: &#123;...&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>可以使用<code>Object.keys(obj)</code>遍历对象</li>
<li>当对象的键和值相同时,可以省略一项,只写一个</li>
</ul>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>ES6的Class之间可以通过 <code>extends</code> 关键字实现继承，这比ES5的通过修改原型链实现继承，要清晰和方便很多。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(x, y, color) &#123;</span><br><span class="line">        <span class="keyword">super</span>(x, y); <span class="comment">// 调用父类的constructor(x, y)</span></span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.color + <span class="string">' '</span> + <span class="keyword">super</span>.toString(); <span class="comment">// 调用父类的toString()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>上面代码中，constructor方法和toString方法之中，都出现了super关键字，它在这里表示父类的构造函数，用来新建父类的this对象。</li>
<li>子类必须在constructor方法中调用super方法，否则新建实例时会报错。这是因为子类没有自己的this对象，而是继承父类的this对象，然后对其进行加工。如果不调用super方法，子类就得不到this对象。</li>
</ul>
<h3 id="原生构造函数继承"><a href="#原生构造函数继承" class="headerlink" title="原生构造函数继承"></a>原生构造函数继承</h3><p>原生构造函数是指语言内置的构造函数，通常用来生成数据结构。ECMAScript的原生构造函数大致有下面这些。以前，这些原生构造函数是无法继承的。</p>
<p>Boolean()、Number()、String()、Array()、Date()、Function()、RegExp()、Error()、Object()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">        <span class="keyword">super</span>(...args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> MyArray();</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">12</span>;</span><br><span class="line">arr.length <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">arr.length = <span class="number">0</span>;</span><br><span class="line">arr[<span class="number">0</span>] <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>上面代码定义了一个MyArray类，继承了Array构造函数，因此就可以从MyArray生成数组的实例。这意味着，<strong>ES6可以自定义原生数据结构</strong>（比如Array、String等）的子类，<strong>这是ES5无法做到的</strong>。</p>
<h3 id="Class-的-Generator-方法"><a href="#Class-的-Generator-方法" class="headerlink" title="Class 的 Generator 方法"></a>Class 的 Generator 方法</h3><p>如果某个方法之前加上星号（*），就表示该方法是一个Generator函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">        <span class="keyword">this</span>.args = args;</span><br><span class="line">    &#125;</span><br><span class="line">    * [<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> arg <span class="keyword">of</span> <span class="keyword">this</span>.args) &#123;</span><br><span class="line">            <span class="keyword">yield</span> arg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> <span class="keyword">new</span> Foo(<span class="string">'hello'</span>, <span class="string">'world'</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// hello</span></span><br><span class="line"><span class="comment">// world</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，Foo类的Symbol.iterator方法前有一个星号，表示该方法是一个Generator函数。Symbol.iterator方法返回一个Foo类的默认遍历器，for…of循环会自动调用这个遍历器。</p>
<h3 id="Class-继承静态方法"><a href="#Class-继承静态方法" class="headerlink" title="Class 继承静态方法"></a>Class 继承静态方法</h3><p>父类的静态方法，可以被子类继承。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> classMethod() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'hello'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Bar.classMethod(); <span class="comment">// 'hello'</span></span><br></pre></td></tr></table></figure>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>用来封装异步任务 <code>new Promise((resolve, reject) =&gt; { })</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ... some code</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="comment">/* 异步操作成功 */</span>)&#123;</span><br><span class="line">    resolve(value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>通过resolve接收数据data</li>
<li>通过reject接收错误err</li>
</ol>
<p>Promise实例生成以后，可以用then方法分别指定Resolved状态和Rejected状态的回调函数。</p>
<ul>
<li>then方法可以接受两个回调函数作为参数。第一个回调函数是Promise对象的状态变为Resolved时调用，第二个回调函数是Promise对象的状态变为Rejected时调用。</li>
<li>其中，第二个函数是可选的，不一定要提供。这两个函数都接受Promise对象传出的值(有可能是成功的值或者失败的值)作为参数。</li>
<li>如果有第二个参数，那么发生错误走第二个函数捕获错误，不走<code>.catch()</code>，否则走<code>.catch()</code>捕获错误。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// success</span></span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// failure</span></span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>promise.then</code>永远返回一个promise对象,该对象<code>.then</code>可以接收上一个promise.then返回的值作为参数</li>
<li>如果调用resolve函数和reject函数时带有参数，那么它们的参数会被传递给回调函数。reject函数的参数通常是Error对象的实例，表示抛出的错误；resolve函数的参数除了正常的值以外，还可能是另一个 Promise 实例，例如：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    resolve(p1);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>注意，调用resolve或reject并不会终结 Promise 的参数函数的执行。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(r);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<strong>调用resolve(1)以后，后面的console.log(2)还是会执行，并且会<em>首先打印出来</em>。这是因为立即 resolved 的 Promise 是在<em>本轮事件循环的末尾执行</em>，总是<em>晚于本轮循环的同步任务</em>。</strong></p>
<p><strong><em>一般来说，调用resolve或reject以后，Promise 的使命就完成了，后继操作应该放到then方法里面，而不应该直接写在resolve或reject的后面。所以，最好在它们前面加上return语句，这样就不会有意外。</em></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> resolve(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// 后面的语句不会执行</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Promise 新建后就会立即执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise'</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'resolved.'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hi!'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="comment">// Hi!</span></span><br><span class="line"><span class="comment">// resolved</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，<strong>Promise 新建后立即执行，所以首先输出的是Promise。然后，<em>then方法指定的回调函数，将在当前脚本所有同步任务执行完才会执行</em>，所以resolved最后输出</strong>。</p>
<blockquote>
<p>Promise.all()</p>
</blockquote>
<ul>
<li>Promise.all方法用于将多个 Promise 实例，包装成一个新的 Promise 实例。</li>
<li><code>var p = Promise.all([p1, p2, p3]);</code></li>
<li>p的状态由p1、p2、p3决定，分成两种情况。<ol>
<li>只有p1、p2、p3的状态都变成fulfilled，p的状态才会变成fulfilled，此时p1、p2、p3的返回值组成一个数组，传递给p的回调函数。</li>
<li>只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。</li>
</ol>
</li>
</ul>
<p><strong><em>注意，如果作为参数的 Promise 实例，自己定义了catch方法，那么它一旦被rejected，并不会触发Promise.all()的catch方法。</em></strong></p>
<h2 id="Generator-amp-yield"><a href="#Generator-amp-yield" class="headerlink" title="Generator &amp; yield"></a>Generator &amp; yield</h2><ul>
<li>Generator<ul>
<li>Generator函数是一个状态机，内部封装了多个状态</li>
<li>执行Generator函数会返回一个遍历器对象（遍历器对象生成函数）</li>
<li>返回的遍历器对象，可以依次遍历 Generator 函数内部的每一个状态</li>
</ul>
</li>
</ul>
<blockquote>
<p>Generator函数是一个普通函数，但是有两个特征：</p>
</blockquote>
<ol>
<li>function关键字与函数名之间有一个星号</li>
<li>函数体内部使用yield表达式，定义不同的内部状态（yield在英语里的意思就是“产出”）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">helloWorldGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'hello'</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">'world'</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'ending'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hw = helloWorldGenerator();</span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: 'hello', done: false &#125;</span></span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: 'world', done: false &#125;</span></span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: 'ending', done: true &#125;</span></span><br><span class="line"></span><br><span class="line">hw.next()</span><br><span class="line"><span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Generator 函数的调用方法与普通函数一样，也是在函数名后面加上一对圆括号。不同的是，调用 Generator 函数后，该函数并不执行，返回的也不是函数运行结果，而是一个指向内部状态的指针对象，也就是所谓的的遍历器对象（Iterator Object）。</p>
</blockquote>
<p>Generator 函数可以不用yield表达式，这时就变成了一个单纯的暂缓执行函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'执行了！'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> generator = f();</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  generator.next()</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="comment">// 上面代码中，函数f如果是普通函数，在为变量generator赋值时就会执行。</span></span><br><span class="line"><span class="comment">// 但是，函数f是一个 Generator 函数，会返回一个遍历器对象，只有调用next方法时，函数f才会执行。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>yield<ul>
<li>Generator 函数返回的遍历器对象，只有调用next方法才会遍历下一个内部状态，所以其实提供了一种可以暂停执行的函数。yield表达式就是暂停标志。</li>
<li>遍历器对象的next方法的运行逻辑如下：<ol>
<li>遇到yield表达式，就暂停执行后面的操作，并将<strong>紧跟在yield后面的那个表达式的值</strong>（包括yield后面所有内容），作为返回的对象的value属性值。</li>
<li>下一次调用next方法时，再继续往下执行，直到遇到下一个yield表达式。</li>
<li>如果没有再遇到新的yield表达式，就一直运行到函数结束，直到return语句为止，并将return语句后面的表达式的值，作为返回的对象的value属性值。</li>
<li>如果该函数没有return语句，则返回的对象的value属性值为undefined。</li>
</ol>
</li>
<li><em>每next一次对应一个yield表达式的值</em>，为一个对象，例如 <strong>{value: 10, done: false}</strong></li>
<li><strong><em>yield表达式只能用在 Generator 函数里面，用在其他地方都会报错。</em></strong></li>
<li><strong><em>yield 表达式如果用在另一个表达式之中，必须放在圆括号里面。</em></strong></li>
<li>yield表达式用作函数参数或放在赋值表达式的右边，可以不加括号。</li>
<li>yield表达式本身没有返回值，或者说总是返回<strong>undefined</strong>。<strong><em>next方法可以带一个参数，该参数就会被当作上一个yield表达式的返回值。</em></strong></li>
</ul>
</li>
<li>yield*<ul>
<li>在 Generator 函数内部，调用另一个 Generator 函数，默认情况下是没有效果的。</li>
<li>这里就需要用到yield*表达式，用来在一个 Generator 函数里面执行另一个 Generator 函数。</li>
</ul>
</li>
</ul>
<blockquote>
<p>从语法角度看，如果yield表达式后面跟的是一个遍历器对象，需要在yield表达式后面加上星号，表明它返回的是一个遍历器对象。这被称为yield*表达式。</p>
</blockquote>
<p>如果yield*后面跟着一个数组，由于数组原生支持遍历器，因此就会遍历数组成员。yield命令后面如果不加星号，返回的是整个数组，加了星号就表示返回的是数组的遍历器对象。</p>
<blockquote>
<p>实际上，任何数据结构只要有 Iterator 接口，就可以被yield*遍历。</p>
</blockquote>
<h2 id="async-amp-await"><a href="#async-amp-await" class="headerlink" title="async &amp; await"></a>async &amp; await</h2><ol>
<li>箭头函数：没有{ }时不写return 也有返回值</li>
<li><code>new Promise().then().then().catch()</code> ：第一个then触发条件：是 Promise() 实例化时resolve()触发， 第二个及以后的then() 触发条件是前一个then() 执行完成，并且将return值作为下一个then的参数</li>
<li>async：表明一个异步函数</li>
<li>await：后面必须跟Promise对象，若非Promise，则不会拦截后面代码执行。当promise对象resolve过后并且执行完then里面的代码，就执行下一步代码，不resolve不会触发下一行代码执行。</li>
</ol>
<p>需注意：如果then()中需要异步操作，不会等then中的异步执行完过后再执行下一个then()的函数。<strong><em>原因就是，异步函数中，没有时间让你return值给下一个then()回调函数</em></strong>。解决方案是使用async函数包裹then中的回调函数，将其中的异步操作用<code>new Promise((res, rej) =&gt; { 异步操作 })</code>包裹，并用await等待异步操作完成。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/08/08/JavaScript/ECMAScript6/" data-id="cjvlw5bn900aixfq3e9oryand" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ECMAScript/">ECMAScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es6/">es6</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Angular/AngularJS简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/04/Angular/AngularJS简介/" class="article-date">
  <time datetime="2016-08-04T11:29:02.000Z" itemprop="datePublished">2016-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/04/Angular/AngularJS简介/">AngularJS 简单介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="AngularJS-简介"><a href="#AngularJS-简介" class="headerlink" title="AngularJS 简介"></a>AngularJS 简介</h1><p><code>AngularJS</code> 是一款由 Google 公司开发维护的<strong>前端 MVC 框架</strong>，与我们常用的 <code>jQuery</code> 有很大不同。<code>jQuery</code> 更准确来说只是一个类库（类库指的是一系列函数的集合），<strong>以 DOM 做为驱动（核心）</strong>，而 <code>AngularJS</code> 则一个框架（诸多类库的集合），<strong>以数据和逻辑做为驱动（核心）</strong>。</p>
<p><code>AngularJS</code> 有着诸多特性，最为核心的是：模块化、双向数据绑定、语义化标签、依赖注入等。</p>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="定义应用"><a href="#定义应用" class="headerlink" title="定义应用"></a>定义应用</h3><p>通过为任一 <code>HTML</code> 标签添加 <code>ng-app</code> 属性，可以指定一个应用，表示此标签所包裹的内容都属于应用（App）的一部分。</p>
<p>一个页面可以有多个 <code>ng-app</code> ，但是不能嵌套， <code>ng-app</code> 可以不赋值，但是要关联相应模块时则必须赋值。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加ng-controller属性，并赋值为相应的控制器名称 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">ng-controller</span>=<span class="string">"DemoController"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">ng-repeat</span>=<span class="string">"list in lists"</span>&gt;</span>&#123;&#123;list&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><p><code>AngularJS</code> 提供了一个全局对象 <code>angular</code> ，在此全局对象下存在若干的方法，其中 <code>angular.module()</code> 方法用来定义一个模块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过 module 方法定义模块</span></span><br><span class="line"><span class="comment">// 需要传递两个参数，第1个表示模块的名称，第2个表示此模块依赖的其他模块</span></span><br><span class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, [])</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>应用（App）其本质也是一个模块。</p>
<h3 id="定义控制器"><a href="#定义控制器" class="headerlink" title="定义控制器"></a>定义控制器</h3><p>控制器（Controller）作为连接模型（Model）和视图（View）的桥梁存在，所以当我们定义好了控制器以后也就定义好了模型和视图。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块返回值也是一个对象，通过此对象方法（controller）可以创建控制器</span></span><br><span class="line"><span class="comment">// 需要两个参数，第1个参数表示控制器名称，第2个参数是一个数组，这个数组除最后1个单元是函数外，其余都是字符串，表明此控制器的依赖关系</span></span><br><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 定义好了控制器</span></span><br><span class="line">    <span class="comment">// $socpe是一个空对象 &#123;&#125;</span></span><br><span class="line">    <span class="comment">// $scope 就是 Model</span></span><br><span class="line">    <span class="comment">// 数组数据来源于后端</span></span><br><span class="line">    $scope.lists = [<span class="string">'html'</span>, <span class="string">'javascript'</span>, <span class="string">'css'</span>, <span class="string">'php'</span>];</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>所谓指令就是 <code>AngularJS</code> 自定义的 <code>HTML</code> 属性或标签，这些指令都是以 <code>ng-</code> 做为前缀的，例如 <code>ng-app</code> 、 <code>ng-controller</code> 、 <code>ng-repeat</code> 等。</p>
<blockquote>
<p>ng-repeat 处理重复值，使用 <code>track by $index</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$scope.items = [</span><br><span class="line"> <span class="string">'red'</span>,</span><br><span class="line"> <span class="string">'blue'</span>,</span><br><span class="line"> <span class="string">'yellow'</span>,</span><br><span class="line"> <span class="string">'white'</span>,</span><br><span class="line"> <span class="string">'blue'</span></span><br><span class="line">];</span><br><span class="line">&lt;li ng-repeat=<span class="string">"item in items track by $index"</span>&gt;&#123;&#123; item &#125;&#125;&lt;<span class="regexp">/li&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="内置指令"><a href="#内置指令" class="headerlink" title="内置指令"></a>内置指令</h3><ul>
<li><code>ng-app</code> 指定应用根元素，至少有一个元素指定了此属性。</li>
<li><code>ng-controller</code> 指定控制器</li>
<li><code>ng-show</code> 控制元素是否显示，true显示、false不显示</li>
<li><code>ng-hide</code> 控制元素是否隐藏，true隐藏、false不隐藏</li>
<li><code>ng-if</code> 控制元素是否“存在”，true存在、false不存在</li>
<li><code>ng-src</code> 增强图片路径</li>
<li><code>ng-href</code> 增强地址</li>
<li><code>ng-class</code> 利用布尔值控制类名，以便通过数据驱动视图。允许传递一个对象 ng-class=”{red: true, blue: true}”</li>
<li><code>ng-include</code> 引入模板，需要以服务器的访问方式，ng-clude=”‘header.html’”</li>
<li><code>ng-disabled</code> 表单禁用，ng-disabled=”true”</li>
<li><code>ng-readonly</code> 表单只读</li>
<li><code>ng-checked</code> 单/复选框表单选中</li>
<li><code>ng-selected</code> 下拉框表单选中</li>
</ul>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><p>AngularJS 允许自定义指令，通过 angular 全局对象下的 <code>directive</code> 方法实现。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>AngularJS 自定义指令<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span><span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">tag</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tag"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 需要replace 为true --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- directive:tag --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, []);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 通过模块实例对象的directive方法可以自定义指令</span></span></span><br><span class="line"><span class="javascript">        App.directive(<span class="string">'tag'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 返回与指令相关的内容</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 规定指令的类型</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// E ELEMENT</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// A attribute</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// C class</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// M mark</span></span></span><br><span class="line"><span class="javascript">                restrict: <span class="string">'EACM'</span>,</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 当由字符串定义模板时</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// 要确保整个字符串有一个根元素</span></span></span><br><span class="line"><span class="xml">                template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">small</span>&gt;</span>123<span class="tag">&lt;/<span class="name">small</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>',</span></span><br><span class="line"><span class="xml">                // template: '<span class="tag">&lt;<span class="name">img</span> <span class="attr">ng-src</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span>'</span></span><br><span class="line"><span class="javascript">                replace: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">                <span class="comment">// templateUrl: 'header.html'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h2><p>所谓数据绑定指的就是将模型（Model）中的数据与<strong>相应的</strong>视图（View）进行关联</p>
<h3 id="单向绑定"><a href="#单向绑定" class="headerlink" title="单向绑定"></a>单向绑定</h3><p>传统的单向数据绑定，指的是将模型（Model）数据，按着写好的视图（View）模板生成 HTML 标签，然后追加到 DOM 中显示，如 artTemplate 模板引擎的工作方式。通常由模型数据决定视图显示效果。</p>
<h3 id="双向绑定"><a href="#双向绑定" class="headerlink" title="双向绑定"></a>双向绑定</h3><p>可以实现模型（Model）数据和视图（View）模板的双向传递</p>
<ul>
<li><code>ng-cloak</code> 防止双重大括号解析闪烁</li>
<li><code>ng-bind-template</code> 可以绑定多个数据</li>
<li><code>ng-init</code> 初始化模型数据</li>
<li><code>ng-dblclick</code></li>
<li><code>ng-blur</code></li>
<li><code>ng-keyup</code></li>
<li><code>ng-switch on</code> 过滤循环数据</li>
<li><code>ng-switch-when</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>AngularJS 数据绑定<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"DemoController"</span> <span class="attr">ng-init</span>=<span class="string">"sex='男';hobby='写代码'"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">ng-cloak</span>&gt;</span>&#123;&#123;name&#125;&#125;&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;h2 ng-bind="age"&gt;&lt;/h2&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">ng-bind-template</span>=<span class="string">"name age"</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;hobby&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">ng-repeat</span>=<span class="string">"item in items"</span> <span class="attr">ng-switch</span> <span class="attr">on</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-switch-when</span>=<span class="string">"css"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- &lt;span ng-model=""&gt;&lt;/span&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;span&gt;&#123;&#123;test&#125;&#125;&lt;/span&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"say()"</span>&gt;</span>提示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-dblclick</span>=<span class="string">"dblclick()"</span>&gt;</span>双击事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, []);</span></span><br><span class="line"><span class="javascript">        App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $scope.name = <span class="string">'xiaomi'</span>;</span></span><br><span class="line"><span class="undefined">            $scope.age = 10;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// $scope.test</span></span></span><br><span class="line"><span class="javascript">            $scope.items = [<span class="string">'html'</span>, <span class="string">'js'</span>, <span class="string">'css'</span>]</span></span><br><span class="line"><span class="javascript">            $scope.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">                alert($scope.test);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            $scope.dblclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">'双击操作'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;]);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>每个控制器（Controller）对应一个模型（Model）也就是 <code>$scope</code> 对象，不同层级控制器（Controller）下的 <code>$scope</code> 便产生了作用域。</p>
<h3 id="根作用域"><a href="#根作用域" class="headerlink" title="根作用域"></a>根作用域</h3><p>一个 AngularJS 的应用（App）在启动时会自动创建一个根作用域 <code>$rootScope</code> ，这个根作用域在整个应用范围（ <code>ng-app</code> 所在标签以内）都是可以被访问到的。</p>
<h3 id="子作用域"><a href="#子作用域" class="headerlink" title="子作用域"></a>子作用域</h3><p>通过 <code>ng-controller</code> 指令可以创建一个子作用域，新建的作用域可以访问其父作用域的数据。</p>
<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>在双重大括号内使用 “|” 来调用过滤器，使用 “:” 传递参数。</p>
<h3 id="内置过滤器"><a href="#内置过滤器" class="headerlink" title="内置过滤器"></a>内置过滤器</h3><ol>
<li><code>currency</code> 将数值格式化为货币格式</li>
<li><code>date</code> 日期格式化，年（y）、月（M）、日（d）、星期（EEEE/EEE）、时（H/h）、分（m）、秒（s）、毫秒（.sss），也可以组合到一起使用。</li>
<li><code>filter</code> 在给定数组中选择满足条件的一个子集，并返回一个新数组，其条件可以是一个字符串、对象、函数</li>
<li><code>json</code> 将 Javascrip 对象转成 JSON 字符串。</li>
<li><code>limitTo</code> 取出字符串或数组的前（正数）几位或后（负数）几位</li>
<li><code>lowercase</code> 将文本转换成小写格式</li>
<li><code>uppercase</code> 将文本转换成大写格式</li>
<li><code>number</code> 数字格式化，可控制小位位数</li>
<li><code>orderBy</code> 对数组进行排序，第1个参数表示按照什么属性排序，第2个参数控制排序方向</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>AngularJS 过滤器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">ng-controller</span>=<span class="string">"DemoController"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;date|date: 'y/M/dd'&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;price|currency:'￥'&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;items|filter: 's'&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;students|filter: &#123;age: 21&#125; &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;info|json&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;str|limitTo: -4&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;items|limitTo: -4&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;str|uppercase|lowercase|limitTo: 4|uppercase&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;num|number:0&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;letters|orderBy: '': true&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123;students|orderBy: 'age': true&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, []);</span></span><br><span class="line"><span class="javascript">        App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $scope.date = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">// 2016/11/02</span></span></span><br><span class="line"><span class="undefined">            $scope.price = 12.45;</span></span><br><span class="line"><span class="javascript">            $scope.items = [<span class="string">'html'</span>, <span class="string">'css'</span>, <span class="string">'javascript'</span>, <span class="string">'java'</span>, <span class="string">'php'</span>, <span class="string">'photoshop'</span>];</span></span><br><span class="line"><span class="undefined">            $scope.students = [</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">100</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">name</span>: <span class="string">'小红'</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">89</span>&#125;,</span></span><br><span class="line"><span class="javascript">                &#123;<span class="attr">name</span>: <span class="string">'小米'</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">92</span>&#125;</span></span><br><span class="line"><span class="undefined">            ]</span></span><br><span class="line"><span class="undefined">            $scope.info = &#123;</span></span><br><span class="line"><span class="javascript">                name: <span class="string">'xiaomi'</span>,</span></span><br><span class="line"><span class="undefined">                age: 10</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            $scope.str = <span class="string">'hello angular!'</span>;</span></span><br><span class="line"><span class="javascript">            $scope.num = <span class="string">'123.456'</span>;</span></span><br><span class="line"><span class="javascript">            $scope.letters = [<span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>];</span></span><br><span class="line"><span class="undefined">        &#125;]);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// var testnum = '123a456a';</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// alert(parseInt(testnum));</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// alert(Number(testnum));</span></span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span></span></span><br></pre></td></tr></table></figure>
<h3 id="自定义过滤器"><a href="#自定义过滤器" class="headerlink" title="自定义过滤器"></a>自定义过滤器</h3><p>根据业务需要自定义过滤器，通过模块对象实例提供的 <code>filter</code> 方法自定义过滤器。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>AngularJS 自定义过滤器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">ng-controller</span>=<span class="string">"DemoController"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;name|capitalize|sayHello&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, []);</span></span><br><span class="line"><span class="javascript">        App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $scope.name = <span class="string">'xiaomi'</span>;</span></span><br><span class="line"><span class="undefined">        &#125;]);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 自定义过滤器</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 通过模块实例App提供的 filter 方法来自定义</span></span></span><br><span class="line"><span class="javascript">        App.filter(<span class="string">'sayHello'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">input</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// console.log('你好' + input);</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="string">'你好'</span> + input;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// var txt = '';</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// for(var i=0; i&lt;100; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//  txt += input;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// return txt;</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="javascript">        App.filter(<span class="string">'capitalize'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">input</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> input[<span class="number">0</span>].toUpperCase() + input.slice(<span class="number">1</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h2><p>AngularJS 采用模块化的方式组织代码，将一些通用逻辑封装成一个对象或函数，实现最大程度的复用，这导致了使用者和被使用者之间存在依赖关系。</p>
<h3 id="推断式注入"><a href="#推断式注入" class="headerlink" title="推断式注入"></a>推断式注入</h3><p>没有明确声明依赖，AngularJS会将函数参数名称当成是依赖的名称。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AngularJS 内置一些具有特殊功能的“模块”</span></span><br><span class="line"><span class="comment">// 开发者在开发的时候可以直接使用这些“模块”</span></span><br><span class="line"><span class="comment">// 定义控制时，需要使用一个叫 $scope 的 “模块”</span></span><br><span class="line"><span class="comment">// 推断式依赖注入</span></span><br><span class="line">App.controller(<span class="string">'DemoController'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">    $scope.name = <span class="string">'xiaomi'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> 这种方式会带来一个问题，当代码经过压缩后函数的参数被压缩，这样便会造成依赖无法找到。</p>
<h3 id="行内注入"><a href="#行内注入" class="headerlink" title="行内注入"></a>行内注入</h3><p>以数组形式明确声明依赖，数组元素都是包含依赖名称的字符串，数组最后一个元素是依赖注入的目标函数。</p>
<p><strong>推荐</strong>使用这种方式声明依赖</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 行内注入方式</span></span><br><span class="line"><span class="comment">// 数组参数是标明依赖（指定需要哪些依赖）</span></span><br><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'$http'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">abc, $http</span>) </span>&#123;</span><br><span class="line">    abc.name = <span class="string">'xiaomi'</span>;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><p>服务是一个对象或函数，对外提供特定的功能。</p>
<h3 id="内置服务"><a href="#内置服务" class="headerlink" title="内置服务"></a>内置服务</h3><ol>
<li><p><code>$location</code> 是对原生 Javascript 中 <code>location</code> 对象属性和方法的封装。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'$location'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, $location</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 通过依赖注入的方式将 $scope 和 $location 两个服务注入进来了</span></span><br><span class="line">    $scope.title = <span class="string">'$location服务'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log($location);</span><br><span class="line">    $scope.absUrl = $location.absUrl();</span><br><span class="line">    $scope.host = $location.host();</span><br><span class="line">    $scope.port = $location.port();</span><br><span class="line">    $scope.protocol = $location.protocol();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 与原生 pathname 不同，只代表 # 之后的字符</span></span><br><span class="line">    $scope.path = $location.path();</span><br><span class="line">    <span class="comment">// 与原生 search 不同，只代表 # 之后的查询字符串，会自动转化为 json 对象</span></span><br><span class="line">    $scope.search = $location.search();</span><br><span class="line">    <span class="comment">// 哈希，与原生 hash 不同，只代表 # 后面的 # 之后的字符</span></span><br><span class="line">    $scope.hash = $location.hash();</span><br><span class="line">&#125;]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原生 location 对象</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> location) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key + <span class="string">'~~~'</span> + location[key]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$timeout&amp;$interval</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'$timeout'</span>, <span class="string">'$interval'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope, $timeout, $interval</span>) </span>&#123;</span><br><span class="line">    $timeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $scope.time = <span class="string">'123'</span>;</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">    <span class="keyword">var</span> stopTime = $interval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $scope.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    $scope.stop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 停止定时器</span></span><br><span class="line">        $interval.cancel(stopTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$filter</code> 格式化数据。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'$filter'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope, $filter</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// $filter这个服务可以“生产”很多函数，这些可以实现不同的数据格式化任务，通过传递不同的参数实现的</span></span><br><span class="line">    <span class="comment">// $filter 负责“造”新过滤器，根据传递的参数不同，过滤器也不一样</span></span><br><span class="line">    <span class="keyword">var</span> date = $filter(<span class="string">'date'</span>);</span><br><span class="line">    $scope.now = date(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">'y/M/d'</span>);</span><br><span class="line">    <span class="keyword">var</span> currency = $filter(<span class="string">'currency'</span>);</span><br><span class="line">    $scope.price = currency(<span class="number">12.345</span>, <span class="string">'￥'</span>);</span><br><span class="line">    <span class="keyword">var</span> limitTo = $filter(<span class="string">'limitTo'</span>);</span><br><span class="line">    $scope.items = limitTo([<span class="string">'html'</span>, <span class="string">'js'</span>, <span class="string">'css'</span>], <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> uppercase = $filter(<span class="string">'uppercase'</span>);</span><br><span class="line">    $scope.str = uppercase(<span class="string">'hello servcie'</span>);</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$log</code> 打印调试信息。</p>
<ul>
<li>$log.log(‘日志`)</li>
<li>$log.info(‘信息’)</li>
<li>$log.warn(‘警告’)</li>
<li>$log.error(‘错误’)</li>
<li>$log.debug(‘调试’)</li>
</ul>
</li>
<li><code>$http</code> 用于向服务端发起异步请求。<ul>
<li>get 传参采用 <code>params: {sex: &#39;男&#39;}</code> 方式</li>
<li>post 传参=采用 <code>data: &#39;name=xiaomi&amp;age=10&#39;</code> 方式，而且 post 也可以传递 <code>params</code> 参数<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'$http'</span>, <span class="string">'$log'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope, $http, $log</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// AngularJS也对XMLHttpRequest对象进行封装，封装成了一个服务叫 $http，是一个函数</span></span><br><span class="line">    <span class="comment">// var xhr = new XMLHttpRequest;</span></span><br><span class="line">    <span class="comment">// xhr.open('post', './example.php');</span></span><br><span class="line">    <span class="comment">// xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');</span></span><br><span class="line">    <span class="comment">// xhr.send('name=xiaomi&amp;age=10');</span></span><br><span class="line">    <span class="comment">// xhr.onreadystatechange = function () &#123;</span></span><br><span class="line">    <span class="comment">// if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123;</span></span><br><span class="line">    <span class="comment">//     xhr.responseText;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    $http(&#123;</span><br><span class="line">        url: <span class="string">'example.php'</span>,</span><br><span class="line">        method: <span class="string">'post'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">'Content-type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// restful 接口</span></span><br><span class="line">        <span class="comment">// data: &#123;name: 'xiaomi', age: 10&#125;</span></span><br><span class="line">        data: <span class="string">'name=xiaomi&amp;age=10'</span></span><br><span class="line">    &#125;).success(<span class="function"><span class="keyword">function</span> (<span class="params">info</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// console.log(info);</span></span><br><span class="line">        $log.info(info);</span><br><span class="line"></span><br><span class="line">        $scope.stars = info;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="自定义服务"><a href="#自定义服务" class="headerlink" title="自定义服务"></a>自定义服务</h3><p>所谓服务是将一些通用性的功能逻辑进行封装方便使用，自定义服务就是要返回一个对象或函数以供使用。</p>
<ol>
<li><p><code>factory</code> 方法</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">App.factory(<span class="string">'showTime'</span>, [<span class="string">'$filter'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$filter</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 返回一个函数形式</span></span><br><span class="line">    <span class="comment">// return function () &#123;</span></span><br><span class="line">    <span class="comment">//  var now = new Date();</span></span><br><span class="line">    <span class="comment">//  var date = $filter('date');</span></span><br><span class="line">    <span class="comment">//  return date(now, 'y-M-d H:m:s');</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回一个对象形式</span></span><br><span class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> date = $filter(<span class="string">'date'</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        now: date(now, <span class="string">'y-M-d H:m:s'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br><span class="line"></span><br><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'showTime'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, showTime</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// $scope.now = showTime();</span></span><br><span class="line">    $scope.now = showTime.now;</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>service</code> 方法 –&gt; 不需要 <code>return</code></p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义服务显示日期</span></span><br><span class="line">App.service(<span class="string">'showTime'</span>, [<span class="string">'$filter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$filter</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> date = $filter(<span class="string">'date'</span>);</span><br><span class="line">    <span class="keyword">this</span>.now = date(now, <span class="string">'y-M-d H:mm:ss'</span>);</span><br><span class="line">&#125;]);</span><br><span class="line"></span><br><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'showTime'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, showTime</span>) </span>&#123;</span><br><span class="line">    $scope.now = showTime.now;</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>value</code> 方法定义常量</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义常量服务</span></span><br><span class="line">App.value(<span class="string">'author'</span>, <span class="string">'xiaomi'</span>);</span><br><span class="line">App.value(<span class="string">'version'</span>, <span class="string">'1.0'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 本质上一个服务</span></span><br><span class="line"><span class="comment">// 从表现形式上是一个常量</span></span><br><span class="line"><span class="comment">// 常量就是不变的值与变量名相对应</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明依赖调用服务</span></span><br><span class="line">App.controller(<span class="string">'DemoController'</span>, [<span class="string">'$scope'</span>, <span class="string">'author'</span>, <span class="string">'version'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope, author, version</span>) </span>&#123;</span><br><span class="line">    $scope.author = author;</span><br><span class="line">    $scope.ver = version;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="模块加载"><a href="#模块加载" class="headerlink" title="模块加载"></a>模块加载</h2><p>AngularJS 模块可以在被加载和执行之前对其自身进行配置。</p>
<h3 id="AngularJS-执行流程"><a href="#AngularJS-执行流程" class="headerlink" title="AngularJS 执行流程"></a>AngularJS 执行流程</h3><ol>
<li>启动阶段(startup)<ol>
<li>开始</li>
<li>浏览器解析 DOM 树</li>
<li>遇到 angular.js 停止解析，开始执行脚本</li>
<li>Angular 监听到 DOMContentLoaded 事件，表示 DOM 树构建完毕</li>
<li>启动 Angular 应用</li>
</ol>
</li>
<li>初始化阶段(initial)<ol>
<li>查找模块依赖</li>
<li>寻找 ng-app 指令</li>
<li>初始化必要组件($injector/$compile/$rootScope)，准备默认的注入器（依赖注入）、编译器（ng指令与双重大括号解析）、根作用域（准备存储初始化数据）</li>
<li>配置与运行，在 angular 解析 DOM 数之前提前配置或者运行注入器与编译器，可以使用默认配置，省略此步骤</li>
<li>angular 开始解析 DOM 树</li>
</ol>
</li>
<li>编译、链接(compile/link)<ol>
<li>$compile 遍历 DOM 树，搜集解析指令</li>
<li>执行每个指令的 compile 函数</li>
<li>处理 DOM 转换，编译模板</li>
<li>调用链接函数，生成实时视图</li>
</ol>
</li>
<li>运行阶段(running)<ol>
<li>等待事件触发，执行 $digest 循环</li>
<li>检测到变化，调用 $watch 函数</li>
<li>再次执行 $digest 循环，直到没有变化</li>
<li>结束</li>
</ol>
</li>
</ol>
<h3 id="配置块"><a href="#配置块" class="headerlink" title="配置块"></a>配置块</h3><p>通过 config 方法实现对模块的配置， AngularJS 中的服务<strong>大部分</strong>都对应一个“provider”，用来执行与对应服务相同的功能或对其进行配置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置$log服务(禁用debug)，可以同时配置两个服务</span></span><br><span class="line">App.config([<span class="string">'$logProvider'</span>, <span class="string">'$filterProvider'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$logProvider, $filterProvider</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 通过$logProvider可以配置$log服务</span></span><br><span class="line">    $logProvider.debugEnabled(<span class="literal">false</span>);</span><br><span class="line">&#125;]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置$filter(增加一个过滤器)</span></span><br><span class="line">App.config([<span class="string">'$filterProvider'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$filterProvider</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 可以实现新增过滤器的功能</span></span><br><span class="line">    $filterProvider.register(<span class="string">'showTime'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> now;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>
<h3 id="运行块"><a href="#运行块" class="headerlink" title="运行块"></a>运行块</h3><p>不需要将服务作为依赖注入到 ng-controller 模块中，可以直接运行相应的服务模块， AngularJS 提供了 run 方法来实现。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, []);</span><br><span class="line"><span class="comment">// 直接运行$http、$rootScope服务</span></span><br><span class="line"><span class="comment">// $rootScope代表根作用域</span></span><br><span class="line">App.run([<span class="string">'$log'</span>, <span class="string">'$http'</span>, <span class="string">'$rootScope'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$log, $http, $rootScope</span>) </span>&#123;</span><br><span class="line">    $rootScope.name = <span class="string">'祖宗'</span>;</span><br><span class="line">    $http(&#123;</span><br><span class="line">        url: <span class="string">'example.php'</span>,</span><br><span class="line">        method: <span class="string">'get'</span></span><br><span class="line">    &#125;).success(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        $log.log(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<p>而且， run 方法还是最先执行的，利用这个特点我们可以将一些需要优先执行的功能通过 run 方法来运行，比如验证用户是否登录，未登录则不允许进行任何其它操作。</p>
<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>一个应用是由若干个视图组合而成的，根据不同的业务逻辑展示给用户不同的视图，路由是实现这一功能的关键。</p>
<h3 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h3><p>SPA（Single Page Application）指的是通单一页面展示所有功能，通过 <code>Ajax</code> 动态获取数据然后进行实时渲染，结合 CSS3 动画模仿原生 App 交互，然后再进行打包（使用工具把 Web 应用包一个壳，这个壳本质上是浏览器）变成一个“原生”应用。</p>
<p>SPA 在 PC 端也有广泛的应用，通常情况下使用 <code>Ajax</code> 异步请求数据，然后实现内容局部刷新。</p>
<h3 id="前端路由"><a href="#前端路由" class="headerlink" title="前端路由"></a>前端路由</h3><p>在后端开发中通过 URL 地址可以实现页面（视图）的切换，但是 AngularJS 是一个纯前端 MVC 框架，在开发单页面应用时，所有功能都在同一页面完成，所以无需切换 URL 地址（即不允许产生跳转），但 Web 应用中又经常通过链接（a标签）来更新页面（视图），当点击链接时还要阻止其向服务器发起请求，通过锚点（页内跳转）可以实现这一点。</p>
<p>实现单页面应用需要具备：</p>
<ol>
<li>只有一页面</li>
<li>链接使用锚点</li>
</ol>
<p><strong><em>单页面应用原理</em></strong> 是通过 hashchange 事件监听到锚点的变化，从而实现为不同的锚点准备不同的视图。</p>
<p><code>angular-route.js</code> 对这一实现原理进行了封装，将锚点的变化封装成路由（Route）,这是与后端路由的根本区别。</p>
<h3 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h3><ol>
<li><code>ngRoute</code> 提供两个方法匹配路由，分别是 <code>when</code> 和 <code>otherwise</code> ， <code>when</code> 方法需要两个参数， <code>otherwise</code> 方法作为 <code>when</code> 方法的补充只需要一个参数，其中 <code>when</code> 方法可以被多次调用。</li>
<li>第1个参数是一个字符串，代表当前 URL 中的 hash 值。</li>
<li>第2个参数是一个对象，配置当前路由的参数，如视图、控制器等。<ol>
<li>template 字符串形式的视图模板</li>
<li>templateUrl 引入外部视图模板</li>
<li>controller 视图模板所属的控制器</li>
<li>redirectTo跳转到其它路由（一般用于 otherwise 参数对象中）</li>
</ol>
</li>
<li>获取参数，在控制中注入 <code>$routeParams</code> 可以获取传递的参数</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">ng-app</span>=<span class="string">"App"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>AngularJS 路由和多视图<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        body &#123;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">            margin: 0;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#F7F7F7</span>;</span></span><br><span class="line"><span class="undefined">            font-family: Arial;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line"><span class="undefined">            max-width: 980px;</span></span><br><span class="line"><span class="undefined">            margin: 50px auto;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        ul &#123;</span></span><br><span class="line"><span class="undefined">            padding: 0;</span></span><br><span class="line"><span class="undefined">            margin: 0;</span></span><br><span class="line"><span class="undefined">            overflow: hidden;</span></span><br><span class="line"><span class="undefined">            list-style: none;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">            border-radius: 4px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        li &#123;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            width: 120px;</span></span><br><span class="line"><span class="undefined">            height: 40px;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">            line-height: 40px;</span></span><br><span class="line"><span class="undefined">            font-size: 18px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">li</span><span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#333</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        li a &#123;</span></span><br><span class="line"><span class="undefined">            display: block;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#FFF</span>;</span></span><br><span class="line"><span class="undefined">            text-decoration: none;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="undefined">            margin-top: 30px;</span></span><br><span class="line"><span class="undefined">            font-size: 24px;</span></span><br><span class="line"><span class="undefined">            padding: 0 20px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 导航菜单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/index"</span>&gt;</span>Index<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/introduce"</span>&gt;</span>Introduce<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/contact"</span>&gt;</span>Contact Us<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/list"</span>&gt;</span>List<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/page/1/name"</span>&gt;</span>Page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 占位符 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- AngularJS核心框架 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入实现单页面应用的模块 angular-route.js --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./libs/angular-route.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 第2个参数是处理依赖</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// App这个模块是依赖 ngRoute 模块</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> App = angular.module(<span class="string">'App'</span>, [<span class="string">'ngRoute'</span>]);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 需要配置路由模块</span></span></span><br><span class="line"><span class="javascript">        App.config([<span class="string">'$routeProvider'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$routeProvider</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $routeProvider.when(<span class="string">'/'</span>, &#123;</span></span><br><span class="line"><span class="javascript">                template: <span class="string">'Index Page'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            .when(<span class="string">'/index'</span>, &#123;</span></span><br><span class="line"><span class="javascript">             template: <span class="string">'Index Page'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            .when(<span class="string">'/introduce'</span>, &#123;</span></span><br><span class="line"><span class="javascript">                template: <span class="string">'Introduce Page'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            .when(<span class="string">'/contact'</span>, &#123;</span></span><br><span class="line"><span class="javascript">                template: <span class="string">'Contact Us Page'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            .when(<span class="string">'/404'</span>, &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// template: '404 not found'</span></span></span><br><span class="line"><span class="javascript">                templateUrl: <span class="string">'./404.html'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            .when(<span class="string">'/list'</span>, &#123;</span></span><br><span class="line"><span class="javascript">                templateUrl: <span class="string">'./list.html'</span>,</span></span><br><span class="line"><span class="javascript">                controller: <span class="string">'ListController'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            .when(<span class="string">'/page/:n/name/:s'</span>, &#123;</span></span><br><span class="line"><span class="javascript">                template: <span class="string">'页码'</span>,</span></span><br><span class="line"><span class="javascript">                controller: <span class="string">'ListController'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">            .otherwise(&#123;</span></span><br><span class="line"><span class="javascript">                redirectTo: <span class="string">'/404'</span></span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;]);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 通过$routeParams可以获得参数</span></span></span><br><span class="line"><span class="javascript">        App.controller(<span class="string">'ListController'</span>, [<span class="string">'$scope'</span>, <span class="string">'$routeParams'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope, $routeParams</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $scope.items = [<span class="string">'移动web'</span>, <span class="string">'AngularJS'</span>, <span class="string">'面向对象'</span>, <span class="string">'Ajax'</span>];</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log($routeParams);</span></span><br><span class="line"><span class="undefined">        &#125;]);</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>AngularJS 本身实现了简版的 <code>jQuery Lite</code> ，如果没有引入 <code>jQuery</code> ，那么通过 <code>angular.element(原生DOM)</code> 不能选择元素，但是可以将一个 DOM 元素转成 <code>jQuery</code> 对象。</p>
<p>如果引提前引入了 <code>jQuery</code> ，则 <code>angular.element</code> 完全等于 <code>jQuery</code> 或者 <code>$</code> 。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/08/04/Angular/AngularJS简介/" data-id="cjvlw5bnt00bvxfq3fadtqs8y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AngularJS/">AngularJS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java/Java中equals()和hashCode()的方法详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/21/Java/Java中equals()和hashCode()的方法详解/" class="article-date">
  <time datetime="2016-07-21T09:29:41.000Z" itemprop="datePublished">2016-07-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/后端/">后端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/21/Java/Java中equals()和hashCode()的方法详解/">Java 中 equals() 和 hashCode() 的方法详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="equals-与-hashCode"><a href="#equals-与-hashCode" class="headerlink" title="equals() 与 hashCode()"></a>equals() 与 hashCode()</h1><p><code>equals()</code>：反映的是对象或变量具体的值，即两个对象里面包含的值–可能是对象的引用，也可能是值类型的值。</p>
<p><code>hashCode()</code>：计算出对象实例的哈希码，并返回哈希码，又称为散列函数。根类 Object 的 <code>hashCode()</code> 方法的计算依赖于对象实例的 D（内存地址），故每个 Object 对象的 hashCode 都是唯一的；当然，当对象所对应的类重写了 <code>hashCode()</code> 方法时，结果就截然不同了。</p>
<h2 id="首先-equals-和-hashcode-这两个方法都是从-object-类中继承过来的。"><a href="#首先-equals-和-hashcode-这两个方法都是从-object-类中继承过来的。" class="headerlink" title="首先 equals() 和 hashcode() 这两个方法都是从 object 类中继承过来的。"></a>首先 <code>equals()</code> 和 <code>hashcode()</code> 这两个方法都是从 object 类中继承过来的。</h2><p><code>equals()</code> 方法在 object 类中定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span> == obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>很明显是对两个对象的地址值进行的比较（也就是比较对象的引用）。但是我们必需清楚，当 String 、Math、还有Integer、Double 等等这些封装类在使用 <code>equals()</code> 方法时，都覆盖了 object 类的 <code>equals()</code> 方法，因为 Object 中的 <code>equals()</code> 不能满足需求。</p>
<p>下面就以 String 类中的 <code>equals()</code> 方法为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object anObject)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == anObject) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (anObject <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">    String anotherString = (String)anObject;</span><br><span class="line">    <span class="keyword">int</span> n = count;</span><br><span class="line">    <span class="keyword">if</span> (n == anotherString.count) &#123;</span><br><span class="line">        <span class="keyword">char</span> v1[] = value;</span><br><span class="line">        <span class="keyword">char</span> v2[] = anotherString.value;</span><br><span class="line">        <span class="keyword">int</span> i = offset;</span><br><span class="line">        <span class="keyword">int</span> j = anotherString.offset;</span><br><span class="line">   <span class="keyword">while</span> (n– != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v1[i++] != v2[j++])</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>很明显，这是进行的内容比较，而已经不再是地址的比较。依次类推 Double、Integer、Math等等这些类都是重写了 <code>equals()</code> 方法的，从而进行的是内容的比较。当然了基本类型是进行值的比较，这个没有什么好说的。</p>
<p>我们还应该注意，Java 语言对 <code>equals()</code> 的要求如下，这些要求是必须遵循的：</p>
<ul>
<li>对称性：如果 x.equals(y) 返回是 true ，那么 y.equals(x) 也应该返回是 true 。</li>
<li>反射性：x.equals(x) 必须返回是 true 。</li>
<li>类推性：如果 x.equals(y) 返回是 true ，而且 y.equals(z) 返回是 true ，那么z.equals(x)也应该返回是 true 。</li>
<li>还有一致性：如果 x.equals(y) 返回是 true ，只要 x 和 y 内容一直不变，不管你重复 x.equals(y) 多少次，返回都是 true 。</li>
<li>任何情况下，x.equals(null) ，永远返回是 false ；x.equals (和 x 不同类型的对象)永远返回是 false 。</li>
</ul>
<p>以上这五点是重写 <code>equals()</code> 方法时，必须遵守的准则，如果违反会出现意想不到的结果，请大家一定要遵守。</p>
<h2 id="hashcode-方法，在-object-类中定义如下："><a href="#hashcode-方法，在-object-类中定义如下：" class="headerlink" title="hashcode() 方法，在 object 类中定义如下："></a><code>hashcode()</code> 方法，在 object 类中定义如下：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">int</span> `hashcode()`;</span><br></pre></td></tr></table></figure>
<p>说明是一个本地方法，它的实现是根据本地机器相关的。当然我们可以在自己写的类中覆盖 <code>hashcode()</code> 方法，比如 String、 Integer、Double 等等这些类都是覆盖了 <code>hashcode()</code> 方法的。</p>
<p>例如在String类中定义的 <code>hashcode()</code> 方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> `hashcode()` &#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash;</span><br><span class="line">    <span class="keyword">if</span> (h == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> off = offset;</span><br><span class="line">        <span class="keyword">char</span> val[] = value;</span><br><span class="line">        <span class="keyword">int</span> len = count;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            h = <span class="number">31</span>*h + val[off++];</span><br><span class="line">        &#125;</span><br><span class="line">            hash = h;</span><br><span class="line">        &#125;</span><br><span class="line">     <span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解释一下这个程序（String的API中写到）：</p>
<p><code>s[0]*31^(n-1) + s[1]*31^(n-2) + … + s[n-1]</code></p>
<p>使用 int 算法，这里 s[i] 是字符串的第 i 个字符，n 是字符串的长度，^ 表示求幂。<br>（空字符串的哈希码为 0）</p>
<p>首先，想要明白 hashCode 的作用，你必须要先知道 Java 中的集合。</p>
<p>总的来说，Java 中的集合（Collection）有两类，一类是 List，再有一类是 Set。</p>
<p>你知道它们的区别吗？前者集合内的元素是有序的，元素可以重复；后者元素无序，但元素不可重复。</p>
<p>那么这里就有一个比较严重的问题了：要想保证元素不重复，可两个元素是否重复应该依据什么来判断呢？</p>
<p>这就是 Object.equals 方法了。但是，如果每增加一个元素就检查一次，那么当元素很多时，后添加到集合中的元素比较的次数就非常多了。</p>
<p>也就是说，如果集合中现在已经有 1000 个元素，那么第 1001 个元素加入集合时，它就要调用 1000 次 equals 方法。这显然会大大降低效率。</p>
<p>于是，Java 采用了哈希表的原理。哈希（Hash）实际上是个人名，由于他提出一哈希算法的概念，所以就以他的名字命名了。</p>
<p>哈希算法也称为散列算法，是将数据依特定算法直接指定到一个地址上。如果详细讲解哈希算法，那需要更多的文章篇幅，我在这里就不介绍了。</p>
<p>初学者可以这样理解，hashCode 方法实际上返回的就是对象存储的物理地址（实际可能并不是）。</p>
<p>这样一来，当集合要添加新的元素时，先调用这个元素的 hashCode 方法，就一下子能定位到它应该放置的物理位置上。</p>
<p>如果这个位置上没有元素，它就可以直接存储在这个位置上，不用再进行任何比较了；如果这个位置上已经有元素了，就调用它的 equals 方法与新元素进行比较，相同的话就不存了，不相同就散列其它的地址。</p>
<p>所以这里存在一个冲突解决的问题。这样一来实际调用 equals 方法的次数就大大降低了，几乎只需要一两次。</p>
<p>所以，Java 对于 eqauls 方法和 hashCode 方法是这样规定的：</p>
<ol>
<li>如果两个对象相同，那么它们的hashCode值一定要相同；</li>
<li>如果两个对象的hashCode相同，它们并不一定相同;</li>
</ol>
<p>上面说的对象相同指的是用eqauls方法比较。你当然可以不按要求去做了，但你会发现，相同的对象可以出现在Set集合中。同时，增加新元素的效率会大大下降。</p>
<h2 id="这里我们首先要明白一个问题："><a href="#这里我们首先要明白一个问题：" class="headerlink" title="这里我们首先要明白一个问题："></a>这里我们首先要明白一个问题：</h2><p><code>equals()</code> 相等的两个对象，<code>hashcode()</code> 一定相等；</p>
<p><code>equals()</code> 不相等的两个对象，却并不能证明他们的 <code>hashcode()</code> 不相等。换句话说，<code>equals()</code> 方法不相等的两个对象，<code>hashcode()</code> 有可能相等。（我的理解是由于哈希码在生成的时候产生冲突造成的）。</p>
<p>反过来：<code>hashcode()</code> 不等，一定能推出 <code>equals()</code> 也不等；<code>hashcode()</code> 相等，<code>equals()</code> 可能相等，也可能不等。</p>
<p>解释下第3点的使用范围，我的理解是在 object、String 等类中都能使用。在 object类中，<code>hashcode()</code> 方法是本地方法，返回的是对象的地址值，而 object 类中的 <code>equals()</code> 方法比较的也是两个对象的地址值，如果 <code>equals()</code> 相等，说明两个对象地址值也相等，当然 <code>hashcode()</code> 也就相等了；在String类中，<code>equals()</code> 返回的是两个对象内容的比较，当两个对象内容相等时，<code>hashcode()</code> 方法根据String类的重写（第2点里面已经分析了）代码的分析，也可知道 <code>hashcode()</code> 返回结果也会相等。</p>
<p>以此类推，可以知道 Integer、Double 等封装类中经过重写的 <code>equals()</code> 和 <code>hashcode()</code> 方法也同样适合于这个原则。当然没有经过重写的类，在继承了 object 类的 <code>equals()</code> 和 <code>hashcode()</code> 方法后，也会遵守这个原则。</p>
<p>谈到 <code>hashcode()</code> 和 <code>equals()</code> 就不能不说到 hashset,hashmap,hashtable 中的使用，具体是怎样呢，请看如下分析：</p>
<p>Hashset 是继承 Set 接口，Set 接口又实现 Collection 接口，这是层次关系。那么 hashset 是根据什么原理来存取对象的呢？</p>
<p>在 hashset 中不允许出现重复对象，元素的位置也是不确定的。在 hashset 中又是怎样判定元素是否重复的呢？这就是问题的关键所在，经过一下午的查询求证终于获得了一点启示，和大家分享一下，在 java 的集合中，判断两个对象是否相等的规则是：</p>
<ol>
<li>判断两个对象的hashCode是否相等<ul>
<li>如果不相等，认为两个对象也不相等，完毕</li>
<li>如果相等，转入2（这一点只是为了提高存储效率而要求的，其实理论上没有也可以，但如果没有，实际使用时效率会大大降低，所以我们这里将其做为必需的。后面会重点讲到这个问题。）</li>
</ul>
</li>
<li>判断两个对象用equals运算是否相等<ul>
<li>如果不相等，认为两个对象也不相等</li>
<li>如果相等，认为两个对象相等（<code>equals()</code> 是判断两个对象是否相等的关键）</li>
</ul>
</li>
</ol>
<p>为什么是两条准则，难道用第一条不行吗？不行，因为前面已经说了，<code>hashcode()</code> 相等时，<code>equals()</code> 方法也可能不等，所以必须用第 2 条准则进行限制，才能保证加入的为非重复元素。</p>
<p>比如下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">    String s1=<span class="keyword">new</span> String(“zhaoxudong”);</span><br><span class="line">    String s2=<span class="keyword">new</span> String(“zhaoxudong”);</span><br><span class="line">    System.out.println(s1==s2);<span class="comment">//false</span></span><br><span class="line">    System.out.println(s1.equals(s2));<span class="comment">//true</span></span><br><span class="line">    System.out.println(s1.`hashcode()`);<span class="comment">//s1.`hashcode()`等于s2.`hashcode()`</span></span><br><span class="line">    System.out.println(s2.`hashcode()`);</span><br><span class="line">    Set hashset=<span class="keyword">new</span> HashSet();</span><br><span class="line">    hashset.add(s1);</span><br><span class="line">    hashset.add(s2);<span class="comment">/*实质上在添加s1,s2时，运用上面说到的两点准则，可以知道hashset认为s1和s2是相等的，是在添加重复元素，所以让s2覆盖了s1;*/</span></span><br><span class="line">    Iterator it=hashset.iterator();</span><br><span class="line">    <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">       System.out.println(it.next());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>最后在while循环的时候只打印出了一个”zhaoxudong”。</p>
<p>输出结果为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line">-967303459</span><br><span class="line">-967303459</span><br></pre></td></tr></table></figure>
<p>这是因为 String 类已经重写了 <code>equals()</code> 方法和 <code>hashcode()</code> 方法，所以在根据上面的第1.2条原则判定时，hashset认为它们是相等的对象，进行了重复添加。</p>
<p>但是看下面的程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        HashSet hs=<span class="keyword">new</span> HashSet();</span><br><span class="line">        hs.add(<span class="keyword">new</span> Student(<span class="number">1</span>,”zhangsan”));</span><br><span class="line">        hs.add(<span class="keyword">new</span> Student(<span class="number">2</span>,”lisi”));</span><br><span class="line">        hs.add(<span class="keyword">new</span> Student(<span class="number">3</span>,”wangwu”));</span><br><span class="line">        hs.add(<span class="keyword">new</span> Student(<span class="number">1</span>,”zhangsan”));</span><br><span class="line">        Iterator it=hs.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(it.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    String name;</span><br><span class="line">    Student(<span class="keyword">int</span> num,String name)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.num=num;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num+”:”+name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1:zhangsan</span><br><span class="line">1:zhangsan</span><br><span class="line">3:wangwu</span><br><span class="line">2:lisi</span><br></pre></td></tr></table></figure>
<p>问题出现了，为什么 hashset 添加了相等的元素呢，这是不是和 hashset 的原则违背了呢？回答是：没有</p>
<p>因为在根据 <code>hashcode()</code> 对两次建立的 new Student(1,”zhangsan”) 对象进行比较时，生成的是不同的哈希码值，所以 hashset 把他当作不同的对象对待了，当然此时的 <code>equals()</code> 方法返回的值也不等（这个不用解释了吧）。</p>
<p>那么为什么会生成不同的哈希码值呢？上面我们在比较s1和s2的时候不是生成了同样的哈希码吗？</p>
<p>原因就在于我们自己写的Student类并没有重新自己的 <code>hashcode()</code> 和 <code>equals()</code> 方法，所以在比较时，是继承的 object 类中的 <code>hashcode()</code> 方法，呵呵，各位还记得 object 类中的 <code>hashcode()</code> 方法比较的是什么吧！！</p>
<p>它是一个本地方法，比较的是对象的地址（引用地址），使用 new 方法创建对象，两次生成的当然是不同的对象了（这个大家都能理解吧。。。），造成 的结果就是两个对象的 <code>hashcode()</code> 返回的值不一样。</p>
<p>所以根据第一个准则，hashset 会把它们当作不同的对象对待，自然也用不着第二个准则进行 判定了。那么怎么解决这个问题呢？？</p>
<p>答案是：在 Student 类中重新 <code>hashcode()</code> 和 <code>equals()</code> 方法。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    String name;</span><br><span class="line">    Student(<span class="keyword">int</span> num,String name)&#123;</span><br><span class="line">        <span class="keyword">this</span>.num=num;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> `hashcode()`&#123;</span><br><span class="line">        <span class="keyword">return</span> num*name.`hashcode()`;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">        Student s=(Student)o;</span><br><span class="line">        <span class="keyword">return</span> num==s.num &amp;&amp; name.equals(s.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num+”:”+name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>根据重写的方法，即便两次调用了 new Student(1,”zhangsan”)，我们在获得对象的哈希码时，根据重写的方法 <code>hashcode()</code>，获得的哈希码肯定是一样的（这一点应该没有疑问吧）。</p>
<p>当然根据 <code>equals()</code> 方法我们也可判断是相同的。所以在向 hashset 集合中添加时把它们当作重复元素看待了。所以运行修改后的程序时，我们会发现运行结果是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1:zhangsan</span><br><span class="line">3:wangwu</span><br><span class="line">2:lisi</span><br></pre></td></tr></table></figure>
<p>可以看到重复元素的问题已经消除。</p>
<p>关于在 hibernate 的 pojo 类中，重新 <code>equals()</code> 和 <code>hashcode()</code> 的问题：</p>
<ol>
<li>重点是 equals，重写 hashCode 只是技术要求（为了提高效率）</li>
<li>为什么要重写 equals 呢，因为在 java 的集合框架中，是通过 equals 来判断两个对象是否相等的</li>
<li>在 hibernate 中，经常使用set集合来保存相关对象，而set集合是不允许重复的。我们再来谈谈前面提到在向 hashset 集合中添加元素时,怎样判断对象是否相同的准则，前面说了两条，其实只要重写 <code>equals()</code> 这一条也可以。</li>
</ol>
<p>但当 hashset 中元素比较多时，或者是重写的 <code>equals()</code> 方法比较复杂时，我们只用 <code>equals()</code> 方法进行比较判断，效率也会非常低，所以引入了 <code>hashcode()</code> 这个方法，只是为了提高效率，但是我觉得这是非常有必要的（所以我们在前面以两条准则来进行hashset的元素是否重复 的判断）。</p>
<p>比如可以这样写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> `hashcode()`&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;&#125;<span class="comment">//等价于hashcode无效</span></span><br></pre></td></tr></table></figure>
<p>这样做的效果就是在比较哈希码的时候不能进行判断，因为每个对象返回的哈希码都是1，每次都必须要经过比较 <code>equals()</code> 方法后才能进行判断是否重复，这当然会引起效率的大大降低。</p>
<p>我有一个问题，如果像前面提到的在 hashset 中判断元素是否重复的必要方法是 <code>equals()</code> 方法（根据网上找到的观点），但是这里并没有涉及到关于哈希表的问题，可是这个集合却叫hashset，这是为什么？？</p>
<p>我想，在 <code>hashmap, hashtable</code> 中的存储操作，依然遵守上面的准则。所以这里不再多说。</p>
<p>如果大家觉得不足的地方还是多多指教。希望能在探讨中一起进步。</p>
<p><a href="http://www.cnblogs.com/jesonjason/p/5492208.html" target="_blank" rel="noopener">原文地址</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/07/21/Java/Java中equals()和hashCode()的方法详解/" data-id="cjvlw5bn500aexfq3m7d310qd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Front-end/大前端介绍" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/22/Front-end/大前端介绍/" class="article-date">
  <time datetime="2016-06-22T14:18:33.000Z" itemprop="datePublished">2016-06-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/22/Front-end/大前端介绍/">大前端工具介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="大前端介绍"><a href="#大前端介绍" class="headerlink" title="大前端介绍"></a>大前端介绍</h1><p>现在移动端各种终端设备崛起，已经超过了 pc 端，设备不同必然导致开发语言不统一，开发越来越困难，比如做一个游戏，需要开发安卓版，IOS 版本等几个不同的版本，非常浪费人力、物力。</p>
<p>大前端时代应运而生，它的出现恰恰解决了这些困难。</p>
<h2 id="关于ES6项目构建"><a href="#关于ES6项目构建" class="headerlink" title="关于ES6项目构建"></a>关于ES6项目构建</h2><ul>
<li>项目构建步骤<ol>
<li>新建项目文件夹(三个板块)<ol>
<li>app：前端代码(js，css，html 模板)<ul>
<li>js</li>
<li>css</li>
<li>views</li>
</ul>
</li>
<li>server：服务器代码(server) <code>一个完整的项目必须要服务器提供接口和真实数据</code><ul>
<li><code>express-generator脚手架</code></li>
<li><code>express -e .</code></li>
</ul>
</li>
<li>tasks：辅助代码(前端代码编译以及自动化)<ul>
<li>util：放置常见 gulp 自动化脚本<ul>
<li><code>args.js</code> (自己编写命令行参数脚本)</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>创建必要的配置文件<ol>
<li>package.json (npm install -y)</li>
<li><code>.babelrc</code> (支持es6语法)</li>
<li><code>gulpfile.babel.js</code> (由于项目中用到es6语法，所以 gulp 的启动文件后缀名需要添加 <code>.babel</code>)</li>
</ol>
</li>
<li>处理命令行参数 (<code>args.js</code> 自定义参数脚本)</li>
</ol>
</li>
</ul>
<h2 id="流行框架"><a href="#流行框架" class="headerlink" title="流行框架"></a>流行框架</h2><ul>
<li>库和框架<ul>
<li>库：小而精，没有具体的规范，主要以自己代码为主</li>
<li>框架：大而全，主要以被人代码为骨架，在这个骨架下写自己的代码，需要遵守框架制定的规范</li>
</ul>
</li>
<li>MVC<ul>
<li>一种思想，其根本是组成代码结构的一种方式</li>
<li>最关键的点是降低耦合度</li>
<li>方便代码编写和维护</li>
<li>便于团队合作开发</li>
<li>简化代码整体复杂度，分模块组织代码</li>
<li>敏捷开发思想：约定大于配置，只要团队成员相互约定好便可以迅速开发</li>
</ul>
</li>
<li>Vue<ul>
<li>数据驱动框架：<ul>
<li>数据驱动视图，只要修改了数据就自动更新视图，不需要 DOM 操作</li>
</ul>
</li>
</ul>
</li>
<li>任务自动化<ul>
<li>grunt：<strong>属于级联操作，文件多了之后操作慢</strong></li>
<li>gulp：<strong>文件流操作 (stream)，速度快</strong></li>
</ul>
</li>
<li>编译工具<ul>
<li>babel：<strong>编译ES6</strong></li>
<li>webpack：<strong>模块化项目依赖</strong></li>
</ul>
</li>
</ul>
<h2 id="JQuery"><a href="#JQuery" class="headerlink" title="JQuery"></a>JQuery</h2><ul>
<li>入口函数封装<ul>
<li>可以不使用 Jquery 入口函数，利用 DOMContentLoaded 代替</li>
</ul>
</li>
</ul>
<h2 id="模块化加载"><a href="#模块化加载" class="headerlink" title="模块化加载"></a>模块化加载</h2><ul>
<li><p>CommonJS 规范</p>
<ul>
<li><p>核心思想</p>
<ul>
<li>允许模块通过 <code>require</code> 方法来同步加载所要依赖的其他模块，然后通过 <code>exports</code> 或 <code>module.exports</code> 导出需要暴露的借口  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">"module"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"../file.js"</span>);</span><br><span class="line">exports.doStuff = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = someValue;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>具体实现</p>
<ul>
<li>服务器端的 Node.js</li>
<li>Browserify</li>
</ul>
</li>
</ul>
</li>
<li><p>AMD <code>Asynchronous Module Definition</code> 规范</p>
<ul>
<li><p>核心思想</p>
<ul>
<li>只有一个主要接口<code>define(id?， dependencies?， factory)</code>，它要在声明模块的时候指定所有的依赖 dependencies，并且还要当做形参传到 factory 中，对于依赖的模块提前执行，依赖前置  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">"module"</span>， [<span class="string">"dep1"</span>， <span class="string">"dep2"</span>]， <span class="function"><span class="keyword">function</span>(<span class="params">d1， d2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> someExportedValue;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">require</span>([<span class="string">"module"</span>， <span class="string">"../file"</span>]， <span class="function"><span class="keyword">function</span>(<span class="params">module， file</span>) </span>&#123; <span class="comment">/* ... */</span> &#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>具体实现</p>
<ul>
<li>requireJS</li>
</ul>
</li>
</ul>
</li>
<li><p>CMD <code>Common Module Definition</code> 规范</p>
<ul>
<li><p>和 AMD 很相似，尽量保持简单，并与 CommonJS 和 Node.js 的 Modules 规范保持了很大的兼容性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require， exports， module</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</span><br><span class="line">    <span class="keyword">var</span> Spinning = <span class="built_in">require</span>(<span class="string">'./spinning'</span>);</span><br><span class="line">    exports.doSomething = ...</span><br><span class="line">    <span class="built_in">module</span>.exports = ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>具体实现</p>
<ul>
<li>Sea.js</li>
</ul>
</li>
</ul>
</li>
<li>后台node.js<ul>
<li>依赖 <strong>require 和 exports</strong></li>
</ul>
</li>
<li>browserify<ul>
<li>模块加载器，但是只能加载js</li>
</ul>
</li>
<li>webpack<ul>
<li>模块加载器，一切东西都是模块，包括 css，图片，vue 文件，js 等等</li>
<li>模块都是分开写，最后打包到一块儿</li>
</ul>
</li>
</ul>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><ul>
<li>webpack 正确配置 <code>process.env.NODE_ENV</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">    <span class="string">'process.env'</span>：&#123;</span><br><span class="line">        <span class="string">'NODE_ENV'</span>：<span class="built_in">JSON</span>.stringify(<span class="string">'production'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>调用时按如下命令：</strong> 表示生产环境下如何使用 webpack 打包 (Linux环境)</p>
<p><code>NODE_ENV=production webpack --progress --colors</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hushiking.github.io/2016/06/22/Front-end/大前端介绍/" data-id="cjvlw5bjn000rxfq3a8hzaq6q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ECMAScript/">ECMAScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/6/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web前端/">Web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web前端/">web前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/自由随笔/">自由随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维与Linux/">运维与Linux</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ajax/">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/">Cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django/">Django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECMAScript/">ECMAScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grammar/">Grammar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RegExp/">RegExp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSI/">SSI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebAPP/">WebAPP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/audio/">audio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmd/">cmd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/form表单/">form表单</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reduce/">reduce</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/作用域/">作用域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原型/">原型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原型链/">原型链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/循环遍历/">循环遍历</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/枚举/">枚举</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/缓存/">缓存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域/">跨域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/闭包/">闭包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/音视频/">音视频</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Ajax/" style="font-size: 12.5px;">Ajax</a> <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/Array/" style="font-size: 17.5px;">Array</a> <a href="/tags/CSS/" style="font-size: 12.5px;">CSS</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/DOM/" style="font-size: 16.25px;">DOM</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Docker/" style="font-size: 11.25px;">Docker</a> <a href="/tags/ECMAScript/" style="font-size: 11.25px;">ECMAScript</a> <a href="/tags/Error/" style="font-size: 10px;">Error</a> <a href="/tags/Git/" style="font-size: 13.75px;">Git</a> <a href="/tags/Grammar/" style="font-size: 10px;">Grammar</a> <a href="/tags/HTML/" style="font-size: 18.75px;">HTML</a> <a href="/tags/HTTP/" style="font-size: 11.25px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/Java/" style="font-size: 16.25px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 12.5px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Node-js/" style="font-size: 11.25px;">Node.js</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Promise/" style="font-size: 11.25px;">Promise</a> <a href="/tags/Python/" style="font-size: 12.5px;">Python</a> <a href="/tags/React/" style="font-size: 16.25px;">React</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/SSI/" style="font-size: 10px;">SSI</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/WebAPP/" style="font-size: 10px;">WebAPP</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/audio/" style="font-size: 11.25px;">audio</a> <a href="/tags/cmd/" style="font-size: 10px;">cmd</a> <a href="/tags/es6/" style="font-size: 11.25px;">es6</a> <a href="/tags/form表单/" style="font-size: 10px;">form表单</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/reduce/" style="font-size: 10px;">reduce</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/作用域/" style="font-size: 10px;">作用域</a> <a href="/tags/原型/" style="font-size: 10px;">原型</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/循环遍历/" style="font-size: 10px;">循环遍历</a> <a href="/tags/枚举/" style="font-size: 10px;">枚举</a> <a href="/tags/缓存/" style="font-size: 11.25px;">缓存</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/闭包/" style="font-size: 15px;">闭包</a> <a href="/tags/随笔/" style="font-size: 12.5px;">随笔</a> <a href="/tags/面试/" style="font-size: 13.75px;">面试</a> <a href="/tags/音视频/" style="font-size: 11.25px;">音视频</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">七月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/22/HTML/HTML5 Audio兼容问题/">HTML5 Audio兼容问题</a>
          </li>
        
          <li>
            <a href="/2019/03/30/Webpack/webpack中externals用法/">webpack externals 的用法</a>
          </li>
        
          <li>
            <a href="/2019/03/28/Vue/Vue微信网页刷新问题/">Vue 微信网页刷新问题</a>
          </li>
        
          <li>
            <a href="/2019/03/18/JavaScript/JS生成[n,m]随机数/">JS 生成[n, m]随机数</a>
          </li>
        
          <li>
            <a href="/2019/02/09/Vue/Vue使用中遇到的问题/">Vue 使用中遇到的问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 化简为凡<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>